function _b9ee3f55d54c5c57e2bfb5fb5b41d13b9ed20d30(){};function _6e9635285736a84be94ec7a6eeea546353e5e1b3(){};function _1a2fba4a66dd8005f62a936886465f69b1928214(){};function _08d25d2e954a62589bf5a71314c0073a100c31d0(){};function _6385726ee9d7f0397893f1e7aa98c317a5c24828(){};function _2115e2366c6fa9a74fba71bf241d2954b85af676(){};function _94a0b193018e0fbd7120f3d037a4eef51b6f3d16(){};function _13ed317c5a1c8d49a14817a78249b8b68f3fe379(){};function _ada9aef694a385da9f006700cc7f2c4f3572deae(){};function _ffb872246a27d8d7a3c254071f55866635d9fe49(){};function _f4a03e332e62bfbb17e0c7f7d6ded7111996a398(){};function _922640bab7157af50751d0ec56d1a78b1b66f453(){};function _e7f6981874e0ad45d3b6727a4727c94b4ae29be5(){};function _7aa95312123921524bbea8fe872c90cff514b0ff(){};function _1e6ef1409f7cdfbef3e4e76dc8e49304eb9b0fe4(){};function _00aef2d473acd8352b2ce97c3fbea6fa273cbb33(){};function _1b8350fc2e906d8f3b7ac7b246b58a3141d83c69(){};function _39b4e67c27c030c3cc4b939dc6041492e1522b88(){};function _d392f8e6ab58a8e759f5dcda82dfa8263fc2fd81(){};function _718f0a36f30587ac665fa5fe79340a40c326c292(){};function _f4e4b908de4de1c82a99ee05554490b57349357f(){};function _7e5336c8992bb40d1dea2c03883ceec1f3099199(){};function _3253b8d06cc9561cb2c2174ca62efc916bbcbd89(){};function _fc31c6b866f3905e4a3a34a88d11acccd5243a9c(){};function _66a4d0e8c5260417423f81fd655d16ebdcdfc1eb(){};var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=='function'?Object.defineProperty:function(b,c,a){a=a;if(b==Array.prototype||b==Object.prototype){return}b[c]=a.value};$jscomp.getGlobal=function(a){return typeof window!='undefined'&&window===a?a:typeof global!='undefined'&&global!=null?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(i,f,j,k){if(!f){return}var a=$jscomp.global;var b=i.split('.');for(var e=0;e<b.length-1;e++){var d=b[e];if(!(d in a)){a[d]={}}a=a[d]}var g=b[b.length-1];var h=a[g];var c=f(h);if(c==h||c==null){return}$jscomp.defineProperty(a,g,{configurable:!0,writable:!0,value:c})};$jscomp.polyfill('Array.prototype.copyWithin',function(a){if(a){return a}var b=function(d,c,b){var e=this.length;d=Number(d);c=Number(c);b=Number(b!=null?b:e);if(d<c){b=Math.min(b,e);while(c<b){if(c in this){this[d++]=this[c++]}else {delete this[d++];c++}}}else {b=Math.min(b,e+c-d);d+=b-c;while(b>c){if(--b in this){this[--d]=this[b]}else {delete this[d]}}}return this};return b},'es6','es3');$jscomp.SYMBOL_PREFIX='jscomp_symbol_';$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};if(!$jscomp.global['Symbol']){$jscomp.global['Symbol']=$jscomp.Symbol}};$jscomp.Symbol=function(){var a=0;function Symbol(b){return $jscomp.SYMBOL_PREFIX+(b||'')+a++}return Symbol}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global['Symbol'].iterator;if(!a){a=$jscomp.global['Symbol'].iterator=$jscomp.global['Symbol']('iterator')}if(typeof Array.prototype[a]!='function'){$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}})}$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){if(b<a.length){return {done:!1,value:a[b++]}}else {return {done:!0}}})};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();var a={next:b};a[$jscomp.global['Symbol'].iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();if(a instanceof String){a=a+''}var c=0;var b={next:function(){if(c<a.length){var e=c++;return {value:d(e,a[e]),done:!1}}b.next=function(){return {done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill('Array.prototype.entries',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b,c){return [b,c]})};return b},'es6','es3');$jscomp.polyfill('Array.prototype.fill',function(a){if(a){return a}var b=function(f,c,b){var d=this.length||0;if(c<0){c=Math.max(0,d+c)}if(b==null||b>d){b=d}b=Number(b);if(b<0){b=Math.max(0,d+b)}for(var e=Number(c||0);e<b;e++){this[e]=f}return this};return b},'es6','es3');$jscomp.findInternal=function(a,d,e){if(a instanceof String){a=String(a)}var f=a.length;for(var b=0;b<f;b++){var c=a[b];if(d.call(e,c,b,a)){return {i:b,v:c}}}return {i:-1,v:void 0}};$jscomp.polyfill('Array.prototype.find',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).v};return b},'es6','es3');$jscomp.polyfill('Array.prototype.findIndex',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).i};return b},'es6','es3');$jscomp.polyfill('Array.from',function(a){if(a){return a}var b=function(b,c,g){$jscomp.initSymbolIterator();c=c!=null?c:function(d){return d};var e=[];var f=b[Symbol.iterator];if(typeof f=='function'){b=f.call(b);var h;var j=0;while(!(h=b.next()).done){e.push(c.call(g,h.value,j++))}}else {var i=b.length;for(var d=0;d<i;d++){e.push(c.call(g,b[d],d))}}return e};return b},'es6','es3');$jscomp.polyfill('Object.is',function(a){if(a){return a}var b=function(b,c){if(b===c){return b!==0||1/b===1/c}else {return b!==b&&c!==c}};return b},'es6','es3');$jscomp.polyfill('Array.prototype.includes',function(a){if(a){return a}var b=function(d,g){var c=this;if(c instanceof String){c=String(c)}var f=c.length;var b=g||0;if(b<0){b=Math.max(b+f,0)}for(;b<f;b++){var e=c[b];if(e===d||Object.is(e,d)){return !0}}return !1};return b},'es7','es3');$jscomp.polyfill('Array.prototype.keys',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b){return b})};return b},'es6','es3');$jscomp.polyfill('Array.of',function(a){if(a){return a}var b=function(b){return Array.from(arguments)};return b},'es6','es3');$jscomp.polyfill('Array.prototype.values',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(c,b){return b})};return b},'es8','es3');$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.polyfill('Promise',function(c){if(c&&!$jscomp.FORCE_POLYFILL_PROMISE){return c}function AsyncExecutor(){this.batch_=null}AsyncExecutor.prototype.asyncExecute=function(a){if(this.batch_==null){this.batch_=[];this.asyncExecuteBatch_()}this.batch_.push(a);return this};AsyncExecutor.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global['setTimeout'];AsyncExecutor.prototype.asyncExecuteFunction=function(a){e(a,0)};AsyncExecutor.prototype.executeBatch_=function(){while(this.batch_&&this.batch_.length){var b=this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var d=b[a];b[a]=null;try{d()}catch(f){this.asyncThrow_(f)}}}this.batch_=null};AsyncExecutor.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a})};var b={PENDING:0,FULFILLED:1,REJECTED:2};var a=function(d){this.state_=b.PENDING;this.result_=undefined;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{d(a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.createResolveAndReject_=function(){var b=this;var a=!1;function firstCallWins(d){return function(e){if(!a){a=!0;d.call(b,e)}}}return {resolve:firstCallWins(this.resolveTo_),reject:firstCallWins(this.reject_)}};a.prototype.resolveTo_=function(b){if(b===this){this.reject_(new TypeError('A Promise cannot resolve to itself'))}else {if(b instanceof a){this.settleSameAsPromise_(b)}else {if(isObject(b)){this.resolveToNonPromiseObj_(b)}else {this.fulfill_(b)}}}};a.prototype.resolveToNonPromiseObj_=function(b){var a=undefined;try{a=b.then}catch(f){this.reject_(f);return}if(typeof a=='function'){this.settleSameAsThenable_(a,b)}else {this.fulfill_(b)}};function isObject(a){switch(typeof a){case 'object':return a!=null;case 'function':return !0;default:return !1;}}a.prototype.reject_=function(a){this.settle_(b.REJECTED,a)};a.prototype.fulfill_=function(a){this.settle_(b.FULFILLED,a)};a.prototype.settle_=function(d,a){if(this.state_!=b.PENDING){throw new Error('Cannot settle('+d+', '+a+'): Promise already settled in state'+this.state_)}this.state_=d;this.result_=a;this.executeOnSettledCallbacks_()};a.prototype.executeOnSettledCallbacks_=function(){if(this.onSettledCallbacks_!=null){for(var a=0;a<this.onSettledCallbacks_.length;++a){d.asyncExecute(this.onSettledCallbacks_[a])}this.onSettledCallbacks_=null}};var d=new AsyncExecutor();a.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)};a.prototype.settleSameAsThenable_=function(b,d){var a=this.createResolveAndReject_();try{b.call(d,a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.then=function(f,g){var b;var d;var e=new a(function(a,e){b=a;d=e});function createCallback(a,e){if(typeof a=='function'){return function(h){try{b(a(h))}catch(i){d(i)}}}else {return e}}this.callWhenSettled_(createCallback(f,b),createCallback(g,d));return e};a.prototype['catch']=function(a){return this.then(undefined,a)};a.prototype.callWhenSettled_=function(e,f){var a=this;function callback(){switch(a.state_){case b.FULFILLED:e(a.result_);break;case b.REJECTED:f(a.result_);break;default:throw new Error('Unexpected state: '+a.state_);}}if(this.onSettledCallbacks_==null){d.asyncExecute(callback)}else {this.onSettledCallbacks_.push(callback)}};function resolvingPromise(b){if(b instanceof a){return b}else {return new a(function(a,d){a(b)})}}a['resolve']=resolvingPromise;a['reject']=function(b){return new a(function(d,a){a(b)})};a['race']=function(b){return new a(function(e,f){var d=$jscomp.makeIterator(b);for(var a=d.next();!a.done;a=d.next()){resolvingPromise(a.value).callWhenSettled_(e,f)}})};a['all']=function(e){var d=$jscomp.makeIterator(e);var b=d.next();if(b.done){return resolvingPromise([])}else {return new a(function(g,h){var a=[];var f=0;function onFulfilled(b){return function(d){a[b]=d;f--;if(f==0){g(a)}}}do{a.push(undefined);f++;resolvingPromise(b.value).callWhenSettled_(onFulfilled(a.length-1),h);b=d.next()}while(!b.done)})}};return a},'es6','es3');$jscomp.polyfill('Promise.prototype.finally',function(a){if(a){return a}var b=function(b){return this.then(function(d){var c=Promise.resolve(b());return c.then(function(){return d})},function(d){var c=Promise.resolve(b());return c.then(function(){throw d})})};return b},'es9','es3');$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0};var a={};try{a.__proto__=b;return a.a}catch(c){}return !1};$jscomp.setPrototypeOf=typeof Object.setPrototypeOf=='function'?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b){throw new TypeError(a+' is not extensible')}return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(a instanceof Object){return}throw new TypeError('Iterator result '+a+' is not an object')};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=undefined;this.nextAddress=1;this.catchAddress_=0;this.finallyAddress_=0;this.abruptCompletion_=null;this.finallyContexts_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_){throw new TypeError('Generator is already running')}this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype['return']=function(a){this.abruptCompletion_={'return':a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(b,a){this.nextAddress=a;return {value:b}};$jscomp.generator.Context.prototype.yieldAll=function(d,b){var c=$jscomp.makeIterator(d);var a=c.next();$jscomp.generator.ensureIteratorResultIsObject_(a);if(a.done){this.yieldResult=a.value;this.nextAddress=b;return}this.yieldAllIterator_=c;return this.yield(a.value,b)};$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(b,a){this.catchAddress_=b;if(a!=undefined){this.finallyAddress_=a}};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(b,a){this.nextAddress=b;this.catchAddress_=a||0};$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;var b=this.abruptCompletion_.exception;this.abruptCompletion_=null;return b};$jscomp.generator.Context.prototype.enterFinallyBlock=function(c,b,a){if(!a){this.finallyContexts_=[this.abruptCompletion_]}else {this.finallyContexts_[a]=this.abruptCompletion_}this.catchAddress_=c||0;this.finallyAddress_=b||0};$jscomp.generator.Context.prototype.leaveFinallyBlock=function(d,c){var b=this.finallyContexts_.splice(c||0)[0];var a=this.abruptCompletion_=this.abruptCompletion_||b;if(a){if(a.isException){return this.jumpToErrorHandler_()}if(a.jumpTo!=undefined&&this.finallyAddress_<a.jumpTo){this.nextAddress=a.jumpTo;this.abruptCompletion_=null}else {this.nextAddress=this.finallyAddress_}}else {this.nextAddress=d}};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a){this.properties_.push(b)}this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){while(this.properties_.length>0){var a=this.properties_.pop();if(a in this.object_){return a}}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context();this.program_=a};$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_){return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_)}this.context_.next_(a);return this.nextStep_()};$jscomp.generator.Engine_.prototype.return_=function(b){this.context_.start_();var a=this.context_.yieldAllIterator_;if(a){var c='return' in a?a['return']:function(a){return {value:a,done:!0}};return this.yieldAllStep_(c,b,this.context_['return'])}this.context_['return'](b);return this.nextStep_()};$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_){return this.yieldAllStep_(this.context_.yieldAllIterator_['throw'],a,this.context_.next_)}this.context_.throw_(a);return this.nextStep_()};$jscomp.generator.Engine_.prototype.yieldAllStep_=function(d,e,c){try{var a=d.call(this.context_.yieldAllIterator_,e);$jscomp.generator.ensureIteratorResultIsObject_(a);if(!a.done){this.context_.stop_();return a}var b=a.value}catch(f){this.context_.yieldAllIterator_=null;this.context_.throw_(f);return this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,b);return this.nextStep_()};$jscomp.generator.Engine_.prototype.nextStep_=function(){while(this.context_.nextAddress){try{var b=this.program_(this.context_);if(b){this.context_.stop_();return {value:b.value,done:!1}}}catch(c){this.context_.yieldResult=undefined;this.context_.throw_(c)}}this.context_.stop_();if(this.context_.abruptCompletion_){var a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException){throw a.exception}return {value:a['return'],done:!0}}return {value:undefined,done:!0}};$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this['throw']=function(b){return a.throw_(b)};this['return']=function(b){return a.return_(b)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(b,c){var a=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(c));if($jscomp.setPrototypeOf){$jscomp.setPrototypeOf(a,b.prototype)}return a};$jscomp.asyncExecutePromiseGenerator=function(a){function passValueToGenerator(b){return a.next(b)}function passErrorToGenerator(b){return a['throw'](b)}return new Promise(function(b,c){function handleGeneratorRecord(d){if(d.done){b(d.value)}else {Promise.resolve(d.value).then(passValueToGenerator,passErrorToGenerator).then(handleGeneratorRecord,c)}}handleGeneratorRecord(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={};var b=Object.create(new $jscomp.global['Proxy'](a,{'get':function(d,e,c){return d==a&&e=='q'&&c==b}}));return b['q']===!0}catch(c){return !1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};$jscomp.polyfill('WeakMap',function(c){function isConformant(){if(!c||!Object.seal){return !1}try{var b=Object.seal({});var d=Object.seal({});var a=new c([[b,2],[d,3]]);if(a.get(b)!=2||a.get(d)!=3){return !1}a['delete'](b);a.set(d,4);return !a.has(b)&&a.get(d)==4}catch(e){return !1}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE){return c}}else {if(isConformant()){return c}}var a='$jscomp_hidden_'+Math.random();function insert(b){if(!$jscomp.owns(b,a)){var d={};$jscomp.defineProperty(b,a,{value:d})}}function patch(a){var b=Object[a];if(b){Object[a]=function(d){insert(d);return b(d)}}}patch('freeze');patch('preventExtensions');patch('seal');var d=0;var b=function(a){this.id_=(d+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=$jscomp.makeIterator(a);var b;while(!(b=f.next()).done){var e=b.value;this.set(e[0],e[1])}}};b.prototype.set=function(b,d){insert(b);if(!$jscomp.owns(b,a)){throw new Error('WeakMap key fail: '+b)}b[a][this.id_]=d;return this};b.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:undefined};b.prototype.has=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)};b.prototype['delete']=function(b){if(!$jscomp.owns(b,a)||!$jscomp.owns(b[a],this.id_)){return !1}return delete b[a][this.id_]};return b},'es6','es3');$jscomp.MapEntry=function(){this.previous;this.next;this.head;this.key;this.value};$jscomp.polyfill('Map',function(b){function isConformant(){if($jscomp.ASSUME_NO_NATIVE_MAP||!b||typeof b!='function'||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var e=Object.seal({x:4});var c=new b($jscomp.makeIterator([[e,'s']]));if(c.get(e)!='s'||c.size!=1||c.get({x:4})||c.set({x:4},'t')!=c||c.size!=2){return !1}var d=c.entries();var a=d.next();if(a.done||a.value[0]!=e||a.value[1]!='s'){return !1}a=d.next();if(a.done||a.value[0].x!=4||a.value[1]!='t'||!d.next().done){return !1}return !0}catch(i){return !1}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE){return b}}else {if(isConformant()){return b}}$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=new WeakMap();var a=function(a){this.data_={};this.head_=f();this.size=0;if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.set(d[0],d[1])}}};a.prototype.set=function(d,e){d=d===0?0:d;var a=c(this,d);if(!a.list){a.list=this.data_[a.id]=[]}if(!a.entry){a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:d,value:e};a.list.push(a.entry);this.head_.previous.next=a.entry;this.head_.previous=a.entry;this.size++}else {a.entry.value=e}return this};a.prototype['delete']=function(d){var a=c(this,d);if(a.entry&&a.list){a.list.splice(a.index,1);if(!a.list.length){delete this.data_[a.id]}a.entry.previous.next=a.entry.next;a.entry.next.previous=a.entry.previous;a.entry.head=null;this.size--;return !0}return !1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};a.prototype.has=function(a){return !!c(this,a).entry};a.prototype.get=function(d){var a=c(this,d).entry;return a&&a.value};a.prototype.entries=function(){return d(this,function(a){return [a.key,a.value]})};a.prototype.keys=function(){return d(this,function(a){return a.key})};a.prototype.values=function(){return d(this,function(a){return a.value})};a.prototype.forEach=function(e,d){var f=this.entries();var c;while(!(c=f.next()).done){var a=c.value;e.call(d,a[1],a[0],this)}};a.prototype[Symbol.iterator]=a.prototype.entries;var c=function(g,e){var f=h(e);var a=g.data_[f];if(a&&$jscomp.owns(g.data_,f)){for(var d=0;d<a.length;d++){var c=a[d];if(e!==e&&c.key!==c.key||e===c.key){return {id:f,list:a,index:d,entry:c}}}}return {id:f,list:a,index:-1,entry:undefined}};var d=function(c,d){var a=c.head_;return $jscomp.iteratorPrototype(function(){if(a){while(a.head!=c.head_){a=a.previous}while(a.next!=a.head){a=a.next;return {done:!1,value:d(a)}}a=null}return {done:!0,value:void 0}})};var f=function(){var a={};a.previous=a.next=a.head=a;return a};var g=0;var h=function(a){var c=a&&typeof a;if(c=='object'||c=='function'){a=a;if(!e.has(a)){var d=''+ ++g;e.set(a,d);return d}return e.get(a)}return 'p_'+a};return a},'es6','es3');$jscomp.polyfill('Math.acosh',function(a){if(a){return a}var b=function(b){b=Number(b);return Math.log(b+Math.sqrt(b*b-1))};return b},'es6','es3');$jscomp.polyfill('Math.asinh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.log(Math.abs(b)+Math.sqrt(b*b+1));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.log1p',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var f=b;var g=1;var c=b;var d=0;var e=1;while(d!=c){f*=b;e*=-1;c=(d=c)+e*f/++g}return c}return Math.log(1+b)};return b},'es6','es3');$jscomp.polyfill('Math.atanh',function(b){if(b){return b}var a=Math.log1p;var c=function(c){c=Number(c);return (a(c)-a(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.cbrt',function(a){if(a){return a}var b=function(b){if(b===0){return b}b=Number(b);var c=Math.pow(Math.abs(b),1/3);return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.clz32',function(a){if(a){return a}var b=function(b){b=Number(b)>>>0;if(b===0){return 32}var c=0;if((b&4.29490176E9)===0){b<<=16;c+=16}if((b&4.27819008E9)===0){b<<=8;c+=8}if((b&4.02653184E9)===0){b<<=4;c+=4}if((b&3.221225472E9)===0){b<<=2;c+=2}if((b&2.147483648E9)===0){c++}return c};return b},'es6','es3');$jscomp.polyfill('Math.cosh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);return (b(c)+b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.expm1',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var e=b;var f=1;var c=b;var d=0;while(d!=c){e*=b/++f;c=(d=c)+e}return c}return Math.exp(b)-1};return b},'es6','es3');$jscomp.polyfill('Math.hypot',function(a){if(a){return a}var b=function(d,e,h){d=Number(d);e=Number(e);var b,g,f;var c=Math.max(Math.abs(d),Math.abs(e));for(b=2;b<arguments.length;b++){c=Math.max(c,Math.abs(arguments[b]))}if(c>1.0E100||c<1.0E-100){if(!c){return c}d=d/c;e=e/c;f=d*d+e*e;for(b=2;b<arguments.length;b++){g=Number(arguments[b])/c;f+=g*g}return Math.sqrt(f)*c}else {f=d*d+e*e;for(b=2;b<arguments.length;b++){g=Number(arguments[b]);f+=g*g}return Math.sqrt(f)}};return b},'es6','es3');$jscomp.polyfill('Math.imul',function(a){if(a){return a}var b=function(b,c){b=Number(b);c=Number(c);var f=b>>>16&65535;var d=b&65535;var g=c>>>16&65535;var e=c&65535;var h=f*e+d*g<<16>>>0;return d*e+h|0};return b},'es6','es3');$jscomp.polyfill('Math.log10',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN10};return b},'es6','es3');$jscomp.polyfill('Math.log2',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN2};return b},'es6','es3');$jscomp.polyfill('Math.sign',function(a){if(a){return a}var b=function(b){b=Number(b);return b===0||isNaN(b)?b:b>0?1:-1};return b},'es6','es3');$jscomp.polyfill('Math.sinh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);if(c===0){return c}return (b(c)-b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.tanh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.exp(-2*Math.abs(b));var d=(1-c)/(1+c);return b<0?-d:d};return b},'es6','es3');$jscomp.polyfill('Math.trunc',function(a){if(a){return a}var b=function(b){b=Number(b);if(isNaN(b)||b===Infinity||b===-Infinity||b===0){return b}var c=Math.floor(Math.abs(b));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Number.EPSILON',function(a){return Math.pow(2,-52)},'es6','es3');$jscomp.polyfill('Number.MAX_SAFE_INTEGER',function(){return 9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.MIN_SAFE_INTEGER',function(){return -9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.isFinite',function(a){if(a){return a}var b=function(b){if(typeof b!=='number'){return !1}return !isNaN(b)&&b!==Infinity&&b!==-Infinity};return b},'es6','es3');$jscomp.polyfill('Number.isInteger',function(a){if(a){return a}var b=function(b){if(!Number.isFinite(b)){return !1}return b===Math.floor(b)};return b},'es6','es3');$jscomp.polyfill('Number.isNaN',function(a){if(a){return a}var b=function(b){return typeof b==='number'&&isNaN(b)};return b},'es6','es3');$jscomp.polyfill('Number.isSafeInteger',function(a){if(a){return a}var b=function(b){return Number.isInteger(b)&&Math.abs(b)<=Number.MAX_SAFE_INTEGER};return b},'es6','es3');$jscomp.polyfill('Number.parseFloat',function(a){return a||parseFloat},'es6','es3');$jscomp.polyfill('Number.parseInt',function(a){return a||parseInt},'es6','es3');$jscomp.assign=typeof Object.assign=='function'?Object.assign:function(d,e){for(var c=1;c<arguments.length;c++){var a=arguments[c];if(!a){continue}for(var b in a){if($jscomp.owns(a,b)){d[b]=a[b]}}}return d};$jscomp.polyfill('Object.assign',function(a){return a||$jscomp.assign},'es6','es3');$jscomp.polyfill('Object.entries',function(a){if(a){return a}var b=function(c){var d=[];for(var b in c){if($jscomp.owns(c,b)){d.push([b,c[b]])}}return d};return b},'es8','es3');$jscomp.polyfill('Object.getOwnPropertySymbols',function(a){if(a){return a}return function(){return []}},'es6','es5');$jscomp.polyfill('Reflect.ownKeys',function(b){if(b){return b}var a='jscomp_symbol_';function isSymbol(c){return c.substring(0,a.length)==a}var c=function(e){var f=[];var c=Object.getOwnPropertyNames(e);var d=Object.getOwnPropertySymbols(e);for(var a=0;a<c.length;a++){(isSymbol(c[a])?d:f).push(c[a])}return f.concat(d)};return c},'es6','es5');$jscomp.polyfill('Object.getOwnPropertyDescriptors',function(a){if(a){return a}var b=function(e){var d={};var c=Reflect.ownKeys(e);for(var b=0;b<c.length;b++){d[c[b]]=Object.getOwnPropertyDescriptor(e,c[b])}return d};return b},'es8','es5');$jscomp.polyfill('Object.setPrototypeOf',function(a){return a||$jscomp.setPrototypeOf},'es6','es5');$jscomp.polyfill('Object.values',function(a){if(a){return a}var b=function(b){var c=[];for(var d in b){if($jscomp.owns(b,d)){c.push(b[d])}}return c};return b},'es8','es3');$jscomp.polyfill('Reflect.apply',function(a){if(a){return a}var c=Function.prototype.apply;var b=function(e,d,b){return c.call(e,d,b)};return b},'es6','es3');$jscomp.objectCreate=$jscomp.ASSUME_ES5||typeof Object.create=='function'?Object.create:function(b){var a=function(){};a.prototype=b;return new a()};$jscomp.construct=function(){function reflectConstructWorks(){function Base(){}function Derived(){}new Base();Reflect.construct(Base,[],Derived);return new Base() instanceof Base}if(typeof Reflect!='undefined'&&Reflect.construct){if(reflectConstructWorks()){return Reflect.construct}var b=Reflect.construct;var a=function(e,d,a){var c=b(e,d);if(a){Reflect.setPrototypeOf(c,a.prototype)}return c};return a}function construct(b,d,a){if(a===undefined){a=b}var f=a.prototype||Object.prototype;var c=$jscomp.objectCreate(f);var e=Function.prototype.apply;var g=e.call(b,c,d);return g||c}return construct}();$jscomp.polyfill('Reflect.construct',function(a){return $jscomp.construct},'es6','es3');$jscomp.polyfill('Reflect.defineProperty',function(a){if(a){return a}var b=function(e,d,c){try{Object.defineProperty(e,d,c);var b=Object.getOwnPropertyDescriptor(e,d);if(!b){return !1}return b.configurable===(c.configurable||!1)&&b.enumerable===(c.enumerable||!1)&&('value' in b?b.value===c.value&&b.writable===(c.writable||!1):b.get===c.get&&b.set===c.set)}catch(f){return !1}};return b},'es6','es5');$jscomp.polyfill('Reflect.deleteProperty',function(a){if(a){return a}var b=function(c,b){if(!$jscomp.owns(c,b)){return !0}try{return delete c[b]}catch(d){return !1}};return b},'es6','es3');$jscomp.polyfill('Reflect.getOwnPropertyDescriptor',function(a){return a||Object.getOwnPropertyDescriptor},'es6','es5');$jscomp.polyfill('Reflect.getPrototypeOf',function(a){return a||Object.getPrototypeOf},'es6','es5');$jscomp.findDescriptor=function(d,c){var a=d;while(a){var b=Reflect.getOwnPropertyDescriptor(a,c);if(b){return b}a=Reflect.getPrototypeOf(a)}return undefined};$jscomp.polyfill('Reflect.get',function(a){if(a){return a}var b=function(d,c,e){if(arguments.length<=2){return d[c]}var b=$jscomp.findDescriptor(d,c);if(b){return b.get?b.get.call(e):b.value}return undefined};return b},'es6','es5');$jscomp.polyfill('Reflect.has',function(a){if(a){return a}var b=function(c,b){return b in c};return b},'es6','es3');$jscomp.polyfill('Reflect.isExtensible',function(a){if(a){return a}if($jscomp.ASSUME_ES5||typeof Object.isExtensible=='function'){return Object.isExtensible}return function(){return !0}},'es6','es3');$jscomp.polyfill('Reflect.preventExtensions',function(a){if(a){return a}if(!($jscomp.ASSUME_ES5||typeof Object.preventExtensions=='function')){return function(){return !1}}var b=function(b){Object.preventExtensions(b);return !Object.isExtensible(b)};return b},'es6','es3');$jscomp.polyfill('Reflect.set',function(a){if(a){return a}var b=function(b,d,e,f){var c=$jscomp.findDescriptor(b,d);if(!c){if(Reflect.isExtensible(b)){b[d]=e;return !0}return !1}if(c.set){c.set.call(arguments.length>3?f:b,e);return !0}else {if(c.writable&&!Object.isFrozen(b)){b[d]=e;return !0}}return !1};return b},'es6','es5');$jscomp.polyfill('Reflect.setPrototypeOf',function(a){if(a){return a}else {if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;var c=function(c,d){try{b(c,d);return !0}catch(e){return !1}};return c}else {return null}}},'es6','es5');$jscomp.polyfill('Set',function(b){function isConformant(){if($jscomp.ASSUME_NO_NATIVE_SET||!b||typeof b!='function'||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var d=Object.seal({x:4});var c=new b($jscomp.makeIterator([d]));if(!c.has(d)||c.size!=1||c.add(d)!=c||c.size!=1||c.add({x:4})!=c||c.size!=2){return !1}var e=c.entries();var a=e.next();if(a.done||a.value[0]!=d||a.value[1]!=d){return !1}a=e.next();if(a.done||a.value[0]==d||a.value[0].x!=4||a.value[1]!=a.value[0]){return !1}return e.next().done}catch(f){return !1}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE){return b}}else {if(isConformant()){return b}}$jscomp.initSymbol();$jscomp.initSymbolIterator();var a=function(a){this.map_=new Map();if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}this.size=this.map_.size};a.prototype.add=function(a){a=a===0?0:a;this.map_.set(a,a);this.size=this.map_.size;return this};a.prototype['delete']=function(c){var a=this.map_['delete'](c);this.size=this.map_.size;return a};a.prototype.clear=function(){this.map_.clear();this.size=0};a.prototype.has=function(a){return this.map_.has(a)};a.prototype.entries=function(){return this.map_.entries()};a.prototype.values=function(){return this.map_.values()};a.prototype.keys=a.prototype.values;a.prototype[Symbol.iterator]=a.prototype.values;a.prototype.forEach=function(c,a){var d=this;this.map_.forEach(function(e){return c.call(a,e,e,d)})};return a},'es6','es3');$jscomp.checkStringArgs=function(a,c,b){if(a==null){throw new TypeError("The 'this' value for String.prototype."+b+' must not be null or undefined')}if(c instanceof RegExp){throw new TypeError('First argument to String.prototype.'+b+' must not be a regular expression')}return a+''};$jscomp.polyfill('String.prototype.codePointAt',function(a){if(a){return a}var b=function(b){var e=$jscomp.checkStringArgs(this,null,'codePointAt');var f=e.length;b=Number(b)||0;if(!(b>=0&&b<f)){return void 0}b=b|0;var c=e.charCodeAt(b);if(c<55296||c>56319||b+1===f){return c}var d=e.charCodeAt(b+1);if(d<56320||d>57343){return c}return (c-55296)*1024+d+9216};return b},'es6','es3');$jscomp.polyfill('String.prototype.endsWith',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'endsWith');b=b+'';if(c===void 0){c=d.length}var f=Math.max(0,Math.min(c|0,d.length));var e=b.length;while(e>0&&f>0){if(d[--f]!=b[--e]){return !1}}return e<=0};return b},'es6','es3');$jscomp.polyfill('String.fromCodePoint',function(a){if(a){return a}var b=function(e){var c='';for(var d=0;d<arguments.length;d++){var b=Number(arguments[d]);if(b<0||b>1114111||b!==Math.floor(b)){throw new RangeError('invalid_code_point '+b)}if(b<=65535){c+=String.fromCharCode(b)}else {b-=65536;c+=String.fromCharCode(b>>>10&1023|55296);c+=String.fromCharCode(b&1023|56320)}}return c};return b},'es6','es3');$jscomp.polyfill('String.prototype.includes',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'includes');return d.indexOf(b,c||0)!==-1};return b},'es6','es3');$jscomp.polyfill('String.prototype.repeat',function(a){if(a){return a}var b=function(b){var c=$jscomp.checkStringArgs(this,null,'repeat');if(b<0||b>1342177279){throw new RangeError('Invalid count value')}b=b|0;var d='';while(b){if(b&1){d+=c}if(b>>>=1){c+=c}}return d};return b},'es6','es3');$jscomp.stringPadding=function(c,a){var b=c!==undefined?String(c):' ';if(!(a>0)||!b){return ''}var d=Math.ceil(a/b.length);return b.repeat(d).substring(0,a)};$jscomp.polyfill('String.prototype.padEnd',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return b+$jscomp.stringPadding(c,e)};return b},'es8','es3');$jscomp.polyfill('String.prototype.padStart',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return $jscomp.stringPadding(c,e)+b};return b},'es8','es3');$jscomp.polyfill('String.prototype.startsWith',function(a){if(a){return a}var b=function(b,g){var c=$jscomp.checkStringArgs(this,b,'startsWith');b=b+'';var h=c.length;var e=b.length;var f=Math.max(0,Math.min(g|0,c.length));var d=0;while(d<e&&f<h){if(c[f++]!=b[d++]){return !1}}return d>=e};return b},'es6','es3');$jscomp.arrayFromIterator=function(c){var b;var a=[];while(!(b=c.next()).done){a.push(b.value)}return a};$jscomp.arrayFromIterable=function(a){if(a instanceof Array){return a}else {return $jscomp.arrayFromIterator($jscomp.makeIterator(a))}};$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var e=$jscomp.setPrototypeOf;e(a,b)}else {for(var c in b){if(c=='prototype'){continue}if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);if(d){Object.defineProperty(a,c,d)}}else {a[c]=b[c]}}}a.superClass_=b.prototype};$jscomp.polyfill('WeakSet',function(a){function isConformant(){if(!a||!Object.seal){return !1}try{var c=Object.seal({});var d=Object.seal({});var b=new a([c]);if(!b.has(c)||b.has(d)){return !1}b['delete'](c);b.add(d);return !b.has(c)&&b.has(d)}catch(e){return !1}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE){return a}}else {if(isConformant()){return a}}var b=function(b){this.map_=new WeakMap();if(b){$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=$jscomp.makeIterator(b);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}};b.prototype.add=function(b){this.map_.set(b,!0);return this};b.prototype.has=function(b){return this.map_.has(b)};b.prototype['delete']=function(b){return this.map_['delete'](b)};return b},'es6','es3');try{if(Array.prototype.values.toString().indexOf('[native code]')==-1){delete Array.prototype.values}}catch(a){}function _eef17fc97b1d7ebc230b981a2b51d8bc42c31c3c(){}function _d0a673a9ad51993022cd7a9a5fd637fc46041e76(){}function _68afbba4361a2bfe9e715154ef4abbe3e24ec649(){}function _e04b48d379d8a13795a7ba203eb17656a68b2a22(){}function _c09c815fc9d7609d499f56fa190cc3a0234b2388(){}function _4c1ea8d759da969f872dee2d56bb4384f3fee077(){}function _218191142d1a1c9458c95734d9dfdb883f7c4941(){}function _a1da0ded5cbfbec099772b0039d0d6b9cf8c0f1b(){}function _86dea4adb7af01df0c7261d26252e6c5d6896b82(){}(function(f,c,a,b){var h=function(){};var A=function(){if('console' in f){return function(d){f.console.log('Processing.js: '+d)}}return h}();var r=function(e){var d=new XMLHttpRequest();d.open('GET',e,!1);if(d.overrideMimeType){d.overrideMimeType('text/plain')}d.setRequestHeader('If-Modified-Since','Fri, 01 Jan 1960 00:00:00 GMT');d.send(null);if(d.status!==200&&d.status!==0){throw 'XMLHttpRequest failed, status code '+d.status}return d.responseText};var q='document' in this&&!('fake' in this.document);c.head=c.head||c.getElementsByTagName('head')[0];function setupTypedArray(e,d){if(e in f){return f[e]}if(typeof f[d]==='function'){return f[d]}return function(g){if(g instanceof Array){return g}if(typeof g==='number'){var h=[];h.length=g;return h}}}if(c.documentMode>=9&&!c.doctype){throw 'The doctype directive is missing. The recommended doctype in Internet Explorer is the HTML5 doctype: <!DOCTYPE html>'}var e=setupTypedArray('Float32Array','WebGLFloatArray'),x=setupTypedArray('Int32Array','WebGLIntArray'),u=setupTypedArray('Uint16Array','WebGLUnsignedShortArray'),s=setupTypedArray('Uint8Array','WebGLUnsignedByteArray');var l={X:0,Y:1,Z:2,R:3,G:4,B:5,A:6,U:7,V:8,NX:9,NY:10,NZ:11,EDGE:12,SR:13,SG:14,SB:15,SA:16,SW:17,TX:18,TY:19,TZ:20,VX:21,VY:22,VZ:23,VW:24,AR:25,AG:26,AB:27,DR:3,DG:4,DB:5,DA:6,SPR:28,SPG:29,SPB:30,SHINE:31,ER:32,EG:33,EB:34,BEEN_LIT:35,VERTEX_FIELD_COUNT:36,P2D:1,JAVA2D:1,WEBGL:2,P3D:2,OPENGL:2,PDF:0,DXF:0,OTHER:0,WINDOWS:1,MAXOSX:2,LINUX:3,EPSILON:1.0E-4,MAX_FLOAT:3.4028235E38,MIN_FLOAT:-3.4028235E38,MAX_INT:2147483647,MIN_INT:-2.147483648E9,PI:a.PI,TWO_PI:2*a.PI,HALF_PI:a.PI/2,THIRD_PI:a.PI/3,QUARTER_PI:a.PI/4,DEG_TO_RAD:a.PI/180,RAD_TO_DEG:180/a.PI,WHITESPACE:' \t\n\r\f\xa0',RGB:1,ARGB:2,HSB:3,ALPHA:4,CMYK:5,TIFF:0,TARGA:1,JPEG:2,GIF:3,BLUR:11,GRAY:12,INVERT:13,OPAQUE:14,POSTERIZE:15,THRESHOLD:16,ERODE:17,DILATE:18,REPLACE:0,BLEND:1<<0,ADD:1<<1,SUBTRACT:1<<2,LIGHTEST:1<<3,DARKEST:1<<4,DIFFERENCE:1<<5,EXCLUSION:1<<6,MULTIPLY:1<<7,SCREEN:1<<8,OVERLAY:1<<9,HARD_LIGHT:1<<10,SOFT_LIGHT:1<<11,DODGE:1<<12,BURN:1<<13,ALPHA_MASK:4.27819008E9,RED_MASK:16711680,GREEN_MASK:65280,BLUE_MASK:255,CUSTOM:0,ORTHOGRAPHIC:2,PERSPECTIVE:3,POINT:2,POINTS:2,LINE:4,LINES:4,TRIANGLE:8,TRIANGLES:9,TRIANGLE_STRIP:10,TRIANGLE_FAN:11,QUAD:16,QUADS:16,QUAD_STRIP:17,POLYGON:20,PATH:21,RECT:30,ELLIPSE:31,ARC:32,SPHERE:40,BOX:41,GROUP:0,PRIMITIVE:1,GEOMETRY:3,VERTEX:0,BEZIER_VERTEX:1,CURVE_VERTEX:2,BREAK:3,CLOSESHAPE:4,OPEN:1,CLOSE:2,CORNER:0,CORNERS:1,RADIUS:2,CENTER_RADIUS:2,CENTER:3,DIAMETER:3,CENTER_DIAMETER:3,BASELINE:0,TOP:101,BOTTOM:102,NORMAL:1,NORMALIZED:1,IMAGE:2,MODEL:4,SHAPE:5,SQUARE:'butt',ROUND:'round',PROJECT:'square',MITER:'miter',BEVEL:'bevel',AMBIENT:0,DIRECTIONAL:1,SPOT:3,BACKSPACE:8,TAB:9,ENTER:10,RETURN:13,ESC:27,DELETE:127,CODED:65535,SHIFT:16,CONTROL:17,ALT:18,CAPSLK:20,PGUP:33,PGDN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLK:144,META:157,INSERT:155,ARROW:'default',CROSS:'crosshair',HAND:'pointer',MOVE:'move',TEXT:'text',WAIT:'wait',NOCURSOR:"url('data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=='), auto",DISABLE_OPENGL_2X_SMOOTH:1,ENABLE_OPENGL_2X_SMOOTH:-1,ENABLE_OPENGL_4X_SMOOTH:2,ENABLE_NATIVE_FONTS:3,DISABLE_DEPTH_TEST:4,ENABLE_DEPTH_TEST:-4,ENABLE_DEPTH_SORT:5,DISABLE_DEPTH_SORT:-5,DISABLE_OPENGL_ERROR_REPORT:6,ENABLE_OPENGL_ERROR_REPORT:-6,ENABLE_ACCURATE_TEXTURES:7,DISABLE_ACCURATE_TEXTURES:-7,HINT_COUNT:10,SINCOS_LENGTH:720,PRECISIONB:15,PRECISIONF:1<<15,PREC_MAXVAL:(1<<15)-1,PREC_ALPHA_SHIFT:24-15,PREC_RED_SHIFT:16-15,NORMAL_MODE_AUTO:0,NORMAL_MODE_SHAPE:1,NORMAL_MODE_VERTEX:2,MAX_LIGHTS:8};function virtHashCode(d){if(typeof d==='string'){var e=0;for(var g=0;g<d.length;++g){e=e*31+d.charCodeAt(g)&4.294967295E9}return e}if(typeof d!=='object'){return d&4.294967295E9}if(d.hashCode instanceof Function){return d.hashCode()}if(d.$id===b){d.$id=a.floor(a.random()*65536)-32768<<16|a.floor(a.random()*65536)}return d.$id}function virtEquals(d,e){if(d===null||e===null){return d===null&&e===null}if(typeof d==='string'){return d===e}if(typeof d!=='object'){return d===e}if(d.equals instanceof Function){return d.equals(e)}return d===e}var p=function(d){if(d.iterator instanceof Function){return d.iterator()}if(d instanceof Array){var e=-1;this.hasNext=function(){return ++e<d.length};this.next=function(){return d[e]}}else {throw 'Unable to iterate: '+d}};var y=function(){function Iterator(d){var e=0;this.hasNext=function(){return e<d.length};this.next=function(){return d[e++]};this.remove=function(){d.splice(e,1)}}function ArrayList(e){var d;if(e instanceof ArrayList){d=e.toArray()}else {d=[];if(typeof e==='number'){d.length=e>0?e:0}}this.get=function(g){return d[g]};this.contains=function(d){return this.indexOf(d)>-1};this.indexOf=function(h){for(var g=0,i=d.length;g<i;++g){if(virtEquals(h,d[g])){return g}}return -1};this.lastIndexOf=function(h){for(var g=d.length-1;g>=0;--g){if(virtEquals(h,d[g])){return g}}return -1};this.add=function(){if(arguments.length===1){d.push(arguments[0])}else {if(arguments.length===2){var g=arguments[0];if(typeof g==='number'){if(g>=0&&g<=d.length){d.splice(g,0,arguments[1])}else {throw g+' is not a valid index'}}else {throw typeof g+' is not a number'}}else {throw 'Please use the proper number of parameters.'}}};this.addAll=function(g,i){var h;if(typeof g==='number'){if(g<0||g>d.length){throw 'Index out of bounds for addAll: '+g+' greater or equal than '+d.length}h=new p(i);while(h.hasNext()){d.splice(g++,0,h.next())}}else {h=new p(g);while(h.hasNext()){d.push(h.next())}}};this.set=function(){if(arguments.length===2){var g=arguments[0];if(typeof g==='number'){if(g>=0&&g<d.length){d.splice(g,1,arguments[1])}else {throw g+' is not a valid index.'}}else {throw typeof g+' is not a number'}}else {throw 'Please use the proper number of parameters.'}};this.size=function(){return d.length};this.clear=function(){d.length=0};this.remove=function(g){if(typeof g==='number'){return d.splice(g,1)[0]}g=this.indexOf(g);if(g>-1){d.splice(g,1);return !0}return !1};this.removeAll=function(j){var g,i,h,d=new ArrayList();d.addAll(this);this.clear();for(g=0,i=0;g<d.size();g++){h=d.get(g);if(!j.contains(h)){this.add(i++,h)}}if(this.size()<d.size()){return !0}return !1};this.isEmpty=function(){return !d.length};this.clone=function(){return new ArrayList(this)};this.toArray=function(){return d.slice(0)};this.iterator=function(){return new Iterator(d)}}return ArrayList}();var z=function(){function HashMap(){if(arguments.length===1&&arguments[0] instanceof HashMap){return arguments[0].clone()}var h=arguments.length>0?arguments[0]:16;var i=arguments.length>1?arguments[1]:0.75;var d=[];d.length=h;var g=0;var e=this;function getBucketIndex(g){var e=virtHashCode(g)%d.length;return e<0?d.length+e:e}function ensureLoad(){if(g<=i*d.length){return}var e=[];for(var h=0;h<d.length;++h){if(d[h]!==b){e=e.concat(d[h])}}var m=d.length*2;d=[];d.length=m;for(var j=0;j<e.length;++j){var l=getBucketIndex(e[j].key);var k=d[l];if(k===b){d[l]=k=[]}k.push(e[j])}}function Iterator(j,k){var e=0;var g=-1;var i=!1;var h;function findNext(){while(!i){++g;if(e>=d.length){i=!0}else {if(d[e]===b||g>=d[e].length){g=-1;++e}else {return}}}}this.hasNext=function(){return !i};this.next=function(){h=j(d[e][g]);findNext();return h};this.remove=function(){if(h!==b){k(h);--g;findNext()}};findNext()}function Set(g,h,d){this.clear=function(){e.clear()};this.contains=function(e){return h(e)};this.containsAll=function(i){var e=i.iterator();while(e.hasNext()){if(!this.contains(e.next())){return !1}}return !0};this.isEmpty=function(){return e.isEmpty()};this.iterator=function(){return new Iterator(g,d)};this.remove=function(e){if(this.contains(e)){d(e);return !0}return !1};this.removeAll=function(k){var i=k.iterator();var j=!1;while(i.hasNext()){var e=i.next();if(this.contains(e)){d(e);j=!0}}return !0};this.retainAll=function(l){var k=this.iterator();var e=[];while(k.hasNext()){var j=k.next();if(!l.contains(j)){e.push(j)}}for(var i=0;i<e.length;++i){d(e[i])}return e.length>0};this.size=function(){return e.size()};this.toArray=function(){var e=[];var i=this.iterator();while(i.hasNext()){e.push(i.next())}return e}}function Entry(d){this._isIn=function(g){return g===e&&d.removed===b};this.equals=function(e){return virtEquals(d.key,e.getKey())};this.getKey=function(){return d.key};this.getValue=function(){return d.value};this.hashCode=function(e){return virtHashCode(d.key)};this.setValue=function(e){var g=d.value;d.value=e;return g}}this.clear=function(){g=0;d=[];d.length=h};this.clone=function(){var d=new HashMap();d.putAll(this);return d};this.containsKey=function(h){var i=getBucketIndex(h);var e=d[i];if(e===b){return !1}for(var g=0;g<e.length;++g){if(virtEquals(e[g].key,h)){return !0}}return !1};this.containsValue=function(i){for(var g=0;g<d.length;++g){var e=d[g];if(e===b){continue}for(var h=0;h<e.length;++h){if(virtEquals(e[h].value,i)){return !0}}}return !1};this.entrySet=function(){return new Set(function(d){return new Entry(d)},function(d){return d instanceof Entry&&d._isIn(e)},function(d){return e.remove(d.getKey())})};this.get=function(h){var i=getBucketIndex(h);var e=d[i];if(e===b){return null}for(var g=0;g<e.length;++g){if(virtEquals(e[g].key,h)){return e[g].value}}return null};this.isEmpty=function(){return g===0};this.keySet=function(){return new Set(function(d){return d.key},function(d){return e.containsKey(d)},function(d){return e.remove(d)})};this.values=function(){return new Set(function(d){return d.value},function(d){return e.containsValue(d)},function(d){return e.removeByValue(d)})};this.put=function(i,j){var k=getBucketIndex(i);var e=d[k];if(e===b){++g;d[k]=[{key:i,value:j}];ensureLoad();return null}for(var h=0;h<e.length;++h){if(virtEquals(e[h].key,i)){var l=e[h].value;e[h].value=j;return l}}++g;e.push({key:i,value:j});ensureLoad();return null};this.putAll=function(g){var e=g.entrySet().iterator();while(e.hasNext()){var d=e.next();this.put(d.getKey(),d.getValue())}};this.remove=function(j){var i=getBucketIndex(j);var e=d[i];if(e===b){return null}for(var h=0;h<e.length;++h){if(virtEquals(e[h].key,j)){--g;var k=e[h].value;e[h].removed=!0;if(e.length>1){e.splice(h,1)}else {d[i]=b}return k}}return null};this.removeByValue=function(j){var e,g,h,i;for(e in d){if(d.hasOwnProperty(e)){for(g=0,h=d[e].length;g<h;g++){i=d[e][g];if(i.value===j){d[e].splice(g,1);return !0}}}}return !1};this.size=function(){return g}}return HashMap}();var i=function(){function PVector(d,e,g){this.x=d||0;this.y=e||0;this.z=g||0}PVector.dist=function(d,e){return d.dist(e)};PVector.dot=function(d,e){return d.dot(e)};PVector.cross=function(d,e){return d.cross(e)};PVector.angleBetween=function(d,e){return a.acos(d.dot(e)/(d.mag()*e.mag()))};PVector.prototype={set:function(d,e,g){if(arguments.length===1){this.set(d.x||d[0]||0,d.y||d[1]||0,d.z||d[2]||0)}else {this.x=d;this.y=e;this.z=g}},get:function(){return new PVector(this.x,this.y,this.z)},mag:function(){var d=this.x,e=this.y,g=this.z;return a.sqrt(d*d+e*e+g*g)},add:function(d,e,g){if(arguments.length===1){this.x+=d.x;this.y+=d.y;this.z+=d.z}else {this.x+=d;this.y+=e;this.z+=g}},sub:function(d,e,g){if(arguments.length===1){this.x-=d.x;this.y-=d.y;this.z-=d.z}else {this.x-=d;this.y-=e;this.z-=g}},mult:function(d){if(typeof d==='number'){this.x*=d;this.y*=d;this.z*=d}else {this.x*=d.x;this.y*=d.y;this.z*=d.z}},div:function(d){if(typeof d==='number'){this.x/=d;this.y/=d;this.z/=d}else {this.x/=d.x;this.y/=d.y;this.z/=d.z}},dist:function(d){var e=this.x-d.x,g=this.y-d.y,h=this.z-d.z;return a.sqrt(e*e+g*g+h*h)},dot:function(d,e,g){if(arguments.length===1){return this.x*d.x+this.y*d.y+this.z*d.z}return this.x*d+this.y*e+this.z*g},cross:function(d){var e=this.x,g=this.y,h=this.z;return new PVector(g*d.z-d.y*h,h*d.x-d.z*e,e*d.y-d.x*g)},normalize:function(){var d=this.mag();if(d>0){this.div(d)}},limit:function(d){if(this.mag()>d){this.normalize();this.mult(d)}},heading2D:function(){return -a.atan2(-this.y,this.x)},toString:function(){return '['+this.x+', '+this.y+', '+this.z+']'},array:function(){return [this.x,this.y,this.z]}};function createPVectorMethod(d){return function(g,h){var e=g.get();e[d](h);return e}}for(var d in PVector.prototype){if(PVector.prototype.hasOwnProperty(d)&&!PVector.hasOwnProperty(d)){PVector[d]=createPVectorMethod(d)}}return PVector}();function DefaultScope(){}DefaultScope.prototype=l;var g=new DefaultScope();g.ArrayList=y;g.HashMap=z;g.PVector=i;g.ObjectIterator=p;g.PConstants=l;g.defineProperty=function(g,e,d){if('defineProperty' in Object){Object.defineProperty(g,e,d)}else {if(d.hasOwnProperty('get')){g.__defineGetter__(e,d.get)}if(d.hasOwnProperty('set')){g.__defineSetter__(e,d.set)}}};function overloadBaseClassFunction(j,i,d){if(!j.hasOwnProperty(i)||typeof j[i]!=='function'){j[i]=d;return}var g=j[i];if('$overloads' in g){g.$defaultOverload=d;return}if(!('$overloads' in d)&&g.length===d.length){return}var h,k;if('$overloads' in d){h=d.$overloads.slice(0);h[g.length]=g;k=d.$defaultOverload}else {h=[];h[d.length]=d;h[g.length]=g;k=g}var e=function(){var g=e.$overloads[arguments.length]||('$methodArgsIndex' in e&&arguments.length>e.$methodArgsIndex?e.$overloads[e.$methodArgsIndex]:null)||e.$defaultOverload;return g.apply(this,arguments)};e.$overloads=h;if('$methodArgsIndex' in d){e.$methodArgsIndex=d.$methodArgsIndex}e.$defaultOverload=k;e.name=i;j[i]=e}function extendClass(h,e){function extendGetterSetter(d){g.defineProperty(h,d,{get:function(){return e[d]},set:function(g){e[d]=g},enumerable:!0})}var i=[];for(var d in e){if(typeof e[d]==='function'){overloadBaseClassFunction(h,d,e[d])}else {if(d.charAt(0)!=='$'&&!(d in h)){i.push(d)}}}while(i.length>0){extendGetterSetter(i.shift())}h.$super=e}g.extendClassChain=function(e){var g=[e];for(var d=e.$upcast;d;d=d.$upcast){extendClass(d,e);g.push(d);e=d}while(g.length>0){g.pop().$self=e}};g.extendStaticMembers=function(d,e){extendClass(d,e)};g.extendInterfaceMembers=function(d,e){extendClass(d,e)};g.addMethod=function(j,h,g,l){var e=j[h];if(e||l){var k=g.length;if('$overloads' in e){e.$overloads[k]=g}else {var d=function(){var e=d.$overloads[arguments.length]||('$methodArgsIndex' in d&&arguments.length>d.$methodArgsIndex?d.$overloads[d.$methodArgsIndex]:null)||d.$defaultOverload;return e.apply(this,arguments)};var i=[];if(e){i[e.length]=e}i[k]=g;d.$overloads=i;d.$defaultOverload=e||g;if(l){d.$methodArgsIndex=k}d.name=h;j[h]=d}}else {j[h]=g}};function isNumericalJavaType(d){if(typeof d!=='string'){return !1}return ['byte','int','char','color','float','long','double'].indexOf(d)!==-1}g.createJavaArray=function(h,e){var d=null,i=null;if(typeof h==='string'){if(h==='boolean'){i=!1}else {if(isNumericalJavaType(h)){i=0}}}if(typeof e[0]==='number'){var j=0|e[0];if(e.length<=1){d=[];d.length=j;for(var k=0;k<j;++k){d[k]=i}}else {d=[];var m=e.slice(1);for(var l=0;l<j;++l){d.push(g.createJavaArray(h,m))}}}return d};var m={aliceblue:'#f0f8ff',antiquewhite:'#faebd7',aqua:'#00ffff',aquamarine:'#7fffd4',azure:'#f0ffff',beige:'#f5f5dc',bisque:'#ffe4c4',black:'#000000',blanchedalmond:'#ffebcd',blue:'#0000ff',blueviolet:'#8a2be2',brown:'#a52a2a',burlywood:'#deb887',cadetblue:'#5f9ea0',chartreuse:'#7fff00',chocolate:'#d2691e',coral:'#ff7f50',cornflowerblue:'#6495ed',cornsilk:'#fff8dc',crimson:'#dc143c',cyan:'#00ffff',darkblue:'#00008b',darkcyan:'#008b8b',darkgoldenrod:'#b8860b',darkgray:'#a9a9a9',darkgreen:'#006400',darkkhaki:'#bdb76b',darkmagenta:'#8b008b',darkolivegreen:'#556b2f',darkorange:'#ff8c00',darkorchid:'#9932cc',darkred:'#8b0000',darksalmon:'#e9967a',darkseagreen:'#8fbc8f',darkslateblue:'#483d8b',darkslategray:'#2f4f4f',darkturquoise:'#00ced1',darkviolet:'#9400d3',deeppink:'#ff1493',deepskyblue:'#00bfff',dimgray:'#696969',dodgerblue:'#1e90ff',firebrick:'#b22222',floralwhite:'#fffaf0',forestgreen:'#228b22',fuchsia:'#ff00ff',gainsboro:'#dcdcdc',ghostwhite:'#f8f8ff',gold:'#ffd700',goldenrod:'#daa520',gray:'#808080',green:'#008000',greenyellow:'#adff2f',honeydew:'#f0fff0',hotpink:'#ff69b4',indianred:'#cd5c5c',indigo:'#4b0082',ivory:'#fffff0',khaki:'#f0e68c',lavender:'#e6e6fa',lavenderblush:'#fff0f5',lawngreen:'#7cfc00',lemonchiffon:'#fffacd',lightblue:'#add8e6',lightcoral:'#f08080',lightcyan:'#e0ffff',lightgoldenrodyellow:'#fafad2',lightgrey:'#d3d3d3',lightgreen:'#90ee90',lightpink:'#ffb6c1',lightsalmon:'#ffa07a',lightseagreen:'#20b2aa',lightskyblue:'#87cefa',lightslategray:'#778899',lightsteelblue:'#b0c4de',lightyellow:'#ffffe0',lime:'#00ff00',limegreen:'#32cd32',linen:'#faf0e6',magenta:'#ff00ff',maroon:'#800000',mediumaquamarine:'#66cdaa',mediumblue:'#0000cd',mediumorchid:'#ba55d3',mediumpurple:'#9370d8',mediumseagreen:'#3cb371',mediumslateblue:'#7b68ee',mediumspringgreen:'#00fa9a',mediumturquoise:'#48d1cc',mediumvioletred:'#c71585',midnightblue:'#191970',mintcream:'#f5fffa',mistyrose:'#ffe4e1',moccasin:'#ffe4b5',navajowhite:'#ffdead',navy:'#000080',oldlace:'#fdf5e6',olive:'#808000',olivedrab:'#6b8e23',orange:'#ffa500',orangered:'#ff4500',orchid:'#da70d6',palegoldenrod:'#eee8aa',palegreen:'#98fb98',paleturquoise:'#afeeee',palevioletred:'#d87093',papayawhip:'#ffefd5',peachpuff:'#ffdab9',peru:'#cd853f',pink:'#ffc0cb',plum:'#dda0dd',powderblue:'#b0e0e6',purple:'#800080',red:'#ff0000',rosybrown:'#bc8f8f',royalblue:'#4169e1',saddlebrown:'#8b4513',salmon:'#fa8072',sandybrown:'#f4a460',seagreen:'#2e8b57',seashell:'#fff5ee',sienna:'#a0522d',silver:'#c0c0c0',skyblue:'#87ceeb',slateblue:'#6a5acd',slategray:'#708090',snow:'#fffafa',springgreen:'#00ff7f',steelblue:'#4682b4',tan:'#d2b48c',teal:'#008080',thistle:'#d8bfd8',tomato:'#ff6347',turquoise:'#40e0d0',violet:'#ee82ee',wheat:'#f5deb3',white:'#ffffff',whitesmoke:'#f5f5f5',yellow:'#ffff00',yellowgreen:'#9acd32'};(function(i){var e=('open() createOutput() createInput() BufferedReader selectFolder() '+'dataPath() createWriter() selectOutput() beginRecord() '+'saveStream() endRecord() selectInput() saveBytes() createReader() '+'beginRaw() endRaw() PrintWriter delay()').split(' '),h=e.length,d,g;function createUnsupportedFunc(d){return function(){throw 'Processing.js does not support '+d+'.'}}while(h--){d=e[h];g=d.replace('()','');i[g]=createUnsupportedFunc(d)}})(g);g.defineProperty(g,'screenWidth',{get:function(){return f.innerWidth}});g.defineProperty(g,'screenHeight',{get:function(){return f.innerHeight}});g.defineProperty(g,'online',{get:function(){return !0}});var j=[];var k={};var t=function(d){j.splice(k[d],1);delete k[d]};var v=function(d){if(d.externals.canvas.id===b||!d.externals.canvas.id.length){d.externals.canvas.id='__processing'+j.length}k[d.externals.canvas.id]=j.length;j.push(d)};function computeFontMetrics(g){var k=250,n=g.size/k,i=c.createElement('canvas');i.width=2*k;i.height=2*k;i.style.opacity=0;var s=g.getCSSDefinition(k+'px','normal'),d=i.getContext('2d');d.font=s;var m='dbflkhyjqpg';i.width=d.measureText(m).width;d.font=s;var e=c.createElement('div');e.style.position='absolute';e.style.opacity=0;e.style.fontFamily='"'+g.name+'"';e.style.fontSize=k+'px';e.innerHTML=m+'<br/>'+m;c.body.appendChild(e);var r=i.width,q=i.height,p=q/2;d.fillStyle='white';d.fillRect(0,0,r,q);d.fillStyle='black';d.fillText(m,0,p);var o=d.getImageData(0,0,r,q).data;var j=0,u=r*4,t=o.length;while(++j<t&&o[j]===255){h()}var w=a.round(j/u);j=t-1;while(--j>0&&o[j]===255){h()}var v=a.round(j/u);g.ascent=n*(p-w);g.descent=n*(v-p);if(c.defaultView.getComputedStyle){var l=c.defaultView.getComputedStyle(e,null).getPropertyValue('height');l=n*l.replace('px','');if(l>=g.size*2){g.leading=a.round(l/2)}}c.body.removeChild(e);if(g.caching){return d}}function PFont(d,e){if(d===b){d=''}this.name=d;if(e===b){e=0}this.size=e;this.glyph=!1;this.ascent=0;this.descent=0;this.leading=1.2*e;var g=d.indexOf(' Italic Bold');if(g!==-1){d=d.substring(0,g)}this.style='normal';var h=d.indexOf(' Italic');if(h!==-1){d=d.substring(0,h);this.style='italic'}this.weight='normal';var i=d.indexOf(' Bold');if(i!==-1){d=d.substring(0,i);this.weight='bold'}this.family='sans-serif';if(d!==b){switch(d){case 'sans-serif':case 'serif':case 'monospace':case 'fantasy':case 'cursive':this.family=d;break;default:this.family='"'+d+'", sans-serif';break;}}this.context2d=computeFontMetrics(this);this.css=this.getCSSDefinition();if(this.context2d){this.context2d.font=this.css}}PFont.prototype.caching=!0;PFont.prototype.getCSSDefinition=function(e,d){if(e===b){e=this.size+'px'}if(d===b){d=this.leading+'px'}var g=[this.style,'normal',this.weight,e+'/'+d,this.family];return g.join(' ')};PFont.prototype.measureTextWidth=function(d){return this.context2d.measureText(d).width};PFont.prototype.measureTextWidthFallback=function(g){var e=c.createElement('canvas'),d=e.getContext('2d');d.font=this.css;return d.measureText(g).width};PFont.PFontCache={length:0};PFont.get=function(g,e){e=(e*10+0.5|0)/10;var d=PFont.PFontCache,i=g+'/'+e;if(!d[i]){d[i]=new PFont(g,e);d.length++;if(d.length===50){PFont.prototype.measureTextWidth=PFont.prototype.measureTextWidthFallback;PFont.prototype.caching=!1;var h;for(h in d){if(h!=='length'){d[h].context2d=null}}return new PFont(g,e)}if(d.length===400){PFont.PFontCache={};PFont.get=PFont.getFallback;return new PFont(g,e)}}return d[i]};PFont.getFallback=function(d,e){return new PFont(d,e)};PFont.list=function(){return ['sans-serif','serif','monospace','fantasy','cursive']};PFont.preloading={template:{},initialized:!1,initialize:function(){var g=function(){var d='#E3KAI2wAgT1MvMg7Eo3VmNtYX7ABi3CxnbHlm'+'7Abw3kaGVhZ7ACs3OGhoZWE7A53CRobXR47AY3'+'AGbG9jYQ7G03Bm1heH7ABC3CBuYW1l7Ae3AgcG'+'9zd7AI3AE#B3AQ2kgTY18PPPUACwAg3ALSRoo3'+'#yld0xg32QAB77#E777773B#E3C#I#Q77773E#'+'Q7777777772CMAIw7AB77732B#M#Q3wAB#g3B#'+'E#E2BB//82BB////w#B7#gAEg3E77x2B32B#E#'+'Q#MTcBAQ32gAe#M#QQJ#E32M#QQJ#I#g32Q77#';var e=function(d){return 'AAAAAAAA'.substr(~~d?7-d:6)};return d.replace(/[#237]/g,e)};var e=c.createElement('style');e.setAttribute('type','text/css');e.innerHTML='@font-face {\n'+'  font-family: "PjsEmptyFont";'+'\n'+"  src: url('data:application/x-font-ttf;base64,"+g()+"')\n"+"       format('truetype');\n"+'}';c.head.appendChild(e);var d=c.createElement('span');d.style.cssText='position: absolute; top: 0; left: 0; opacity: 0; font-family: "PjsEmptyFont", fantasy;';d.innerHTML='AAAAAAAA';c.body.appendChild(d);this.template=d;this.initialized=!0},getElementWidth:function(d){return c.defaultView.getComputedStyle(d,'').getPropertyValue('width')},timeAttempted:0,pending:function(i){if(!this.initialized){this.initialize()}var e,g,h=this.getElementWidth(this.template);for(var d=0;d<this.fontList.length;d++){e=this.fontList[d];g=this.getElementWidth(e);if(this.timeAttempted<4000&&g===h){this.timeAttempted+=i;return !0}else {c.body.removeChild(e);this.fontList.splice(d--,1);this.timeAttempted=0}}if(this.fontList.length===0){return !1}return !0},fontList:[],addedList:{},add:function(d){if(!this.initialized){this.initialize()}var g=typeof d==='object'?d.fontFace:d,i=typeof d==='object'?d.url:d;if(this.addedList[g]){return}var h=c.createElement('style');h.setAttribute('type','text/css');h.innerHTML="@font-face{\n  font-family: '"+g+"';\n  src:  url('"+i+"');\n}\n";c.head.appendChild(h);this.addedList[g]=!0;var e=c.createElement('span');e.style.cssText='position: absolute; top: 0; left: 0; opacity: 0;';e.style.fontFamily='"'+g+'", "PjsEmptyFont", fantasy';e.innerHTML='AAAAAAAA';c.body.appendChild(e);this.fontList.push(e)}};g.PFont=PFont;var d=this.Processing=function(bh,aH){if(!(this instanceof d)){throw "called Processing constructor as if it were a function: missing 'new'."}var p,b$=bh===b&&aH===b;if(b$){p=c.createElement('canvas')}else {p=typeof bh==='string'?c.getElementById(bh):bh}if(!(p instanceof HTMLCanvasElement)){throw 'called Processing constructor without passing canvas element reference or id.'}function unimplemented(e){d.debug('Unimplemented - '+e)}var j=this;j.externals={canvas:p,context:b,sketch:b};j.name='Processing.js Instance';j.use3DContext=!1;j.focused=!1;j.breakShape=!1;j.glyphTable={};j.pmouseX=0;j.pmouseY=0;j.mouseX=0;j.mouseY=0;j.mouseButton=0;j.mouseScroll=0;j.mouseClicked=b;j.mouseDragged=b;j.mouseMoved=b;j.mousePressed=b;j.mouseReleased=b;j.mouseScrolled=b;j.mouseOver=b;j.mouseOut=b;j.touchStart=b;j.touchEnd=b;j.touchMove=b;j.touchCancel=b;j.key=b;j.keyCode=b;j.keyPressed=h;j.keyReleased=h;j.keyTyped=h;j.draw=b;j.setup=b;j.__mousePressed=!1;j.__keyPressed=!1;j.__frameRate=60;j.frameCount=0;j.width=100;j.height=100;var k,K,M,cJ=!0,H=!0,Z=[1,1,1,1],au=4.294967295E9,aw=!0,D=!0,V=[0,0,0,1],at=4.27819008E9,a6=!0,O=1,a9=!1,av=!1,aG=!0,bi=0,ac=0,U=3,bG=0,bH=0,bI=0,bb=0,bs=60,bY=1000/bs,be='default',cz=p.style.cursor,J=20,cE=0,cv=[],bt=0,bD=20,b2=!1,aC=-3355444,bz=20,N=255,W=255,ad=255,X=255,cI=!1,cF=!1,a3=0,a4=0,aq=1,az=null,bB=null,cH=!1,cg=Date.now(),bn=cg,a1=0,_,aV,a0,aN,aL,bk,bl,ab={attributes:{},locations:{}},o,A,P,bA,bq,bm,bc,bp,aX,bx,b6,bo,bL,ba,b4,ce,cc,aR={width:0,height:0},bW=2,T=!1,by,br,bv,aA=37,an=0,bg=4,aQ='Arial',ai=12,ao=9,ag=2,$=14,I=PFont.get(aQ,ai),bS,bu=null,aU=!1,bT,bR=1000,aB=[],aK=null,cy=[16,17,18,20,33,34,35,36,37,38,39,40,144,155,112,113,114,115,116,117,118,119,120,121,122,123,157];var bN,bV,bU,bX;if(c.defaultView&&c.defaultView.getComputedStyle){bN=parseInt(c.defaultView.getComputedStyle(p,null)['paddingLeft'],10)||0;bV=parseInt(c.defaultView.getComputedStyle(p,null)['paddingTop'],10)||0;bU=parseInt(c.defaultView.getComputedStyle(p,null)['borderLeftWidth'],10)||0;bX=parseInt(c.defaultView.getComputedStyle(p,null)['borderTopWidth'],10)||0}var C=0;var a7=0,aD=0,ak=[],al=[],am=[],a$=new e(720),aZ=new e(720),E,cG;var aI,aj,B,L,aO,aJ,aY,ae,a2=!1,b3=!1,bd=60*(a.PI/180),bE=j.width/2,aE=j.height/2,aF=aE/a.tan(bd/2),b5=aF/10,b8=aF*10,b1=j.width/j.height;var n=[],S=[],Q=0,aT=!1,aS=!1,ay=!0;var aW=0;var b7=[];var ca=new e([0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,0.5]);var bO=new e([0.5,0.5,0.5,0.5,-0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5]);var cC=new e([0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]);var bC=new e([0,0,0,0,1,0,1,1,0,1,0,0]);var cA=new e([0,0,1,0,0,1,0,0,1,0,0,1]);var ci='varying vec4 vFrontColor;'+'attribute vec3 aVertex;'+'attribute vec4 aColor;'+'uniform mat4 uView;'+'uniform mat4 uProjection;'+'uniform float uPointSize;'+'void main(void) {'+'  vFrontColor = aColor;'+'  gl_PointSize = uPointSize;'+'  gl_Position = uProjection * uView * vec4(aVertex, 1.0);'+'}';var ch='#ifdef GL_ES\n'+'precision highp float;\n'+'#endif\n'+'varying vec4 vFrontColor;'+'uniform bool uSmooth;'+'void main(void){'+'  if(uSmooth == true){'+'    float dist = distance(gl_PointCoord, vec2(0.5));'+'    if(dist > 0.5){'+'      discard;'+'    }'+'  }'+'  gl_FragColor = vFrontColor;'+'}';var cn='varying vec4 vFrontColor;'+'attribute vec3 aVertex;'+'attribute vec2 aTextureCoord;'+'uniform vec4 uColor;'+'uniform mat4 uModel;'+'uniform mat4 uView;'+'uniform mat4 uProjection;'+'uniform float uPointSize;'+'varying vec2 vTextureCoord;'+'void main(void) {'+'  gl_PointSize = uPointSize;'+'  vFrontColor = uColor;'+'  gl_Position = uProjection * uView * uModel * vec4(aVertex, 1.0);'+'  vTextureCoord = aTextureCoord;'+'}';var ck='#ifdef GL_ES\n'+'precision highp float;\n'+'#endif\n'+'varying vec4 vFrontColor;'+'varying vec2 vTextureCoord;'+'uniform sampler2D uSampler;'+'uniform int uIsDrawingText;'+'uniform bool uSmooth;'+'void main(void){'+'  if(uSmooth == true){'+'    float dist = distance(gl_PointCoord, vec2(0.5));'+'    if(dist > 0.5){'+'      discard;'+'    }'+'  }'+'  if(uIsDrawingText == 1){'+'    float alpha = texture2D(uSampler, vTextureCoord).a;'+'    gl_FragColor = vec4(vFrontColor.rgb * alpha, alpha);'+'  }'+'  else{'+'    gl_FragColor = vFrontColor;'+'  }'+'}';var cj=/Windows/.test(navigator.userAgent);var co='varying vec4 vFrontColor;'+'attribute vec3 aVertex;'+'attribute vec3 aNormal;'+'attribute vec4 aColor;'+'attribute vec2 aTexture;'+'varying   vec2 vTexture;'+'uniform vec4 uColor;'+'uniform bool uUsingMat;'+'uniform vec3 uSpecular;'+'uniform vec3 uMaterialEmissive;'+'uniform vec3 uMaterialAmbient;'+'uniform vec3 uMaterialSpecular;'+'uniform float uShininess;'+'uniform mat4 uModel;'+'uniform mat4 uView;'+'uniform mat4 uProjection;'+'uniform mat4 uNormalTransform;'+'uniform int uLightCount;'+'uniform vec3 uFalloff;'+'struct Light {'+'  int type;'+'  vec3 color;'+'  vec3 position;'+'  vec3 direction;'+'  float angle;'+'  vec3 halfVector;'+'  float concentration;'+'};'+'uniform Light uLights0;'+'uniform Light uLights1;'+'uniform Light uLights2;'+'uniform Light uLights3;'+'uniform Light uLights4;'+'uniform Light uLights5;'+'uniform Light uLights6;'+'uniform Light uLights7;'+'Light getLight(int index){'+'  if(index == 0) return uLights0;'+'  if(index == 1) return uLights1;'+'  if(index == 2) return uLights2;'+'  if(index == 3) return uLights3;'+'  if(index == 4) return uLights4;'+'  if(index == 5) return uLights5;'+'  if(index == 6) return uLights6;'+'  return uLights7;'+'}'+'void AmbientLight( inout vec3 totalAmbient, in vec3 ecPos, in Light light ) {'+'  float d = length( light.position - ecPos );'+'  float attenuation = 1.0 / ( uFalloff[0] + ( uFalloff[1] * d ) + ( uFalloff[2] * d * d ));'+'  totalAmbient += light.color * attenuation;'+'}'+'void DirectionalLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {'+'  float powerFactor = 0.0;'+'  float nDotVP = max(0.0, dot( vertNormal, normalize(-light.position) ));'+'  float nDotVH = max(0.0, dot( vertNormal, normalize(-light.position-normalize(ecPos) )));'+'  if( nDotVP != 0.0 ){'+'    powerFactor = pow( nDotVH, uShininess );'+'  }'+'  col += light.color * nDotVP;'+'  spec += uSpecular * powerFactor;'+'}'+'void PointLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {'+'  float powerFactor;'+'   vec3 VP = light.position - ecPos;'+'  float d = length( VP ); '+'  VP = normalize( VP );'+'  float attenuation = 1.0 / ( uFalloff[0] + ( uFalloff[1] * d ) + ( uFalloff[2] * d * d ));'+'  float nDotVP = max( 0.0, dot( vertNormal, VP ));'+'  vec3 halfVector = normalize( VP - normalize(ecPos) );'+'  float nDotHV = max( 0.0, dot( vertNormal, halfVector ));'+'  if( nDotVP == 0.0 ) {'+'    powerFactor = 0.0;'+'  }'+'  else {'+'    powerFactor = pow( nDotHV, uShininess );'+'  }'+'  spec += uSpecular * powerFactor * attenuation;'+'  col += light.color * nDotVP * attenuation;'+'}'+'void SpotLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {'+'  float spotAttenuation;'+'  float powerFactor = 0.0;'+'  vec3 VP = light.position - ecPos;'+'  vec3 ldir = normalize( -light.direction );'+'  float d = length( VP );'+'  VP = normalize( VP );'+'  float attenuation = 1.0 / ( uFalloff[0] + ( uFalloff[1] * d ) + ( uFalloff[2] * d * d ) );'+'  float spotDot = dot( VP, ldir );'+(cj?'  spotAttenuation = 1.0; ':'  if( spotDot > cos( light.angle ) ) {'+'    spotAttenuation = pow( spotDot, light.concentration );'+'  }'+'  else{'+'    spotAttenuation = 0.0;'+'  }'+'  attenuation *= spotAttenuation;'+'')+'  float nDotVP = max( 0.0, dot( vertNormal, VP ) );'+'  vec3 halfVector = normalize( VP - normalize(ecPos) );'+'  float nDotHV = max( 0.0, dot( vertNormal, halfVector ) );'+'  if( nDotVP != 0.0 ) {'+'    powerFactor = pow( nDotHV, uShininess );'+'  }'+'  spec += uSpecular * powerFactor * attenuation;'+'  col += light.color * nDotVP * attenuation;'+'}'+'void main(void) {'+'  vec3 finalAmbient = vec3( 0.0 );'+'  vec3 finalDiffuse = vec3( 0.0 );'+'  vec3 finalSpecular = vec3( 0.0 );'+'  vec4 col = uColor;'+'  if ( uColor[0] == -1.0 ){'+'    col = aColor;'+'  }'+'  vec3 norm = normalize(vec3( uNormalTransform * vec4( aNormal, 0.0 ) ));'+'  vec4 ecPos4 = uView * uModel * vec4(aVertex, 1.0);'+'  vec3 ecPos = (vec3(ecPos4))/ecPos4.w;'+'  if( uLightCount == 0 ) {'+'    vFrontColor = col + vec4(uMaterialSpecular, 1.0);'+'  }'+'  else {'+'    for( int i = 0; i < 8; i++ ) {'+'      Light l = getLight(i);'+'      if( i >= uLightCount ){'+'        break;'+'      }'+'      if( l.type == 0 ) {'+'        AmbientLight( finalAmbient, ecPos, l );'+'      }'+'      else if( l.type == 1 ) {'+'        DirectionalLight( finalDiffuse, finalSpecular, norm, ecPos, l );'+'      }'+'      else if( l.type == 2 ) {'+'        PointLight( finalDiffuse, finalSpecular, norm, ecPos, l );'+'      }'+'      else {'+'        SpotLight( finalDiffuse, finalSpecular, norm, ecPos, l );'+'      }'+'    }'+'   if( uUsingMat == false ) {'+'     vFrontColor = vec4('+'       vec3( col ) * finalAmbient +'+'       vec3( col ) * finalDiffuse +'+'       vec3( col ) * finalSpecular,'+'       col[3] );'+'   }'+'   else{'+'     vFrontColor = vec4( '+'       uMaterialEmissive + '+'       (vec3(col) * uMaterialAmbient * finalAmbient ) + '+'       (vec3(col) * finalDiffuse) + '+'       (uMaterialSpecular * finalSpecular), '+'       col[3] );'+'    }'+'  }'+'  vTexture.xy = aTexture.xy;'+'  gl_Position = uProjection * uView * uModel * vec4( aVertex, 1.0 );'+'}';var cl='#ifdef GL_ES\n'+'precision highp float;\n'+'#endif\n'+'varying vec4 vFrontColor;'+'uniform sampler2D uSampler;'+'uniform bool uUsingTexture;'+'varying vec2 vTexture;'+'void main(void){'+'  if( uUsingTexture ){'+'    gl_FragColor = vec4(texture2D(uSampler, vTexture.xy)) * vFrontColor;'+'  }'+'  else{'+'    gl_FragColor = vFrontColor;'+'  }'+'}';function uniformf(g,h,i,e){var d=ab.locations[g];if(d===b){d=k.getUniformLocation(h,i);ab.locations[g]=d}if(d!==null){if(e.length===4){k.uniform4fv(d,e)}else {if(e.length===3){k.uniform3fv(d,e)}else {if(e.length===2){k.uniform2fv(d,e)}else {k.uniform1f(d,e)}}}}}function uniformi(g,h,i,e){var d=ab.locations[g];if(d===b){d=k.getUniformLocation(h,i);ab.locations[g]=d}if(d!==null){if(e.length===4){k.uniform4iv(d,e)}else {if(e.length===3){k.uniform3iv(d,e)}else {if(e.length===2){k.uniform2iv(d,e)}else {k.uniform1i(d,e)}}}}}function uniformMatrix(h,i,j,g,e){var d=ab.locations[h];if(d===b){d=k.getUniformLocation(i,j);ab.locations[h]=d}if(d!==-1){if(e.length===16){k.uniformMatrix4fv(d,g,e)}else {if(e.length===9){k.uniformMatrix3fv(d,g,e)}else {k.uniformMatrix2fv(d,g,e)}}}}function vertexAttribPointer(e,g,h,i,j){var d=ab.attributes[e];if(d===b){d=k.getAttribLocation(g,h);ab.attributes[e]=d}if(d!==-1){k.bindBuffer(k.ARRAY_BUFFER,j);k.vertexAttribPointer(d,i,k.FLOAT,!1,0,0);k.enableVertexAttribArray(d)}}function disableVertexAttribPointer(e,g,h){var d=ab.attributes[e];if(d===b){d=k.getAttribLocation(g,h);ab.attributes[e]=d}if(d!==-1){k.disableVertexAttribArray(d)}}var bj=function(d,j,i){var g=d.createShader(d.VERTEX_SHADER);d.shaderSource(g,j);d.compileShader(g);if(!d.getShaderParameter(g,d.COMPILE_STATUS)){throw d.getShaderInfoLog(g)}var e=d.createShader(d.FRAGMENT_SHADER);d.shaderSource(e,i);d.compileShader(e);if(!d.getShaderParameter(e,d.COMPILE_STATUS)){throw d.getShaderInfoLog(e)}var h=d.createProgram();d.attachShader(h,g);d.attachShader(h,e);d.linkProgram(h);if(!d.getProgramParameter(h,d.LINK_STATUS)){throw 'Error linking shaders.'}return h};var bQ=function(g,h,e,d,i){return {x:g,y:h,w:e,h:d}};var aM=bQ;var cp=function(h,i,g,e,d){return {x:h,y:i,w:d?g:g-h,h:d?e:e-i}};var cs=function(g,h,e,d,i){return {x:g-e/2,y:h-d/2,w:e,h:d}};var G=function(){};var w=function(){};var y=function(){};var q=function(){};w.prototype=new G();w.prototype.constructor=w;y.prototype=new G();y.prototype.constructor=y;q.prototype=new G();q.prototype.constructor=q;G.prototype.a3DOnlyFunction=h;var bF={};var Y=j.Character=function(d){if(typeof d==='string'&&d.length===1){this.code=d.charCodeAt(0)}else {if(typeof d==='number'){this.code=d}else {if(d instanceof Y){this.code=d}else {this.code=NaN}}}return bF[this.code]===b?bF[this.code]=this:bF[this.code]};Y.prototype.toString=function(){return String.fromCharCode(this.code)};Y.prototype.valueOf=function(){return this.code};var cd=j.PShape=function(d){this.family=d||0;this.visible=!0;this.style=!0;this.children=[];this.nameTable=[];this.params=[];this.name='';this.image=null;this.matrix=null;this.kind=null;this.close=null;this.width=null;this.height=null;this.parent=null};cd.prototype={isVisible:function(){return this.visible},setVisible:function(d){this.visible=d},disableStyle:function(){this.style=!1;for(var d=0,e=this.children.length;d<e;d++){this.children[d].disableStyle()}},enableStyle:function(){this.style=!0;for(var d=0,e=this.children.length;d<e;d++){this.children[d].enableStyle()}},getFamily:function(){return this.family},getWidth:function(){return this.width},getHeight:function(){return this.height},setName:function(d){this.name=d},getName:function(){return this.name},draw:function(d){d=d||j;if(this.visible){this.pre(d);this.drawImpl(d);this.post(d)}},drawImpl:function(d){if(this.family===0){this.drawGroup(d)}else {if(this.family===1){this.drawPrimitive(d)}else {if(this.family===3){this.drawGeometry(d)}else {if(this.family===21){this.drawPath(d)}}}}},drawPath:function(g){var e,h;if(this.vertices.length===0){return}g.beginShape();if(this.vertexCodes.length===0){if(this.vertices[0].length===2){for(e=0,h=this.vertices.length;e<h;e++){g.vertex(this.vertices[e][0],this.vertices[e][1])}}else {for(e=0,h=this.vertices.length;e<h;e++){g.vertex(this.vertices[e][0],this.vertices[e][1],this.vertices[e][2])}}}else {var d=0;if(this.vertices[0].length===2){for(e=0,h=this.vertexCodes.length;e<h;e++){if(this.vertexCodes[e]===0){g.vertex(this.vertices[d][0],this.vertices[d][1],this.vertices[d]['moveTo']);g.breakShape=!1;d++}else {if(this.vertexCodes[e]===1){g.bezierVertex(this.vertices[d+0][0],this.vertices[d+0][1],this.vertices[d+1][0],this.vertices[d+1][1],this.vertices[d+2][0],this.vertices[d+2][1]);d+=3}else {if(this.vertexCodes[e]===2){g.curveVertex(this.vertices[d][0],this.vertices[d][1]);d++}else {if(this.vertexCodes[e]===3){g.breakShape=!0}}}}}}else {for(e=0,h=this.vertexCodes.length;e<h;e++){if(this.vertexCodes[e]===0){g.vertex(this.vertices[d][0],this.vertices[d][1],this.vertices[d][2]);if(this.vertices[d]['moveTo']===!0){n[n.length-1]['moveTo']=!0}else {if(this.vertices[d]['moveTo']===!1){n[n.length-1]['moveTo']=!1}}g.breakShape=!1}else {if(this.vertexCodes[e]===1){g.bezierVertex(this.vertices[d+0][0],this.vertices[d+0][1],this.vertices[d+0][2],this.vertices[d+1][0],this.vertices[d+1][1],this.vertices[d+1][2],this.vertices[d+2][0],this.vertices[d+2][1],this.vertices[d+2][2]);d+=3}else {if(this.vertexCodes[e]===2){g.curveVertex(this.vertices[d][0],this.vertices[d][1],this.vertices[d][2]);d++}else {if(this.vertexCodes[e]===3){g.breakShape=!0}}}}}}}g.endShape(this.close?2:1)},drawGeometry:function(g){var d,h;g.beginShape(this.kind);if(this.style){for(d=0,h=this.vertices.length;d<h;d++){g.vertex(this.vertices[d])}}else {for(d=0,h=this.vertices.length;d<h;d++){var e=this.vertices[d];if(e[2]===0){g.vertex(e[0],e[1])}else {g.vertex(e[0],e[1],e[2])}}}g.endShape()},drawGroup:function(e){for(var d=0,g=this.children.length;d<g;d++){this.children[d].draw(e)}},drawPrimitive:function(d){if(this.kind===2){d.point(this.params[0],this.params[1])}else {if(this.kind===4){if(this.params.length===4){d.line(this.params[0],this.params[1],this.params[2],this.params[3])}else {d.line(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5])}}else {if(this.kind===8){d.triangle(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5])}else {if(this.kind===16){d.quad(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5],this.params[6],this.params[7])}else {if(this.kind===30){if(this.image!==null){var g=aM;d.imageMode(0);d.image(this.image,this.params[0],this.params[1],this.params[2],this.params[3]);aM=g}else {var h=ac;d.rectMode(0);d.rect(this.params[0],this.params[1],this.params[2],this.params[3]);ac=h}}else {if(this.kind===31){var e=U;d.ellipseMode(0);d.ellipse(this.params[0],this.params[1],this.params[2],this.params[3]);U=e}else {if(this.kind===32){var i=U;d.ellipseMode(0);d.arc(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5]);U=i}else {if(this.kind===41){if(this.params.length===1){d.box(this.params[0])}else {d.box(this.params[0],this.params[1],this.params[2])}}else {if(this.kind===40){d.sphere(this.params[0])}}}}}}}}}},pre:function(d){if(this.matrix){d.pushMatrix();d.transform(this.matrix)}if(this.style){d.pushStyle();this.styles(d)}},post:function(d){if(this.matrix){d.popMatrix()}if(this.style){d.popStyle()}},styles:function(d){if(this.stroke){d.stroke(this.strokeColor);d.strokeWeight(this.strokeWeight);d.strokeCap(this.strokeCap);d.strokeJoin(this.strokeJoin)}else {d.noStroke()}if(this.fill){d.fill(this.fillColor)}else {d.noFill()}},getChild:function(g){var d,h;if(typeof g==='number'){return this.children[g]}var e;if(g===''||this.name===g){return this}if(this.nameTable.length>0){for(d=0,h=this.nameTable.length;d<h||e;d++){if(this.nameTable[d].getName===g){e=this.nameTable[d];break}}if(e){return e}}for(d=0,h=this.children.length;d<h;d++){e=this.children[d].getChild(g);if(e){return e}}return null},getChildCount:function(){return this.children.length},addChild:function(d){this.children.push(d);d.parent=this;if(d.getName()!==null){this.addName(d.getName(),d)}},addName:function(e,d){if(this.parent!==null){this.parent.addName(e,d)}else {this.nameTable.push([e,d])}},translate:function(){if(arguments.length===2){this.checkMatrix(2);this.matrix.translate(arguments[0],arguments[1])}else {this.checkMatrix(3);this.matrix.translate(arguments[0],arguments[1],0)}},checkMatrix:function(d){if(this.matrix===null){if(d===2){this.matrix=new j.PMatrix2D()}else {this.matrix=new j.PMatrix3D()}}else {if(d===3&&this.matrix instanceof j.PMatrix2D){this.matrix=new j.PMatrix3D()}}},rotateX:function(d){this.rotate(d,1,0,0)},rotateY:function(d){this.rotate(d,0,1,0)},rotateZ:function(d){this.rotate(d,0,0,1)},rotate:function(){if(arguments.length===1){this.checkMatrix(2);this.matrix.rotate(arguments[0])}else {this.checkMatrix(3);this.matrix.rotate(arguments[0],arguments[1],arguments[2],arguments[3])}},scale:function(){if(arguments.length===2){this.checkMatrix(2);this.matrix.scale(arguments[0],arguments[1])}else {if(arguments.length===3){this.checkMatrix(2);this.matrix.scale(arguments[0],arguments[1],arguments[2])}else {this.checkMatrix(2);this.matrix.scale(arguments[0])}}},resetMatrix:function(){this.checkMatrix(2);this.matrix.reset()},applyMatrix:function(d){if(arguments.length===1){this.applyMatrix(d.elements[0],d.elements[1],0,d.elements[2],d.elements[3],d.elements[4],0,d.elements[5],0,0,1,0,0,0,0,1)}else {if(arguments.length===6){this.checkMatrix(2);this.matrix.apply(arguments[0],arguments[1],arguments[2],0,arguments[3],arguments[4],arguments[5],0,0,0,1,0,0,0,0,1)}else {if(arguments.length===16){this.checkMatrix(3);this.matrix.apply(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15])}}}}};var F=j.PShapeSVG=function(){j.PShape.call(this);if(arguments.length===1){this.element=arguments[0];this.vertexCodes=[];this.vertices=[];this.opacity=1;this.stroke=!1;this.strokeColor=4.27819008E9;this.strokeWeight=1;this.strokeCap='butt';this.strokeJoin='miter';this.strokeGradient=null;this.strokeGradientPaint=null;this.strokeName=null;this.strokeOpacity=1;this.fill=!0;this.fillColor=4.27819008E9;this.fillGradient=null;this.fillGradientPaint=null;this.fillName=null;this.fillOpacity=1;if(this.element.getName()!=='svg'){throw "root is not <svg>, it's <"+this.element.getName()+'>'}}else {if(arguments.length===2){if(typeof arguments[1]==='string'){if(arguments[1].indexOf('.svg')>-1){this.element=new j.XMLElement(j,arguments[1]);this.vertexCodes=[];this.vertices=[];this.opacity=1;this.stroke=!1;this.strokeColor=4.27819008E9;this.strokeWeight=1;this.strokeCap='butt';this.strokeJoin='miter';this.strokeGradient='';this.strokeGradientPaint='';this.strokeName='';this.strokeOpacity=1;this.fill=!0;this.fillColor=4.27819008E9;this.fillGradient=null;this.fillGradientPaint=null;this.fillOpacity=1}}else {if(arguments[0]){this.element=arguments[1];this.vertexCodes=arguments[0].vertexCodes.slice();this.vertices=arguments[0].vertices.slice();this.stroke=arguments[0].stroke;this.strokeColor=arguments[0].strokeColor;this.strokeWeight=arguments[0].strokeWeight;this.strokeCap=arguments[0].strokeCap;this.strokeJoin=arguments[0].strokeJoin;this.strokeGradient=arguments[0].strokeGradient;this.strokeGradientPaint=arguments[0].strokeGradientPaint;this.strokeName=arguments[0].strokeName;this.fill=arguments[0].fill;this.fillColor=arguments[0].fillColor;this.fillGradient=arguments[0].fillGradient;this.fillGradientPaint=arguments[0].fillGradientPaint;this.fillName=arguments[0].fillName;this.strokeOpacity=arguments[0].strokeOpacity;this.fillOpacity=arguments[0].fillOpacity;this.opacity=arguments[0].opacity}}}}this.name=this.element.getStringAttribute('id');var i=this.element.getStringAttribute('display','inline');this.visible=i!=='none';var h=this.element.getAttribute('transform');if(h){this.matrix=this.parseMatrix(h)}var d=this.element.getStringAttribute('viewBox');if(d!==null){var g=d.split(' ');this.width=g[2];this.height=g[3]}var e=this.element.getStringAttribute('width');var k=this.element.getStringAttribute('height');if(e!==null){this.width=this.parseUnitSize(e);this.height=this.parseUnitSize(k)}else {if(this.width===0||this.height===0){this.width=1;this.height=1;throw 'The width and/or height is not '+'readable in the <svg> tag of this file.'}}this.parseColors(this.element);this.parseChildren(this.element)};F.prototype=new cd();F.prototype.parseMatrix=function(){function getCoords(e){var d=[];e.replace(/\((.*?)\)/,function(){return function(h,g){d=g.replace(/,+/g,' ').split(/\s+/)}}());return d}return function(i){this.checkMatrix(2);var e=[];i.replace(/\s*(\w+)\((.*?)\)/g,function(d){e.push(j.trim(d))});if(e.length===0){return null}for(var g=0,o=e.length;g<o;g++){var d=getCoords(e[g]);if(e[g].indexOf('matrix')!==-1){this.matrix.set(d[0],d[2],d[4],d[1],d[3],d[5])}else {if(e[g].indexOf('translate')!==-1){var m=d[0];var n=d.length===2?d[1]:0;this.matrix.translate(m,n)}else {if(e[g].indexOf('scale')!==-1){var k=d[0];var l=d.length===2?d[1]:d[0];this.matrix.scale(k,l)}else {if(e[g].indexOf('rotate')!==-1){var h=d[0];if(d.length===1){this.matrix.rotate(j.radians(h))}else {if(d.length===3){this.matrix.translate(d[1],d[2]);this.matrix.rotate(j.radians(d[0]));this.matrix.translate(-d[1],-d[2])}}}else {if(e[g].indexOf('skewX')!==-1){this.matrix.skewX(parseFloat(d[0]))}else {if(e[g].indexOf('skewY')!==-1){this.matrix.skewY(d[0])}else {if(e[g].indexOf('shearX')!==-1){this.matrix.shearX(d[0])}else {if(e[g].indexOf('shearY')!==-1){this.matrix.shearY(d[0])}}}}}}}}}return this.matrix}}();F.prototype.parseChildren=function(i){var e=i.getChildren();var g=new j.PShape();for(var d=0,k=e.length;d<k;d++){var h=this.parseChild(e[d]);if(h){g.addChild(h)}}this.children.push(g)};F.prototype.getName=function(){return this.name};F.prototype.parseChild=function(g){var e=g.getName();var d;if(e==='g'){d=new F(this,g)}else {if(e==='defs'){d=new F(this,g)}else {if(e==='line'){d=new F(this,g);d.parseLine()}else {if(e==='circle'){d=new F(this,g);d.parseEllipse(!0)}else {if(e==='ellipse'){d=new F(this,g);d.parseEllipse(!1)}else {if(e==='rect'){d=new F(this,g);d.parseRect()}else {if(e==='polygon'){d=new F(this,g);d.parsePoly(!0)}else {if(e==='polyline'){d=new F(this,g);d.parsePoly(!1)}else {if(e==='path'){d=new F(this,g);d.parsePath()}else {if(e==='radialGradient'){unimplemented('PShapeSVG.prototype.parseChild, name = radialGradient')}else {if(e==='linearGradient'){unimplemented('PShapeSVG.prototype.parseChild, name = linearGradient')}else {if(e==='text'){unimplemented('PShapeSVG.prototype.parseChild, name = text')}else {if(e==='filter'){unimplemented('PShapeSVG.prototype.parseChild, name = filter')}else {if(e==='mask'){unimplemented('PShapeSVG.prototype.parseChild, name = mask')}else {h()}}}}}}}}}}}}}}return d};F.prototype.parsePath=function(){this.family=21;this.kind=0;var D=[];var E;var o=j.trim(this.element.getStringAttribute('d').replace(/[\s,]+/g,' '));if(o===null){return}o=j.__toCharArray(o);var g=0,h=0,u=0,v=0,s=0,x=0,t=0,y=0,l=0,m=0,z=0,A=0,p=0,q=0,n=0,i=0;var r='';var d=[];var C=!1;var w;var B;var e,k;while(n<o.length){i=o[n].valueOf();if(i>=65&&i<=90||i>=97&&i<=122){e=n;n++;if(n<o.length){d=[];i=o[n].valueOf();while(!(i>=65&&i<=90||i>=97&&i<=100||i>=102&&i<=122)&&C===!1){if(i===32){if(r!==''){d.push(parseFloat(r));r=''}n++}else {if(i===45){if(o[n-1].valueOf()===101){r+=o[n].toString();n++}else {if(r!==''){d.push(parseFloat(r))}r=o[n].toString();n++}}else {r+=o[n].toString();n++}}if(n===o.length){C=!0}else {i=o[n].valueOf()}}}if(r!==''){d.push(parseFloat(r));r=''}B=o[e];i=B.valueOf();if(i===77){if(d.length>=2&&d.length%2===0){g=d[0];h=d[1];this.parsePathMoveto(g,h);if(d.length>2){for(e=2,k=d.length;e<k;e+=2){g=d[e];h=d[e+1];this.parsePathLineto(g,h)}}}}else {if(i===109){if(d.length>=2&&d.length%2===0){g+=d[0];h+=d[1];this.parsePathMoveto(g,h);if(d.length>2){for(e=2,k=d.length;e<k;e+=2){g+=d[e];h+=d[e+1];this.parsePathLineto(g,h)}}}}else {if(i===76){if(d.length>=2&&d.length%2===0){for(e=0,k=d.length;e<k;e+=2){g=d[e];h=d[e+1];this.parsePathLineto(g,h)}}}else {if(i===108){if(d.length>=2&&d.length%2===0){for(e=0,k=d.length;e<k;e+=2){g+=d[e];h+=d[e+1];this.parsePathLineto(g,h)}}}else {if(i===72){for(e=0,k=d.length;e<k;e++){g=d[e];this.parsePathLineto(g,h)}}else {if(i===104){for(e=0,k=d.length;e<k;e++){g+=d[e];this.parsePathLineto(g,h)}}else {if(i===86){for(e=0,k=d.length;e<k;e++){h=d[e];this.parsePathLineto(g,h)}}else {if(i===118){for(e=0,k=d.length;e<k;e++){h+=d[e];this.parsePathLineto(g,h)}}else {if(i===67){if(d.length>=6&&d.length%6===0){for(e=0,k=d.length;e<k;e+=6){s=d[e];t=d[e+1];x=d[e+2];y=d[e+3];l=d[e+4];m=d[e+5];this.parsePathCurveto(s,t,x,y,l,m);g=l;h=m}}}else {if(i===99){if(d.length>=6&&d.length%6===0){for(e=0,k=d.length;e<k;e+=6){s=g+d[e];t=h+d[e+1];x=g+d[e+2];y=h+d[e+3];l=g+d[e+4];m=h+d[e+5];this.parsePathCurveto(s,t,x,y,l,m);g=l;h=m}}}else {if(i===83){if(d.length>=4&&d.length%4===0){for(e=0,k=d.length;e<k;e+=4){if(w.toLowerCase()==='c'||w.toLowerCase()==='s'){z=this.vertices[this.vertices.length-2][0];A=this.vertices[this.vertices.length-2][1];p=this.vertices[this.vertices.length-1][0];q=this.vertices[this.vertices.length-1][1];s=p+(p-z);t=q+(q-A)}else {s=this.vertices[this.vertices.length-1][0];t=this.vertices[this.vertices.length-1][1]}x=d[e];y=d[e+1];l=d[e+2];m=d[e+3];this.parsePathCurveto(s,t,x,y,l,m);g=l;h=m}}}else {if(i===115){if(d.length>=4&&d.length%4===0){for(e=0,k=d.length;e<k;e+=4){if(w.toLowerCase()==='c'||w.toLowerCase()==='s'){z=this.vertices[this.vertices.length-2][0];A=this.vertices[this.vertices.length-2][1];p=this.vertices[this.vertices.length-1][0];q=this.vertices[this.vertices.length-1][1];s=p+(p-z);t=q+(q-A)}else {s=this.vertices[this.vertices.length-1][0];t=this.vertices[this.vertices.length-1][1]}x=g+d[e];y=h+d[e+1];l=g+d[e+2];m=h+d[e+3];this.parsePathCurveto(s,t,x,y,l,m);g=l;h=m}}}else {if(i===81){if(d.length>=4&&d.length%4===0){for(e=0,k=d.length;e<k;e+=4){u=d[e];v=d[e+1];l=d[e+2];m=d[e+3];this.parsePathQuadto(g,h,u,v,l,m);g=l;h=m}}}else {if(i===113){if(d.length>=4&&d.length%4===0){for(e=0,k=d.length;e<k;e+=4){u=g+d[e];v=h+d[e+1];l=g+d[e+2];m=h+d[e+3];this.parsePathQuadto(g,h,u,v,l,m);g=l;h=m}}}else {if(i===84){if(d.length>=2&&d.length%2===0){for(e=0,k=d.length;e<k;e+=2){if(w.toLowerCase()==='q'||w.toLowerCase()==='t'){z=this.vertices[this.vertices.length-2][0];A=this.vertices[this.vertices.length-2][1];p=this.vertices[this.vertices.length-1][0];q=this.vertices[this.vertices.length-1][1];u=p+(p-z);v=q+(q-A)}else {u=g;v=h}l=d[e];m=d[e+1];this.parsePathQuadto(g,h,u,v,l,m);g=l;h=m}}}else {if(i===116){if(d.length>=2&&d.length%2===0){for(e=0,k=d.length;e<k;e+=2){if(w.toLowerCase()==='q'||w.toLowerCase()==='t'){z=this.vertices[this.vertices.length-2][0];A=this.vertices[this.vertices.length-2][1];p=this.vertices[this.vertices.length-1][0];q=this.vertices[this.vertices.length-1][1];u=p+(p-z);v=q+(q-A)}else {u=g;v=h}l=g+d[e];m=h+d[e+1];this.parsePathQuadto(g,h,u,v,l,m);g=l;h=m}}}else {if(i===90||i===122){this.close=!0}}}}}}}}}}}}}}}}}w=B.toString()}else {n++}}};F.prototype.parsePathQuadto=function(i,j,g,h,d,e){if(this.vertices.length>0){this.parsePathCode(1);this.parsePathVertex(i+(g-i)*2/3,j+(h-j)*2/3);this.parsePathVertex(d+(g-d)*2/3,e+(h-e)*2/3);this.parsePathVertex(d,e)}else {throw 'Path must start with M/m'}};F.prototype.parsePathCurveto=function(d,h,e,i,g,j){if(this.vertices.length>0){this.parsePathCode(1);this.parsePathVertex(d,h);this.parsePathVertex(e,i);this.parsePathVertex(g,j)}else {throw 'Path must start with M/m'}};F.prototype.parsePathLineto=function(d,e){if(this.vertices.length>0){this.parsePathCode(0);this.parsePathVertex(d,e);this.vertices[this.vertices.length-1]['moveTo']=!1}else {throw 'Path must start with M/m'}};F.prototype.parsePathMoveto=function(d,e){if(this.vertices.length>0){this.parsePathCode(3)}this.parsePathCode(0);this.parsePathVertex(d,e);this.vertices[this.vertices.length-1]['moveTo']=!0};F.prototype.parsePathVertex=function(e,g){var d=[];d[0]=e;d[1]=g;this.vertices.push(d)};F.prototype.parsePathCode=function(d){this.vertexCodes.push(d)};F.prototype.parsePoly=function(i){this.family=21;this.close=i;var h=j.trim(this.element.getStringAttribute('points').replace(/[,\s]+/g,' '));if(h!==null){var d=h.split(' ');if(d.length%2===0){for(var e=0,k=d.length;e<k;e++){var g=[];g[0]=d[e];g[1]=d[++e];this.vertices.push(g)}}else {throw 'Error parsing polygon points: odd number of coordinates provided'}}};F.prototype.parseRect=function(){this.kind=30;this.family=1;this.params=[];this.params[0]=this.element.getFloatAttribute('x');this.params[1]=this.element.getFloatAttribute('y');this.params[2]=this.element.getFloatAttribute('width');this.params[3]=this.element.getFloatAttribute('height');if(this.params[2]<0||this.params[3]<0){throw 'svg error: negative width or height found while parsing <rect>'}};F.prototype.parseEllipse=function(g){this.kind=31;this.family=1;this.params=[];this.params[0]=this.element.getFloatAttribute('cx')|0;this.params[1]=this.element.getFloatAttribute('cy')|0;var d,e;if(g){d=e=this.element.getFloatAttribute('r');if(d<0){throw 'svg error: negative radius found while parsing <circle>'}}else {d=this.element.getFloatAttribute('rx');e=this.element.getFloatAttribute('ry');if(d<0||e<0){throw 'svg error: negative x-axis radius or y-axis radius found while parsing <ellipse>'}}this.params[0]-=d;this.params[1]-=e;this.params[2]=d*2;this.params[3]=e*2};F.prototype.parseLine=function(){this.kind=4;this.family=1;this.params=[];this.params[0]=this.element.getFloatAttribute('x1');this.params[1]=this.element.getFloatAttribute('y1');this.params[2]=this.element.getFloatAttribute('x2');this.params[3]=this.element.getFloatAttribute('y2')};F.prototype.parseColors=function(e){if(e.hasAttribute('opacity')){this.setOpacity(e.getAttribute('opacity'))}if(e.hasAttribute('stroke')){this.setStroke(e.getAttribute('stroke'))}if(e.hasAttribute('stroke-width')){this.setStrokeWeight(e.getAttribute('stroke-width'))}if(e.hasAttribute('stroke-linejoin')){this.setStrokeJoin(e.getAttribute('stroke-linejoin'))}if(e.hasAttribute('stroke-linecap')){this.setStrokeCap(e.getStringAttribute('stroke-linecap'))}if(e.hasAttribute('fill')){this.setFill(e.getStringAttribute('fill'))}if(e.hasAttribute('style')){var i=e.getStringAttribute('style');var h=i.toString().split(';');for(var g=0,k=h.length;g<k;g++){var d=j.trim(h[g].split(':'));if(d[0]==='fill'){this.setFill(d[1])}else {if(d[0]==='fill-opacity'){this.setFillOpacity(d[1])}else {if(d[0]==='stroke'){this.setStroke(d[1])}else {if(d[0]==='stroke-width'){this.setStrokeWeight(d[1])}else {if(d[0]==='stroke-linecap'){this.setStrokeCap(d[1])}else {if(d[0]==='stroke-linejoin'){this.setStrokeJoin(d[1])}else {if(d[0]==='stroke-opacity'){this.setStrokeOpacity(d[1])}else {if(d[0]==='opacity'){this.setOpacity(d[1])}}}}}}}}}}};F.prototype.setFillOpacity=function(d){this.fillOpacity=parseFloat(d);this.fillColor=this.fillOpacity*255<<24|this.fillColor&16777215};F.prototype.setFill=function(d){var e=this.fillColor&4.27819008E9;if(d==='none'){this.fill=!1}else {if(d.indexOf('#')===0){this.fill=!0;if(d.length===4){d=d.replace(/#(.)(.)(.)/,'#$1$1$2$2$3$3')}this.fillColor=e|parseInt(d.substring(1),16)&16777215}else {if(d.indexOf('rgb')===0){this.fill=!0;this.fillColor=e|this.parseRGB(d)}else {if(d.indexOf('url(#')===0){this.fillName=d.substring(5,d.length-1)}else {if(m[d]){this.fill=!0;this.fillColor=e|parseInt(m[d].substring(1),16)&16777215}}}}}};F.prototype.setOpacity=function(d){this.strokeColor=parseFloat(d)*255<<24|this.strokeColor&16777215;this.fillColor=parseFloat(d)*255<<24|this.fillColor&16777215};F.prototype.setStroke=function(d){var e=this.strokeColor&4.27819008E9;if(d==='none'){this.stroke=!1}else {if(d.charAt(0)==='#'){this.stroke=!0;if(d.length===4){d=d.replace(/#(.)(.)(.)/,'#$1$1$2$2$3$3')}this.strokeColor=e|parseInt(d.substring(1),16)&16777215}else {if(d.indexOf('rgb')===0){this.stroke=!0;this.strokeColor=e|this.parseRGB(d)}else {if(d.indexOf('url(#')===0){this.strokeName=d.substring(5,d.length-1)}else {if(m[d]){this.stroke=!0;this.strokeColor=e|parseInt(m[d].substring(1),16)&16777215}}}}}};F.prototype.setStrokeWeight=function(d){this.strokeWeight=this.parseUnitSize(d)};F.prototype.setStrokeJoin=function(d){if(d==='miter'){this.strokeJoin='miter'}else {if(d==='round'){this.strokeJoin='round'}else {if(d==='bevel'){this.strokeJoin='bevel'}}}};F.prototype.setStrokeCap=function(d){if(d==='butt'){this.strokeCap='butt'}else {if(d==='round'){this.strokeCap='round'}else {if(d==='square'){this.strokeCap='square'}}}};F.prototype.setStrokeOpacity=function(d){this.strokeOpacity=parseFloat(d);this.strokeColor=this.strokeOpacity*255<<24|this.strokeColor&16777215};F.prototype.parseRGB=function(e){var g=e.substring(e.indexOf('(')+1,e.indexOf(')'));var d=g.split(', ');return d[0]<<16|d[1]<<8|d[2]};F.prototype.parseUnitSize=function(d){var e=d.length-2;if(e<0){return d}if(d.indexOf('pt')===e){return parseFloat(d.substring(0,e))*1.25}if(d.indexOf('pc')===e){return parseFloat(d.substring(0,e))*15}if(d.indexOf('mm')===e){return parseFloat(d.substring(0,e))*3.543307}if(d.indexOf('cm')===e){return parseFloat(d.substring(0,e))*35.43307}if(d.indexOf('in')===e){return parseFloat(d.substring(0,e))*90}if(d.indexOf('px')===e){return parseFloat(d.substring(0,e))}return parseFloat(d)};j.shape=function(d,e,g,i,h){if(arguments.length>=1&&arguments[0]!==null){if(d.isVisible()){j.pushMatrix();if(aW===3){if(arguments.length===5){j.translate(e-i/2,g-h/2);j.scale(i/d.getWidth(),h/d.getHeight())}else {if(arguments.length===3){j.translate(e-d.getWidth()/2,-d.getHeight()/2)}else {j.translate(-d.getWidth()/2,-d.getHeight()/2)}}}else {if(aW===0){if(arguments.length===5){j.translate(e,g);j.scale(i/d.getWidth(),h/d.getHeight())}else {if(arguments.length===3){j.translate(e,g)}}}else {if(aW===1){if(arguments.length===5){i-=e;h-=g;j.translate(e,g);j.scale(i/d.getWidth(),h/d.getHeight())}else {if(arguments.length===3){j.translate(e,g)}}}}}d.draw(j);if(arguments.length===1&&aW===3||arguments.length>1){j.popMatrix()}}}};j.shapeMode=function(d){aW=d};j.loadShape=function(d){if(arguments.length===1){if(d.indexOf('.svg')>-1){return new F(null,d)}}return null};var a8=function(e,g,d,i,h){this.fullName=e||'';this.name=g||'';this.namespace=d||'';this.value=i;this.type=h};a8.prototype={getName:function(){return this.name},getFullName:function(){return this.fullName},getNamespace:function(){return this.namespace},getValue:function(){return this.value},getType:function(){return this.type},setValue:function(d){this.value=d}};var ax=j.XMLElement=function(d,e,g,h){this.attributes=[];this.children=[];this.fullName=null;this.name=null;this.namespace='';this.content=null;this.parent=null;this.lineNr='';this.systemID='';this.type='ELEMENT';if(d){if(typeof d==='string'){if(e===b&&d.indexOf('<')>-1){this.parse(d)}else {this.fullName=d;this.namespace=e;this.systemId=g;this.lineNr=h}}else {this.parse(e)}}};ax.prototype={parse:function(d){var h;try{var e=d.substring(d.length-4);if(e==='.xml'||e==='.svg'){d=r(d)}h=(new DOMParser()).parseFromString(d,'text/xml');var g=h.documentElement;if(g){this.parseChildrenRecursive(null,g)}else {throw 'Error loading document'}return this}catch(cK){throw cK}},parseChildrenRecursive:function(l,d){var e,k,h,g,i,j;if(!l){this.fullName=d.localName;this.name=d.nodeName;e=this}else {e=new ax(d.nodeName);e.parent=l}if(d.nodeType===3&&d.textContent!==''){return this.createPCDataElement(d.textContent)}if(d.nodeType===4){return this.createCDataElement(d.textContent)}if(d.attributes){for(g=0,i=d.attributes.length;g<i;g++){h=d.attributes[g];k=new a8(h.getname,h.nodeName,h.namespaceURI,h.nodeValue,h.nodeType);e.attributes.push(k)}}if(d.childNodes){for(g=0,i=d.childNodes.length;g<i;g++){var m=d.childNodes[g];j=e.parseChildrenRecursive(e,m);if(j!==null){e.children.push(j)}}}return e},createElement:function(e,d,g,h){if(g===b){return new ax(e,d)}return new ax(e,d,g,h)},createPCDataElement:function(e,g){if(e.replace(/^\s+$/g,'')===''){return null}var d=new ax();d.type='TEXT';d.content=e;return d},createCDataElement:function(d){var g=this.createPCDataElement(d);if(g===null){return null}g.type='CDATA';var h={'<':'&lt;','>':'&gt;',"'":'&apos;','"':'&quot;'},e;for(e in h){if(!Object.hasOwnProperty(h,e)){d=d.replace(new RegExp(e,'g'),h[e])}}g.cdata=d;return g},hasAttribute:function(){if(arguments.length===1){return this.getAttribute(arguments[0])!==null}if(arguments.length===2){return this.getAttribute(arguments[0],arguments[1])!==null}},equals:function(e){if(!(e instanceof ax)){return !1}var d,h;if(this.fullName!==e.fullName){return !1}if(this.attributes.length!==e.getAttributeCount()){return !1}if(this.attributes.length!==e.attributes.length){return !1}var i,j,m,n,g;for(d=0,h=this.attributes.length;d<h;d++){i=this.attributes[d].getName();j=this.attributes[d].getNamespace();g=e.findAttribute(i,j);if(g===null){return !1}if(this.attributes[d].getValue()!==g.getValue()){return !1}if(this.attributes[d].getType()!==g.getType()){return !1}}if(this.children.length!==e.getChildCount()){return !1}if(this.children.length>0){var k,l;for(d=0,h=this.children.length;d<h;d++){k=this.getChild(d);l=e.getChild(d);if(!k.equals(l)){return !1}}return !0}return this.content===e.content},getContent:function(){if(this.type==='TEXT'||this.type==='CDATA'){return this.content}var d=this.children;if(d.length===1&&(d[0].type==='TEXT'||d[0].type==='CDATA')){return d[0].content}return null},getAttribute:function(){var d;if(arguments.length===2){d=this.findAttribute(arguments[0]);if(d){return d.getValue()}return arguments[1]}else {if(arguments.length===1){d=this.findAttribute(arguments[0]);if(d){return d.getValue()}return null}else {if(arguments.length===3){d=this.findAttribute(arguments[0],arguments[1]);if(d){return d.getValue()}return arguments[2]}}}},getStringAttribute:function(){if(arguments.length===1){return this.getAttribute(arguments[0])}if(arguments.length===2){return this.getAttribute(arguments[0],arguments[1])}return this.getAttribute(arguments[0],arguments[1],arguments[2])},getString:function(d){return this.getStringAttribute(d)},getFloatAttribute:function(){if(arguments.length===1){return parseFloat(this.getAttribute(arguments[0],0))}if(arguments.length===2){return this.getAttribute(arguments[0],arguments[1])}return this.getAttribute(arguments[0],arguments[1],arguments[2])},getFloat:function(d){return this.getFloatAttribute(d)},getIntAttribute:function(){if(arguments.length===1){return this.getAttribute(arguments[0],0)}if(arguments.length===2){return this.getAttribute(arguments[0],arguments[1])}return this.getAttribute(arguments[0],arguments[1],arguments[2])},getInt:function(d){return this.getIntAttribute(d)},hasChildren:function(){return this.children.length>0},addChild:function(d){if(d!==null){d.parent=this;this.children.push(d)}},insertChild:function(d,g){if(d){if(d.getLocalName()===null&&!this.hasChildren()){var e=this.children[this.children.length-1];if(e.getLocalName()===null){e.setContent(e.getContent()+d.getContent());return}}d.parent=this;this.children.splice(g,0,d)}},getChild:function(d){if(typeof d==='number'){return this.children[d]}if(d.indexOf('/')!==-1){return this.getChildRecursive(d.split('/'),0)}var g,e;for(var h=0,i=this.getChildCount();h<i;h++){g=this.getChild(h);e=g.getName();if(e!==null&&e===d){return g}}return null},getChildren:function(){if(arguments.length===1){if(typeof arguments[0]==='number'){return this.getChild(arguments[0])}if(arguments[0].indexOf('/')!==-1){return this.getChildrenRecursive(arguments[0].split('/'),0)}var h=[];var e,d;for(var g=0,i=this.getChildCount();g<i;g++){e=this.getChild(g);d=e.getName();if(d!==null&&d===arguments[0]){h.push(e)}}return h}return this.children},getChildCount:function(){return this.children.length},getChildRecursive:function(g,e){if(e===g.length){return this}var h,d,j=g[e];for(var i=0,k=this.getChildCount();i<k;i++){h=this.getChild(i);d=h.getName();if(d!==null&&d===j){return h.getChildRecursive(g,e+1)}}return null},getChildrenRecursive:function(e,d){if(d===e.length-1){return this.getChildren(e[d])}var i=this.getChildren(e[d]);var g=[];for(var h=0;h<i.length;h++){g=g.concat(i[h].getChildrenRecursive(e,d+1))}return g},isLeaf:function(){return !this.hasChildren()},listChildren:function(){var e=[];for(var d=0,g=this.children.length;d<g;d++){e.push(this.getChild(d).getName())}return e},removeAttribute:function(g,e){this.namespace=e||'';for(var d=0,h=this.attributes.length;d<h;d++){if(this.attributes[d].getName()===g&&this.attributes[d].getNamespace()===this.namespace){this.attributes.splice(d,1);break}}},removeChild:function(e){if(e){for(var d=0,g=this.children.length;d<g;d++){if(this.children[d].equals(e)){this.children.splice(d,1);break}}}},removeChildAtIndex:function(d){if(this.children.length>d){this.children.splice(d,1)}},findAttribute:function(g,e){this.namespace=e||'';for(var d=0,h=this.attributes.length;d<h;d++){if(this.attributes[d].getName()===g&&this.attributes[d].getNamespace()===this.namespace){return this.attributes[d]}}return null},setAttribute:function(){var d;if(arguments.length===3){var g=arguments[0].indexOf(':');var e=arguments[0].substring(g+1);d=this.findAttribute(e,arguments[1]);if(d){d.setValue(arguments[2])}else {d=new a8(arguments[0],e,arguments[1],arguments[2],'CDATA');this.attributes.push(d)}}else {d=this.findAttribute(arguments[0]);if(d){d.setValue(arguments[1])}else {d=new a8(arguments[0],arguments[0],null,arguments[1],'CDATA');this.attributes.push(d)}}},setString:function(d,e){this.setAttribute(d,e)},setInt:function(d,e){this.setAttribute(d,e)},setFloat:function(d,e){this.setAttribute(d,e)},setContent:function(e){if(this.children.length>0){d.debug('Tried to set content for XMLElement with children')}this.content=e},setName:function(){if(arguments.length===1){this.name=arguments[0];this.fullName=arguments[0];this.namespace=null}else {var d=arguments[0].indexOf(':');if(arguments[1]===null||d<0){this.name=arguments[0]}else {this.name=arguments[0].substring(d+1)}this.fullName=arguments[0];this.namespace=arguments[1]}},getName:function(){return this.fullName},getLocalName:function(){return this.name},getAttributeCount:function(){return this.attributes.length},toString:function(){if(this.type==='TEXT'){return this.content}if(this.type==='CDATA'){return this.cdata}var h=this.fullName;var d='<'+h;var e,g;for(e=0;e<this.attributes.length;e++){var i=this.attributes[e];d+=' '+i.getName()+'='+'"'+i.getValue()+'"'}if(this.children.length===0){if(this.content===''){d+='/>'}else {d+='>'+this.content+'</'+h+'>'}}else {d+='>';for(g=0;g<this.children.length;g++){d+=this.children[g].toString()}d+='</'+h+'>'}return d}};ax.parse=function(e){var d=new ax();d.parse(e);return d};var cD=j.XML=j.XMLElement;j.loadXML=function(d){return new cD(j,d)};var bK=function(h){var e=0;for(var g=0;g<h.length;g++){if(g!==0){e=a.max(e,a.abs(h[g]))}else {e=a.abs(h[g])}}var d=(e+'').indexOf('.');if(d===0){d=1}else {if(d===-1){d=(e+'').length}}return d};var ar=j.PMatrix2D=function(){if(arguments.length===0){this.reset()}else {if(arguments.length===1&&arguments[0] instanceof ar){this.set(arguments[0].array())}else {if(arguments.length===6){this.set(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])}}}};ar.prototype={set:function(){if(arguments.length===6){var d=arguments;this.set([d[0],d[1],d[2],d[3],d[4],d[5]])}else {if(arguments.length===1&&arguments[0] instanceof ar){this.elements=arguments[0].array()}else {if(arguments.length===1&&arguments[0] instanceof Array){this.elements=arguments[0].slice()}}}},get:function(){var d=new ar();d.set(this.elements);return d},reset:function(){this.set([1,0,0,0,1,0])},array:function array(){return this.elements.slice()},translate:function(d,e){this.elements[2]=d*this.elements[0]+e*this.elements[1]+this.elements[2];this.elements[5]=d*this.elements[3]+e*this.elements[4]+this.elements[5]},invTranslate:function(d,e){this.translate(-d,-e)},transpose:function(){},mult:function(e,d){var g,h;if(e instanceof i){g=e.x;h=e.y;if(!d){d=new i()}}else {if(e instanceof Array){g=e[0];h=e[1];if(!d){d=[]}}}if(d instanceof Array){d[0]=this.elements[0]*g+this.elements[1]*h+this.elements[2];d[1]=this.elements[3]*g+this.elements[4]*h+this.elements[5]}else {if(d instanceof i){d.x=this.elements[0]*g+this.elements[1]*h+this.elements[2];d.y=this.elements[3]*g+this.elements[4]*h+this.elements[5];d.z=0}}return d},multX:function(d,e){return d*this.elements[0]+e*this.elements[1]+this.elements[2]},multY:function(d,e){return d*this.elements[3]+e*this.elements[4]+this.elements[5]},skewX:function(d){this.apply(1,0,1,d,0,0)},skewY:function(d){this.apply(1,0,1,0,d,0)},shearX:function(d){this.apply(1,0,1,a.tan(d),0,0)},shearY:function(d){this.apply(1,0,1,0,a.tan(d),0)},determinant:function(){return this.elements[0]*this.elements[4]-this.elements[1]*this.elements[3]},invert:function(){var d=this.determinant();if(a.abs(d)>-2.147483648E9){var e=this.elements[0];var g=this.elements[1];var h=this.elements[2];var i=this.elements[3];var j=this.elements[4];var k=this.elements[5];this.elements[0]=j/d;this.elements[3]=-i/d;this.elements[1]=-g/d;this.elements[4]=e/d;this.elements[2]=(g*k-j*h)/d;this.elements[5]=(i*h-e*k)/d;return !0}return !1},scale:function(d,e){if(d&&!e){e=d}if(d&&e){this.elements[0]*=d;this.elements[1]*=e;this.elements[3]*=d;this.elements[4]*=e}},invScale:function(d,e){if(d&&!e){e=d}this.scale(1/d,1/e)},apply:function(){var d;if(arguments.length===1&&arguments[0] instanceof ar){d=arguments[0].array()}else {if(arguments.length===6){d=Array.prototype.slice.call(arguments)}else {if(arguments.length===1&&arguments[0] instanceof Array){d=arguments[0]}}}var h=[0,0,this.elements[2],0,0,this.elements[5]];var i=0;for(var g=0;g<2;g++){for(var e=0;e<3;e++,i++){h[i]+=this.elements[g*3+0]*d[e+0]+this.elements[g*3+1]*d[e+3]}}this.elements=h.slice()},preApply:function(){var d;if(arguments.length===1&&arguments[0] instanceof ar){d=arguments[0].array()}else {if(arguments.length===6){d=Array.prototype.slice.call(arguments)}else {if(arguments.length===1&&arguments[0] instanceof Array){d=arguments[0]}}}var e=[0,0,d[2],0,0,d[5]];e[2]=d[2]+this.elements[2]*d[0]+this.elements[5]*d[1];e[5]=d[5]+this.elements[2]*d[3]+this.elements[5]*d[4];e[0]=this.elements[0]*d[0]+this.elements[3]*d[1];e[3]=this.elements[0]*d[3]+this.elements[3]*d[4];e[1]=this.elements[1]*d[0]+this.elements[4]*d[1];e[4]=this.elements[1]*d[3]+this.elements[4]*d[4];this.elements=e.slice()},rotate:function(i){var g=a.cos(i);var h=a.sin(i);var d=this.elements[0];var e=this.elements[1];this.elements[0]=g*d+h*e;this.elements[1]=-h*d+g*e;d=this.elements[3];e=this.elements[4];this.elements[3]=g*d+h*e;this.elements[4]=-h*d+g*e},rotateZ:function(d){this.rotate(d)},invRotateZ:function(d){this.rotateZ(d-a.PI)},print:function(){var d=bK(this.elements);var e=''+j.nfs(this.elements[0],d,4)+' '+j.nfs(this.elements[1],d,4)+' '+j.nfs(this.elements[2],d,4)+'\n'+j.nfs(this.elements[3],d,4)+' '+j.nfs(this.elements[4],d,4)+' '+j.nfs(this.elements[5],d,4)+'\n\n';j.println(e)}};var z=j.PMatrix3D=function(){this.reset()};z.prototype={set:function(){if(arguments.length===16){this.elements=Array.prototype.slice.call(arguments)}else {if(arguments.length===1&&arguments[0] instanceof z){this.elements=arguments[0].array()}else {if(arguments.length===1&&arguments[0] instanceof Array){this.elements=arguments[0].slice()}}}},get:function(){var d=new z();d.set(this.elements);return d},reset:function(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},array:function array(){return this.elements.slice()},translate:function(e,g,d){if(d===b){d=0}this.elements[3]+=e*this.elements[0]+g*this.elements[1]+d*this.elements[2];this.elements[7]+=e*this.elements[4]+g*this.elements[5]+d*this.elements[6];this.elements[11]+=e*this.elements[8]+g*this.elements[9]+d*this.elements[10];this.elements[15]+=e*this.elements[12]+g*this.elements[13]+d*this.elements[14]},transpose:function(){var d=this.elements[4];this.elements[4]=this.elements[1];this.elements[1]=d;d=this.elements[8];this.elements[8]=this.elements[2];this.elements[2]=d;d=this.elements[6];this.elements[6]=this.elements[9];this.elements[9]=d;d=this.elements[3];this.elements[3]=this.elements[12];this.elements[12]=d;d=this.elements[7];this.elements[7]=this.elements[13];this.elements[13]=d;d=this.elements[11];this.elements[11]=this.elements[14];this.elements[14]=d},mult:function(j,d){var e,g,h,k;if(j instanceof i){e=j.x;g=j.y;h=j.z;k=1;if(!d){d=new i()}}else {if(j instanceof Array){e=j[0];g=j[1];h=j[2];k=j[3]||1;if(!d||d.length!==3&&d.length!==4){d=[0,0,0]}}}if(d instanceof Array){if(d.length===3){d[0]=this.elements[0]*e+this.elements[1]*g+this.elements[2]*h+this.elements[3];d[1]=this.elements[4]*e+this.elements[5]*g+this.elements[6]*h+this.elements[7];d[2]=this.elements[8]*e+this.elements[9]*g+this.elements[10]*h+this.elements[11]}else {if(d.length===4){d[0]=this.elements[0]*e+this.elements[1]*g+this.elements[2]*h+this.elements[3]*k;d[1]=this.elements[4]*e+this.elements[5]*g+this.elements[6]*h+this.elements[7]*k;d[2]=this.elements[8]*e+this.elements[9]*g+this.elements[10]*h+this.elements[11]*k;d[3]=this.elements[12]*e+this.elements[13]*g+this.elements[14]*h+this.elements[15]*k}}}if(d instanceof i){d.x=this.elements[0]*e+this.elements[1]*g+this.elements[2]*h+this.elements[3];d.y=this.elements[4]*e+this.elements[5]*g+this.elements[6]*h+this.elements[7];d.z=this.elements[8]*e+this.elements[9]*g+this.elements[10]*h+this.elements[11]}return d},preApply:function(){var d;if(arguments.length===1&&arguments[0] instanceof z){d=arguments[0].array()}else {if(arguments.length===16){d=Array.prototype.slice.call(arguments)}else {if(arguments.length===1&&arguments[0] instanceof Array){d=arguments[0]}}}var h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var i=0;for(var g=0;g<4;g++){for(var e=0;e<4;e++,i++){h[i]+=this.elements[e+0]*d[g*4+0]+this.elements[e+4]*d[g*4+1]+this.elements[e+8]*d[g*4+2]+this.elements[e+12]*d[g*4+3]}}this.elements=h.slice()},apply:function(){var d;if(arguments.length===1&&arguments[0] instanceof z){d=arguments[0].array()}else {if(arguments.length===16){d=Array.prototype.slice.call(arguments)}else {if(arguments.length===1&&arguments[0] instanceof Array){d=arguments[0]}}}var h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var i=0;for(var g=0;g<4;g++){for(var e=0;e<4;e++,i++){h[i]+=this.elements[g*4+0]*d[e+0]+this.elements[g*4+1]*d[e+4]+this.elements[g*4+2]*d[e+8]+this.elements[g*4+3]*d[e+12]}}this.elements=h.slice()},rotate:function(l,g,d,h){if(!d){this.rotateZ(l)}else {var k=j.cos(l);var i=j.sin(l);var e=1-k;this.apply(e*g*g+k,e*g*d-i*h,e*g*h+i*d,0,e*g*d+i*h,e*d*d+k,e*d*h-i*g,0,e*g*h-i*d,e*d*h+i*g,e*h*h+k,0,0,0,0,1)}},invApply:function(){if(aY===b){aY=new z()}var d=arguments;aY.set(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15]);if(!aY.invert()){return !1}this.preApply(aY);return !0},rotateX:function(d){var e=j.cos(d);var g=j.sin(d);this.apply([1,0,0,0,0,e,-g,0,0,g,e,0,0,0,0,1])},rotateY:function(d){var e=j.cos(d);var g=j.sin(d);this.apply([e,0,g,0,0,1,0,0,-g,0,e,0,0,0,0,1])},rotateZ:function(d){var e=a.cos(d);var g=a.sin(d);this.apply([e,-g,0,0,g,e,0,0,0,0,1,0,0,0,0,1])},scale:function(e,g,d){if(e&&!g&&!d){g=d=e}else {if(e&&g&&!d){d=1}}if(e&&g&&d){this.elements[0]*=e;this.elements[1]*=g;this.elements[2]*=d;this.elements[4]*=e;this.elements[5]*=g;this.elements[6]*=d;this.elements[8]*=e;this.elements[9]*=g;this.elements[10]*=d;this.elements[12]*=e;this.elements[13]*=g;this.elements[14]*=d}},skewX:function(d){var e=a.tan(d);this.apply(1,e,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},skewY:function(d){var e=a.tan(d);this.apply(1,0,0,0,e,1,0,0,0,0,1,0,0,0,0,1)},shearX:function(d){var e=a.tan(d);this.apply(1,e,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},shearY:function(d){var e=a.tan(d);this.apply(1,0,0,0,e,1,0,0,0,0,1,0,0,0,0,1)},multX:function(d,e,g,h){if(!g){return this.elements[0]*d+this.elements[1]*e+this.elements[3]}if(!h){return this.elements[0]*d+this.elements[1]*e+this.elements[2]*g+this.elements[3]}return this.elements[0]*d+this.elements[1]*e+this.elements[2]*g+this.elements[3]*h},multY:function(d,e,g,h){if(!g){return this.elements[4]*d+this.elements[5]*e+this.elements[7]}if(!h){return this.elements[4]*d+this.elements[5]*e+this.elements[6]*g+this.elements[7]}return this.elements[4]*d+this.elements[5]*e+this.elements[6]*g+this.elements[7]*h},multZ:function(e,g,h,d){if(!d){return this.elements[8]*e+this.elements[9]*g+this.elements[10]*h+this.elements[11]}return this.elements[8]*e+this.elements[9]*g+this.elements[10]*h+this.elements[11]*d},multW:function(e,g,h,d){if(!d){return this.elements[12]*e+this.elements[13]*g+this.elements[14]*h+this.elements[15]}return this.elements[12]*e+this.elements[13]*g+this.elements[14]*h+this.elements[15]*d},invert:function(){var g=this.elements[0]*this.elements[5]-this.elements[1]*this.elements[4];var h=this.elements[0]*this.elements[6]-this.elements[2]*this.elements[4];var i=this.elements[0]*this.elements[7]-this.elements[3]*this.elements[4];var j=this.elements[1]*this.elements[6]-this.elements[2]*this.elements[5];var k=this.elements[1]*this.elements[7]-this.elements[3]*this.elements[5];var l=this.elements[2]*this.elements[7]-this.elements[3]*this.elements[6];var m=this.elements[8]*this.elements[13]-this.elements[9]*this.elements[12];var n=this.elements[8]*this.elements[14]-this.elements[10]*this.elements[12];var o=this.elements[8]*this.elements[15]-this.elements[11]*this.elements[12];var p=this.elements[9]*this.elements[14]-this.elements[10]*this.elements[13];var q=this.elements[9]*this.elements[15]-this.elements[11]*this.elements[13];var r=this.elements[10]*this.elements[15]-this.elements[11]*this.elements[14];var s=g*r-h*q+i*p+j*o-k*n+l*m;if(a.abs(s)<=1.0E-9){return !1}var d=[];d[0]=+this.elements[5]*r-this.elements[6]*q+this.elements[7]*p;d[4]=-this.elements[4]*r+this.elements[6]*o-this.elements[7]*n;d[8]=+this.elements[4]*q-this.elements[5]*o+this.elements[7]*m;d[12]=-this.elements[4]*p+this.elements[5]*n-this.elements[6]*m;d[1]=-this.elements[1]*r+this.elements[2]*q-this.elements[3]*p;d[5]=+this.elements[0]*r-this.elements[2]*o+this.elements[3]*n;d[9]=-this.elements[0]*q+this.elements[1]*o-this.elements[3]*m;d[13]=+this.elements[0]*p-this.elements[1]*n+this.elements[2]*m;d[2]=+this.elements[13]*l-this.elements[14]*k+this.elements[15]*j;d[6]=-this.elements[12]*l+this.elements[14]*i-this.elements[15]*h;d[10]=+this.elements[12]*k-this.elements[13]*i+this.elements[15]*g;d[14]=-this.elements[12]*j+this.elements[13]*h-this.elements[14]*g;d[3]=-this.elements[9]*l+this.elements[10]*k-this.elements[11]*j;d[7]=+this.elements[8]*l-this.elements[10]*i+this.elements[11]*h;d[11]=-this.elements[8]*k+this.elements[9]*i-this.elements[11]*g;d[15]=+this.elements[8]*j-this.elements[9]*h+this.elements[10]*g;var e=1/s;d[0]*=e;d[1]*=e;d[2]*=e;d[3]*=e;d[4]*=e;d[5]*=e;d[6]*=e;d[7]*=e;d[8]*=e;d[9]*=e;d[10]*=e;d[11]*=e;d[12]*=e;d[13]*=e;d[14]*=e;d[15]*=e;this.elements=d.slice();return !0},toString:function(){var d='';for(var e=0;e<15;e++){d+=this.elements[e]+', '}d+=this.elements[15];return d},print:function(){var d=bK(this.elements);var e=''+j.nfs(this.elements[0],d,4)+' '+j.nfs(this.elements[1],d,4)+' '+j.nfs(this.elements[2],d,4)+' '+j.nfs(this.elements[3],d,4)+'\n'+j.nfs(this.elements[4],d,4)+' '+j.nfs(this.elements[5],d,4)+' '+j.nfs(this.elements[6],d,4)+' '+j.nfs(this.elements[7],d,4)+'\n'+j.nfs(this.elements[8],d,4)+' '+j.nfs(this.elements[9],d,4)+' '+j.nfs(this.elements[10],d,4)+' '+j.nfs(this.elements[11],d,4)+'\n'+j.nfs(this.elements[12],d,4)+' '+j.nfs(this.elements[13],d,4)+' '+j.nfs(this.elements[14],d,4)+' '+j.nfs(this.elements[15],d,4)+'\n\n';j.println(e)},invTranslate:function(d,e,g){this.preApply(1,0,0,-d,0,1,0,-e,0,0,1,-g,0,0,0,1)},invRotateX:function(d){var e=a.cos(-d);var g=a.sin(-d);this.preApply([1,0,0,0,0,e,-g,0,0,g,e,0,0,0,0,1])},invRotateY:function(d){var e=a.cos(-d);var g=a.sin(-d);this.preApply([e,0,g,0,0,1,0,0,-g,0,e,0,0,0,0,1])},invRotateZ:function(d){var e=a.cos(-d);var g=a.sin(-d);this.preApply([e,-g,0,0,g,e,0,0,0,0,1,0,0,0,0,1])},invScale:function(d,e,g){this.preApply([1/d,0,0,0,0,1/e,0,0,0,0,1/g,0,0,0,0,1])}};var ap=j.PMatrixStack=function(){this.matrixStack=[]};ap.prototype.load=function(){var d=M.$newPMatrix();if(arguments.length===1){d.set(arguments[0])}else {d.set(arguments)}this.matrixStack.push(d)};w.prototype.$newPMatrix=function(){return new ar()};y.prototype.$newPMatrix=function(){return new z()};ap.prototype.push=function(){this.matrixStack.push(this.peek())};ap.prototype.pop=function(){return this.matrixStack.pop()};ap.prototype.peek=function(){var d=M.$newPMatrix();d.set(this.matrixStack[this.matrixStack.length-1]);return d};ap.prototype.mult=function(d){this.matrixStack[this.matrixStack.length-1].apply(d)};j.split=function(e,d){return e.split(d)};j.splitTokens=function(h,j){if(j===b){return h.split(/\s+/g)}var k=j.split(/()/g),d='',l=h.length,e,i,g=[];for(e=0;e<l;e++){i=h[e];if(k.indexOf(i)>-1){if(d!==''){g.push(d)}d=''}else {d+=i}}if(d!==''){g.push(d)}return g};j.append=function(d,e){d[d.length]=e;return d};j.concat=function(d,e){return d.concat(e)};j.sort=function(d,g){var e=[];if(d.length>0){var j=g>0?g:d.length;for(var h=0;h<j;h++){e.push(d[h])}if(typeof d[0]==='string'){e.sort()}else {e.sort(function(e,h){return e-h})}if(g>0){for(var i=e.length;i<d.length;i++){e.push(d[i])}}}return e};j.splice=function(e,d,h){if(d.length===0){return e}if(d instanceof Array){for(var g=0,i=h;g<d.length;i++,g++){e.splice(i,0,d[g])}}else {e.splice(h,0,d)}return e};j.subset=function(g,e,d){var h=d!==b?e+d:g.length;return g.slice(e,h)};j.join=function(e,d){return e.join(d)};j.shorten=function(g){var e=[];var h=g.length;for(var d=0;d<h;d++){e[d]=g[d]}e.pop();return e};j.expand=function(e,g){var d=e.slice(0),h=g||e.length*2;d.length=h;return d};j.arrayCopy=function(){var e,h=0,d,k=0,g;if(arguments.length===2){e=arguments[0];d=arguments[1];g=e.length}else {if(arguments.length===3){e=arguments[0];d=arguments[1];g=arguments[2]}else {if(arguments.length===5){e=arguments[0];h=arguments[1];d=arguments[2];k=arguments[3];g=arguments[4]}}}for(var i=h,j=k;i<g+h;i++,j++){if(d[j]!==b){d[j]=e[i]}else {throw 'array index out of bounds exception'}}};j.reverse=function(d){return d.reverse()};j.mix=function(d,e,g){return d+((e-d)*g>>8)};j.peg=function(d){return d<0?0:d>255?255:d};j.modes=function(){var h=4.27819008E9,e=16711680,d=65280,g=255,i=a.min,j=a.max;function applyMode(m,h,l,k,j,t,s,r,p,o,n){var q=i(((m&4.27819008E9)>>>24)+h,255)<<24;var g=l+((p-l)*h>>8);g=(g<0?0:g>255?255:g)<<16;var e=k+((o-k)*h>>8);e=(e<0?0:e>255?255:e)<<8;var d=j+((n-j)*h>>8);d=d<0?0:d>255?255:d;return q|g|e|d}return {replace:function(e,d){return d},blend:function(j,k){var l=(k&h)>>>24,o=j&e,n=j&d,m=j&g,r=k&e,q=k&d,p=k&g;return i(((j&h)>>>24)+l,255)<<24|o+((r-o)*l>>8)&e|n+((q-n)*l>>8)&d|m+((p-m)*l>>8)&g},add:function(j,k){var l=(k&h)>>>24;return i(((j&h)>>>24)+l,255)<<24|i((j&e)+((k&e)>>8)*l,e)&e|i((j&d)+((k&d)>>8)*l,d)&d|i((j&g)+((k&g)*l>>8),g)},subtract:function(k,l){var m=(l&h)>>>24;return i(((k&h)>>>24)+m,255)<<24|j((k&e)-((l&e)>>8)*m,d)&e|j((k&d)-((l&d)>>8)*m,g)&d|j((k&g)-((l&g)*m>>8),0)},lightest:function(k,l){var m=(l&h)>>>24;return i(((k&h)>>>24)+m,255)<<24|j(k&e,((l&e)>>8)*m)&e|j(k&d,((l&d)>>8)*m)&d|j(k&g,(l&g)*m>>8)},darkest:function(j,l){var k=(l&h)>>>24,o=j&e,n=j&d,m=j&g,r=i(j&e,((l&e)>>8)*k),q=i(j&d,((l&d)>>8)*k),p=i(j&g,(l&g)*k>>8);return i(((j&h)>>>24)+k,255)<<24|o+((r-o)*k>>8)&e|n+((q-n)*k>>8)&d|m+((p-m)*k>>8)&g},difference:function(o,p){var t=(p&h)>>>24,k=(o&e)>>16,j=(o&d)>>8,i=o&g,n=(p&e)>>16,m=(p&d)>>8,l=p&g,s=k>n?k-n:n-k,r=j>m?j-m:m-j,q=i>l?i-l:l-i;return applyMode(o,t,k,j,i,n,m,l,s,r,q)},exclusion:function(i,j){var t=(j&h)>>>24,m=(i&e)>>16,l=(i&d)>>8,k=i&g,p=(j&e)>>16,o=(j&d)>>8,n=j&g,s=m+p-(m*p>>7),r=l+o-(l*o>>7),q=k+n-(k*n>>7);return applyMode(i,t,m,l,k,p,o,n,s,r,q)},multiply:function(i,j){var t=(j&h)>>>24,m=(i&e)>>16,l=(i&d)>>8,k=i&g,p=(j&e)>>16,o=(j&d)>>8,n=j&g,s=m*p>>8,r=l*o>>8,q=k*n>>8;return applyMode(i,t,m,l,k,p,o,n,s,r,q)},screen:function(i,j){var t=(j&h)>>>24,m=(i&e)>>16,l=(i&d)>>8,k=i&g,p=(j&e)>>16,o=(j&d)>>8,n=j&g,s=255-((255-m)*(255-p)>>8),r=255-((255-l)*(255-o)>>8),q=255-((255-k)*(255-n)>>8);return applyMode(i,t,m,l,k,p,o,n,s,r,q)},hard_light:function(l,m){var t=(m&h)>>>24,p=(l&e)>>16,o=(l&d)>>8,n=l&g,k=(m&e)>>16,j=(m&d)>>8,i=m&g,s=k<128?p*k>>7:255-((255-p)*(255-k)>>7),r=j<128?o*j>>7:255-((255-o)*(255-j)>>7),q=i<128?n*i>>7:255-((255-n)*(255-i)>>7);return applyMode(l,t,p,o,n,k,j,i,s,r,q)},soft_light:function(l,m){var t=(m&h)>>>24,k=(l&e)>>16,j=(l&d)>>8,i=l&g,p=(m&e)>>16,o=(m&d)>>8,n=m&g,s=(k*p>>7)+(k*k>>8)-(k*k*p>>15),r=(j*o>>7)+(j*j>>8)-(j*j*o>>15),q=(i*n>>7)+(i*i>>8)-(i*i*n>>15);return applyMode(l,t,k,j,i,p,o,n,s,r,q)},overlay:function(l,m){var t=(m&h)>>>24,k=(l&e)>>16,j=(l&d)>>8,i=l&g,p=(m&e)>>16,o=(m&d)>>8,n=m&g,s=k<128?k*p>>7:255-((255-k)*(255-p)>>7),r=j<128?j*o>>7:255-((255-j)*(255-o)>>7),q=i<128?i*n>>7:255-((255-i)*(255-n)>>7);return applyMode(l,t,k,j,i,p,o,n,s,r,q)},dodge:function(l,m){var t=(m&h)>>>24,s=(l&e)>>16,r=(l&d)>>8,q=l&g,p=(m&e)>>16,o=(m&d)>>8,n=m&g;var k=255;if(p!==255){k=(s<<8)/(255-p);k=k<0?0:k>255?255:k}var j=255;if(o!==255){j=(r<<8)/(255-o);j=j<0?0:j>255?255:j}var i=255;if(n!==255){i=(q<<8)/(255-n);i=i<0?0:i>255?255:i}return applyMode(l,t,s,r,q,p,o,n,k,j,i)},burn:function(l,m){var t=(m&h)>>>24,s=(l&e)>>16,r=(l&d)>>8,q=l&g,p=(m&e)>>16,o=(m&d)>>8,n=m&g;var k=0;if(p!==0){k=(255-s<<8)/p;k=255-(k<0?0:k>255?255:k)}var j=0;if(o!==0){j=(255-r<<8)/o;j=255-(j<0?0:j>255?255:j)}var i=0;if(n!==0){i=(255-q<<8)/n;i=255-(i<0?0:i>255?255:i)}return applyMode(l,t,s,r,q,p,o,n,k,j,i)}}}();function color$4(k,l,m,n){var g,e,d,h;if(aq===3){var i=j.color.toRGB(k,l,m);g=i[0];e=i[1];d=i[2]}else {g=a.round(255*(k/W));e=a.round(255*(l/ad));d=a.round(255*(m/X))}h=a.round(255*(n/N));g=g<0?0:g;e=e<0?0:e;d=d<0?0:d;h=h<0?0:h;g=g>255?255:g;e=e>255?255:e;d=d>255?255:d;h=h>255?255:h;return h<<24&4.27819008E9|g<<16&16711680|e<<8&65280|d&255}function color$2(e,g){var d;if(e&4.27819008E9){d=a.round(255*(g/N));d=d>255?255:d;d=d<0?0:d;return e-(e&4.27819008E9)+(d<<24&4.27819008E9)}if(aq===1){return color$4(e,e,e,g)}if(aq===3){return color$4(0,0,e/W*X,g)}}function color$1(d){if(d<=W&&d>=0){if(aq===1){return color$4(d,d,d,N)}if(aq===3){return color$4(0,0,d/W*X,N)}}if(d){if(d>2147483647){d-=4.294967296E9}return d}}j.color=function(d,e,g,h){if(d!==b&&e!==b&&g!==b&&h!==b){return color$4(d,e,g,h)}if(d!==b&&e!==b&&g!==b){return color$4(d,e,g,N)}if(d!==b&&e!==b){return color$2(d,e)}if(typeof d==='number'){return color$1(d)}return color$4(W,ad,X,N)};j.color.toString=function(d){return 'rgba('+(d>>16&255)+','+(d>>8&255)+','+(d&255)+','+(d>>24&255)/255+')'};j.color.toInt=function(h,g,e,d){return d<<24&4.27819008E9|h<<16&16711680|g<<8&65280|e&255};j.color.toArray=function(d){return [d>>16&255,d>>8&255,d&255,d>>24&255]};j.color.toGLArray=function(d){return [((d&16711680)>>>16)/255,(d>>8&255)/255,(d&255)/255,(d>>24&255)/255]};j.color.toRGB=function(h,g,e){h=h>W?W:h;g=g>ad?ad:g;e=e>X?X:e;h=h/W*360;g=g/ad*100;e=e/X*100;var d=a.round(e/100*255);if(g===0){return [d,d,d]}var l=h%360;var m=l%60;var i=a.round(e*(100-g)/10000*255);var j=a.round(e*(6000-g*m)/600000*255);var k=a.round(e*(6000-g*(60-m))/600000*255);switch(a.floor(l/60)){case 0:return [d,k,i];case 1:return [j,d,i];case 2:return [i,d,k];case 3:return [i,j,d];case 4:return [k,i,d];case 5:return [d,i,j];}};function colorToHSB(l){var h,g,i;h=(l>>16&255)/255;g=(l>>8&255)/255;i=(l&255)/255;var d=j.max(j.max(h,g),i),k=j.min(j.min(h,g),i),e,m;if(k===d){return [0,0,d*X]}m=(d-k)/d;if(h===d){e=(g-i)/(d-k)}else {if(g===d){e=2+(i-h)/(d-k)}else {e=4+(h-g)/(d-k)}}e/=6;if(e<0){e+=1}else {if(e>1){e-=1}}return [e*W,m*ad,d*X]}j.brightness=function(d){return colorToHSB(d)[2]};j.saturation=function(d){return colorToHSB(d)[1]};j.hue=function(d){return colorToHSB(d)[0]};j.red=function(d){return (d>>16&255)/255*W};j.green=function(d){return ((d&65280)>>>8)/255*ad};j.blue=function(d){return (d&255)/255*X};j.alpha=function(d){return (d>>24&255)/255*N};j.lerpColor=function(z,A,d){var x,v,o,n,t,r,p,l,u,s,q,m;var h,i,k,w,y;var e=j.color(z);var g=j.color(A);if(aq===3){h=colorToHSB(e);l=(e>>24&255)/N;i=colorToHSB(g);m=((g&4.27819008E9)>>>24)/N;w=j.lerp(h[0],i[0],d);y=j.lerp(h[1],i[1],d);o=j.lerp(h[2],i[2],d);k=j.color.toRGB(w,y,o);n=j.lerp(l,m,d)*N;return n<<24&4.27819008E9|(k[0]&255)<<16|(k[1]&255)<<8|k[2]&255}t=e>>16&255;r=e>>8&255;p=e&255;l=(e>>24&255)/N;u=(g&16711680)>>>16;s=g>>8&255;q=g&255;m=(g>>24&255)/N;x=j.lerp(t,u,d)|0;v=j.lerp(r,s,d)|0;o=j.lerp(p,q,d)|0;n=j.lerp(l,m,d)*N;return n<<24&4.27819008E9|x<<16&16711680|v<<8&65280|o&255};j.colorMode=function(){aq=arguments[0];if(arguments.length>1){W=arguments[1];ad=arguments[2]||arguments[1];X=arguments[3]||arguments[1];N=arguments[4]||arguments[1]}};j.blendColor=function(e,g,d){if(d===0){return j.modes.replace(e,g)}else {if(d===1){return j.modes.blend(e,g)}else {if(d===2){return j.modes.add(e,g)}else {if(d===4){return j.modes.subtract(e,g)}else {if(d===8){return j.modes.lightest(e,g)}else {if(d===16){return j.modes.darkest(e,g)}else {if(d===32){return j.modes.difference(e,g)}else {if(d===64){return j.modes.exclusion(e,g)}else {if(d===128){return j.modes.multiply(e,g)}else {if(d===256){return j.modes.screen(e,g)}else {if(d===1024){return j.modes.hard_light(e,g)}else {if(d===2048){return j.modes.soft_light(e,g)}else {if(d===512){return j.modes.overlay(e,g)}else {if(d===4096){return j.modes.dodge(e,g)}else {if(d===8192){return j.modes.burn(e,g)}}}}}}}}}}}}}}}};function saveContext(){k.save()}function restoreContext(){k.restore();a6=!0;aw=!0}j.printMatrix=function(){B.print()};w.prototype.translate=function(d,e){B.translate(d,e);L.invTranslate(d,e);k.translate(d,e)};y.prototype.translate=function(d,e,g){B.translate(d,e,g);L.invTranslate(d,e,g)};w.prototype.scale=function(d,e){B.scale(d,e);L.invScale(d,e);k.scale(d,e||d)};y.prototype.scale=function(d,e,g){B.scale(d,e,g);L.invScale(d,e,g)};w.prototype.transform=function(e){var d=e.array();k.transform(d[0],d[3],d[1],d[4],d[2],d[5])};y.prototype.transformm=function(d){throw 'p.transform is currently not supported in 3D mode'};w.prototype.pushMatrix=function(){aO.load(B);aJ.load(L);saveContext()};y.prototype.pushMatrix=function(){aO.load(B);aJ.load(L)};w.prototype.popMatrix=function(){B.set(aO.pop());L.set(aJ.pop());restoreContext()};y.prototype.popMatrix=function(){B.set(aO.pop());L.set(aJ.pop())};w.prototype.resetMatrix=function(){B.reset();L.reset();k.setTransform(1,0,0,1,0,0)};y.prototype.resetMatrix=function(){B.reset();L.reset()};G.prototype.applyMatrix=function(){var d=arguments;B.apply(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15]);L.invApply(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15])};w.prototype.applyMatrix=function(){var d=arguments;for(var e=d.length;e<16;e++){d[e]=0}d[10]=d[15]=1;G.prototype.applyMatrix.apply(this,d)};j.rotateX=function(d){B.rotateX(d);L.invRotateX(d)};w.prototype.rotateZ=function(){throw 'rotateZ() is not supported in 2D mode. Use rotate(float) instead.'};y.prototype.rotateZ=function(d){B.rotateZ(d);L.invRotateZ(d)};j.rotateY=function(d){B.rotateY(d);L.invRotateY(d)};w.prototype.rotate=function(d){B.rotateZ(d);L.invRotateZ(d);k.rotate(d)};y.prototype.rotate=function(d){j.rotateZ(d)};w.prototype.shearX=function(d){B.shearX(d);k.transform(1,0,d,1,0,0)};y.prototype.shearX=function(d){B.shearX(d)};w.prototype.shearY=function(d){B.shearY(d);k.transform(1,d,0,1,0,0)};y.prototype.shearY=function(d){B.shearY(d)};j.pushStyle=function(){saveContext();j.pushMatrix();var d={'doFill':H,'currentFillColor':au,'doStroke':D,'currentStrokeColor':at,'curTint':az,'curRectMode':ac,'curColorMode':aq,'colorModeX':W,'colorModeZ':X,'colorModeY':ad,'colorModeA':N,'curTextFont':I,'horizontalTextAlignment':aA,'verticalTextAlignment':an,'textMode':bg,'curFontName':aQ,'curTextSize':ai,'curTextAscent':ao,'curTextDescent':ag,'curTextLeading':$};b7.push(d)};j.popStyle=function(){var d=b7.pop();if(d){restoreContext();j.popMatrix();H=d.doFill;au=d.currentFillColor;D=d.doStroke;at=d.currentStrokeColor;az=d.curTint;ac=d.curRectMode;aq=d.curColorMode;W=d.colorModeX;X=d.colorModeZ;ad=d.colorModeY;N=d.colorModeA;I=d.curTextFont;aQ=d.curFontName;ai=d.curTextSize;aA=d.horizontalTextAlignment;an=d.verticalTextAlignment;bg=d.textMode;ao=d.curTextAscent;ag=d.curTextDescent;$=d.curTextLeading}else {throw 'Too many popStyle() without enough pushStyle()'}};j.year=function(){return (new Date()).getFullYear()};j.month=function(){return (new Date()).getMonth()+1};j.day=function(){return (new Date()).getDate()};j.hour=function(){return (new Date()).getHours()};j.minute=function(){return (new Date()).getMinutes()};j.second=function(){return (new Date()).getSeconds()};j.millis=function(){return Date.now()-cg};function redrawHelper(){var d=(Date.now()-bn)/1000;a1++;var e=a1/d;if(d>0.5){bn=Date.now();a1=0;j.__frameRate=e}j.frameCount++}w.prototype.redraw=function(){redrawHelper();k.lineWidth=O;var d=j.pmouseX,e=j.pmouseY;j.pmouseX=a3;j.pmouseY=a4;saveContext();j.draw();restoreContext();a3=j.mouseX;a4=j.mouseY;j.pmouseX=d;j.pmouseY=e};y.prototype.redraw=function(){redrawHelper();var d=j.pmouseX,e=j.pmouseY;j.pmouseX=a3;j.pmouseY=a4;k.clear(k.DEPTH_BUFFER_BIT);ab={attributes:{},locations:{}};j.noLights();j.lightFalloff(1,0,0);j.shininess(1);j.ambient(255,255,255);j.specular(0,0,0);j.emissive(0,0,0);j.camera();j.draw();a3=j.mouseX;a4=j.mouseY;j.pmouseX=d;j.pmouseY=e};j.noLoop=function(){aG=!1;a9=!1;clearInterval(bi);K.onPause()};j.loop=function(){if(a9){return}bn=Date.now();a1=0;bi=f.setInterval(function(){try{K.onFrameStart();j.redraw();K.onFrameEnd()}catch(cK){f.clearInterval(bi);throw cK}},bY);aG=!0;a9=!0;K.onLoop()};j.frameRate=function(d){bs=d;bY=1000/bs;if(aG){j.noLoop();j.loop()}};var aP=[];function attachEventHandler(d,e,g){if(d.addEventListener){d.addEventListener(e,g,!1)}else {d.attachEvent('on'+e,g)}aP.push({elem:d,type:e,fn:g})}function detachEventHandler(e){var d=e.elem,g=e.type,h=e.fn;if(d.removeEventListener){d.removeEventListener(g,h,!1)}else {if(d.detachEvent){d.detachEvent('on'+g,h)}}}j.exit=function(){f.clearInterval(bi);t(j.externals.canvas.id);delete p.onmousedown;for(var e in d.lib){if(d.lib.hasOwnProperty(e)){if(d.lib[e].hasOwnProperty('detach')){d.lib[e].detach(j)}}}var g=aP.length;while(g--){detachEventHandler(aP[g])}K.onExit()};j.cursor=function(){if(arguments.length>1||arguments.length===1&&arguments[0] instanceof j.PImage){var d=arguments[0],e,g;if(arguments.length>=3){e=arguments[1];g=arguments[2];if(e<0||g<0||g>=d.height||e>=d.width){throw 'x and y must be non-negative and less than the dimensions of the image'}}else {e=d.width>>>1;g=d.height>>>1}var h=d.toDataURL();var i='url("'+h+'") '+e+' '+g+', default';be=p.style.cursor=i}else {if(arguments.length===1){var k=arguments[0];be=p.style.cursor=k}else {be=p.style.cursor=cz}}};j.noCursor=function(){be=p.style.cursor=l.NOCURSOR};j.link=function(e,d){if(d!==b){f.open(e,d)}else {f.location=e}};j.beginDraw=h;j.endDraw=h;w.prototype.toImageData=function(g,h,e,d){g=g!==b?g:0;h=h!==b?h:0;e=e!==b?e:j.width;d=d!==b?d:j.height;return k.getImageData(g,h,e,d)};y.prototype.toImageData=function(h,i,d,e){h=h!==b?h:0;i=i!==b?i:0;d=d!==b?d:j.width;e=e!==b?e:j.height;var q=c.createElement('canvas'),o=q.getContext('2d'),m=o.createImageData(d,e),l=new s(d*e*4);k.readPixels(h,i,d,e,k.RGBA,k.UNSIGNED_BYTE,l);for(var g=0,p=l.length,n=m.data;g<p;g++){n[g]=l[(e-1-a.floor(g/4/d))*d*4+g%(d*4)]}return m};j.status=function(d){f.status=d};j.binary=function(e,g){var d;if(g>0){d=g}else {if(e instanceof Y){d=16;e|=0}else {d=32;while(d>1&&!(e>>>d-1&1)){d--}}}var h='';while(d>0){h+=e>>>--d&1?'1':'0'}return h};j.unbinary=function(e){var i=e.length-1,h=1,g=0;while(i>=0){var d=e[i--];if(d!=='0'&&d!=='1'){throw 'the value passed into unbinary was not an 8 bit binary number'}if(d==='1'){g+=h}h<<=1}return g};function nfCoreScalar(o,t,s,r,i,n){var p=o<0?s:t;var q=i===0;var g=i===b||i<0?0:i;var e=a.abs(o);if(q){g=1;e*=10;while(a.abs(a.round(e)-e)>1.0E-6&&g<7){++g;e*=10}}else {if(g!==0){e*=a.pow(10,g)}}var h,l=e*2;if(a.floor(e)===e){h=e}else {if(a.floor(l)===l){var m=a.floor(e);h=m+m%2}else {h=a.round(e)}}var d='';var k=r+g;while(k>0||h>0){k--;d=''+h%10+d;h=a.floor(h/10)}if(n!==b){var j=d.length-3-g;while(j>0){d=d.substring(0,j)+n+d.substring(j);j-=3}}if(g>0){return p+d.substring(0,d.length-g)+'.'+d.substring(d.length-g,d.length)}return p+d}function nfCore(d,k,j,h,g,i){if(d instanceof Array){var l=[];for(var e=0,m=d.length;e<m;e++){l.push(nfCoreScalar(d[e],k,j,h,g,i))}return l}return nfCoreScalar(d,k,j,h,g,i)}j.nf=function(g,e,d){return nfCore(g,'','-',e,d)};j.nfs=function(g,e,d){return nfCore(g,' ','-',e,d)};j.nfp=function(g,e,d){return nfCore(g,'+','-',e,d)};j.nfc=function(g,e,d){return nfCore(g,'','-',e,d,',')};var cu=function(g,e){e=e===b||e===null?e=8:e;if(g<0){g=4.294967295E9+g+1}var d=Number(g).toString(16).toUpperCase();while(d.length<e){d='0'+d}if(d.length>=e){d=d.substring(d.length-e,d.length)}return d};j.hex=function(e,d){if(arguments.length===1){if(e instanceof Y){d=4}else {d=8}}return cu(e,d)};function unhexScalar(e){var d=parseInt('0x'+e,16);if(d>2147483647){d-=4.294967296E9}return d}j.unhex=function(d){if(d instanceof Array){var g=[];for(var e=0;e<d.length;e++){g.push(unhexScalar(d[e]))}return g}return unhexScalar(d)};j.loadStrings=function(e){if(localStorage[e]){return localStorage[e].split('\n')}var d=r(e);if(typeof d!=='string'||d===''){return []}d=d.replace(/(\r\n?)/g,'\n').replace(/\n$/,'');return d.split('\n')};j.saveStrings=function(d,e){localStorage[d]=e.join('\n')};j.loadBytes=function(h){var e=r(h);var g=[];for(var d=0;d<e.length;d++){g.push(e.charCodeAt(d))}return g};function removeFirstArgument(d){return Array.prototype.slice.call(d,1)}j.matchAll=function(i,h){var d=[],e;var g=new RegExp(h,'g');while((e=g.exec(i))!==null){d.push(e);if(e[0].length===0){++g.lastIndex}}return d.length>0?d:null};j.__contains=function(d,e){if(typeof d!=='string'){return d.contains.apply(d,removeFirstArgument(arguments))}return d!==null&&e!==null&&typeof e==='string'&&d.indexOf(e)>-1};j.__replaceAll=function(d,g,e){if(typeof d!=='string'){return d.replaceAll.apply(d,removeFirstArgument(arguments))}return d.replace(new RegExp(g,'g'),e)};j.__replaceFirst=function(d,g,e){if(typeof d!=='string'){return d.replaceFirst.apply(d,removeFirstArgument(arguments))}return d.replace(new RegExp(g,''),e)};j.__replace=function(d,e,i){if(typeof d!=='string'){return d.replace.apply(d,removeFirstArgument(arguments))}if(e instanceof RegExp){return d.replace(e,i)}if(typeof e!=='string'){e=e.toString()}if(e===''){return d}var g=d.indexOf(e);if(g<0){return d}var h=0,j='';do{j+=d.substring(h,g)+i;h=g+e.length}while((g=d.indexOf(e,h))>=0);return j+d.substring(h)};j.__equals=function(d,e){if(d.equals instanceof Function){return d.equals.apply(d,removeFirstArgument(arguments))}return d.valueOf()===e.valueOf()};j.__equalsIgnoreCase=function(d,e){if(typeof d!=='string'){return d.equalsIgnoreCase.apply(d,removeFirstArgument(arguments))}return d.toLowerCase()===e.toLowerCase()};j.__toCharArray=function(d){if(typeof d!=='string'){return d.toCharArray.apply(d,removeFirstArgument(arguments))}var g=[];for(var e=0,h=d.length;e<h;++e){g[e]=new Y(d.charAt(e))}return g};j.__split=function(e,l,j){if(typeof e!=='string'){return e.split.apply(e,removeFirstArgument(arguments))}var i=new RegExp(l);if(j===b||j<1){return e.split(i)}var g=[],d=e,h;while((h=d.search(i))!==-1&&g.length<j-1){var k=i.exec(d).toString();g.push(d.substring(0,h));d=d.substring(h+k.length)}if(h!==-1||d!==''){g.push(d)}return g};j.__codePointAt=function(e,g){var d=e.charCodeAt(g),i,h;if(55296<=d&&d<=56319){i=d;h=e.charCodeAt(g+1);return (i-55296)*1024+(h-56320)+65536}return d};j.match=function(e,d){return e.match(d)};j.__matches=function(e,d){return (new RegExp(d)).test(e)};j.__startsWith=function(d,g,e){if(typeof d!=='string'){return d.startsWith.apply(d,removeFirstArgument(arguments))}e=e||0;if(e<0||e>d.length){return !1}return g===''||g===d?!0:d.indexOf(g)===e};j.__endsWith=function(d,e){if(typeof d!=='string'){return d.endsWith.apply(d,removeFirstArgument(arguments))}var g=e?e.length:0;return e===''||e===d?!0:d.indexOf(e)===d.length-g};j.__hashCode=function(d){if(d.hashCode instanceof Function){return d.hashCode.apply(d,removeFirstArgument(arguments))}return virtHashCode(d)};j.__printStackTrace=function(d){j.println('Exception: '+d.toString())};var bf=[];j.println=function(g){var e=bf.length;if(e){d.logger.log(bf.join(''));bf.length=0}if(arguments.length===0&&e===0){d.logger.log('')}else {if(arguments.length!==0){d.logger.log(g)}}};j.print=function(d){bf.push(d)};j.str=function(d){if(d instanceof Array){var g=[];for(var e=0;e<d.length;e++){g.push(d[e].toString()+'')}return g}return d.toString()+''};j.trim=function(d){if(d instanceof Array){var g=[];for(var e=0;e<d.length;e++){g.push(d[e].replace(/^\s*/,'').replace(/\s*$/,'').replace(/\r*$/,''))}return g}return d.replace(/^\s*/,'').replace(/\s*$/,'').replace(/\r*$/,'')};function booleanScalar(d){if(typeof d==='number'){return d!==0}if(typeof d==='boolean'){return d}if(typeof d==='string'){return d.toLowerCase()==='true'}if(d instanceof Y){return d.code===49||d.code===84||d.code===116}}j.parseBoolean=function(d){if(d instanceof Array){var g=[];for(var e=0;e<d.length;e++){g.push(booleanScalar(d[e]))}return g}return booleanScalar(d)};j.parseByte=function(d){if(d instanceof Array){var g=[];for(var e=0;e<d.length;e++){g.push(0-(d[e]&128)|d[e]&127)}return g}return 0-(d&128)|d&127};j.parseChar=function(d){if(typeof d==='number'){return new Y(String.fromCharCode(d&65535))}if(d instanceof Array){var g=[];for(var e=0;e<d.length;e++){g.push(new Y(String.fromCharCode(d[e]&65535)))}return g}throw 'char() may receive only one argument of type int, byte, int[], or byte[].'};function floatScalar(d){if(typeof d==='number'){return d}if(typeof d==='boolean'){return d?1:0}if(typeof d==='string'){return parseFloat(d)}if(d instanceof Y){return d.code}}j.parseFloat=function(d){if(d instanceof Array){var g=[];for(var e=0;e<d.length;e++){g.push(floatScalar(d[e]))}return g}return floatScalar(d)};function intScalar(d,g){if(typeof d==='number'){return d&4.294967295E9}if(typeof d==='boolean'){return d?1:0}if(typeof d==='string'){var e=parseInt(d,g||10);return e&4.294967295E9}if(d instanceof Y){return d.code}}j.parseInt=function(d,h){if(d instanceof Array){var g=[];for(var e=0;e<d.length;e++){if(typeof d[e]==='string'&&!/^\s*[+\-]?\d+\s*$/.test(d[e])){g.push(0)}else {g.push(intScalar(d[e],h))}}return g}return intScalar(d,h)};j.__int_cast=function(d){return 0|d};j.__instanceof=function(h,e){if(typeof e!=='function'){throw 'Function is expected as type argument for instanceof operator'}if(typeof h==='string'){return e===Object||e===String}if(h instanceof e){return !0}if(typeof h!=='object'||h===null){return !1}var d=h.constructor;if(e.$isInterface){var g=[];while(d){if(d.$interfaces){g=g.concat(d.$interfaces)}d=d.$base}while(g.length>0){var i=g.shift();if(i===e){return !0}if(i.$interfaces){g=g.concat(i.$interfaces)}}return !1}while(d.hasOwnProperty('$base')){d=d.$base;if(d===e){return !0}}return !1};j.abs=a.abs;j.ceil=a.ceil;j.constrain=function(d,g,e){return d>e?e:d<g?g:d};j.dist=function(){var d,e,g;if(arguments.length===4){d=arguments[0]-arguments[2];e=arguments[1]-arguments[3];return a.sqrt(d*d+e*e)}if(arguments.length===6){d=arguments[0]-arguments[3];e=arguments[1]-arguments[4];g=arguments[2]-arguments[5];return a.sqrt(d*d+e*e+g*g)}};j.exp=a.exp;j.floor=a.floor;j.lerp=function(d,e,g){return (e-d)*g+d};j.log=a.log;j.mag=function(d,e,g){if(g){return a.sqrt(d*d+e*e+g*g)}return a.sqrt(d*d+e*e)};j.map=function(i,d,g,e,h){return e+(h-e)*((i-d)/(g-d))};j.max=function(){if(arguments.length===2){return arguments[0]<arguments[1]?arguments[1]:arguments[0]}var d=arguments.length===1?arguments[0]:arguments;if(!('length' in d&&d.length>0)){throw 'Non-empty array is expected'}var g=d[0],h=d.length;for(var e=1;e<h;++e){if(g<d[e]){g=d[e]}}return g};j.min=function(){if(arguments.length===2){return arguments[0]<arguments[1]?arguments[0]:arguments[1]}var d=arguments.length===1?arguments[0]:arguments;if(!('length' in d&&d.length>0)){throw 'Non-empty array is expected'}var g=d[0],h=d.length;for(var e=1;e<h;++e){if(g>d[e]){g=d[e]}}return g};j.norm=function(e,d,g){return (e-d)/(g-d)};j.pow=a.pow;j.round=a.round;j.sq=function(d){return d*d};j.sqrt=a.sqrt;j.acos=a.acos;j.asin=a.asin;j.atan=a.atan;j.atan2=a.atan2;j.cos=a.cos;j.degrees=function(d){return d*180/a.PI};j.radians=function(d){return d/180*a.PI};j.sin=a.sin;j.tan=a.tan;var a5=a.random;j.random=function(){if(arguments.length===0){return a5()}if(arguments.length===1){return a5()*arguments[0]}var d=arguments[0],e=arguments[1];return a5()*(e-d)+d};function Marsaglia(h,i){var e=h||362436069,d=i||521288629;var g=function(){e=36969*(e&65535)+(e>>>16)&4.294967295E9;d=18000*(d&65535)+(d>>>16)&4.294967295E9;return ((e&65535)<<16|d&65535)&4.294967295E9};this.nextDouble=function(){var d=g()/4.294967296E9;return d<0?1+d:d};this.nextInt=g}Marsaglia.createRandomized=function(){var d=new Date();return new Marsaglia(d/60000&4.294967295E9,d&4.294967295E9)};j.randomSeed=function(d){a5=(new Marsaglia(d)).nextDouble};j.Random=function(h){var d=!1,g,e;this.nextGaussian=function(){if(d){d=!1;return g}var j,k,i;do{j=2*e()-1;k=2*e()-1;i=j*j+k*k}while(i>=1||i===0);var l=a.sqrt(-2*a.log(i)/i);g=k*l;d=!0;return j*l};e=h===b?a.random:(new Marsaglia(h)).nextDouble};function PerlinNoise(g){var i=g!==b?new Marsaglia(g):Marsaglia.createRandomized();var e,h;var d=new s(512);for(e=0;e<256;++e){d[e]=e}for(e=0;e<256;++e){var j=d[h=i.nextInt()&255];d[h]=d[e];d[e]=j}for(e=0;e<256;++e){d[e+256]=d[e]}function grad3d(k,i,j,l){var d=k&15;var e=d<8?i:j,h=d<4?j:d===12||d===14?i:l;return ((d&1)===0?e:-e)+((d&2)===0?h:-h)}function grad2d(d,h,i){var e=(d&1)===0?h:i;return (d&2)===0?-e:e}function grad1d(e,d){return (e&1)===0?-d:d}function lerp(h,d,e){return d+h*(e-d)}this.noise3d=function(e,h,i){var s=a.floor(e)&255,t=a.floor(h)&255,k=a.floor(i)&255;e-=a.floor(e);h-=a.floor(h);i-=a.floor(i);var j=(3-2*e)*e*e,p=(3-2*h)*h*h,u=(3-2*i)*i*i;var q=d[s]+t,l=d[q]+k,m=d[q+1]+k,r=d[s+1]+t,n=d[r]+k,o=d[r+1]+k;return lerp(u,lerp(p,lerp(j,grad3d(d[l],e,h,i),grad3d(d[n],e-1,h,i)),lerp(j,grad3d(d[m],e,h-1,i),grad3d(d[o],e-1,h-1,i))),lerp(p,lerp(j,grad3d(d[l+1],e,h,i-1),grad3d(d[n+1],e-1,h,i-1)),lerp(j,grad3d(d[m+1],e,h-1,i-1),grad3d(d[o+1],e-1,h-1,i-1))))};this.noise2d=function(e,h){var l=a.floor(e)&255,m=a.floor(h)&255;e-=a.floor(e);h-=a.floor(h);var i=(3-2*e)*e*e,n=(3-2*h)*h*h;var j=d[l]+m,k=d[l+1]+m;return lerp(n,lerp(i,grad2d(d[j],e,h),grad2d(d[k],e-1,h)),lerp(i,grad2d(d[j+1],e,h-1),grad2d(d[k+1],e-1,h-1)))};this.noise1d=function(e){var h=a.floor(e)&255;e-=a.floor(e);var i=(3-2*e)*e*e;return lerp(i,grad1d(d[h],e),grad1d(d[h+1],e-1))}}var ah={generator:b,octaves:4,fallout:0.5,seed:b};j.noise=function(i,k,l){if(ah.generator===b){ah.generator=new PerlinNoise(ah.seed)}var h=ah.generator;var e=1,d=1,g=0;for(var j=0;j<ah.octaves;++j){e*=ah.fallout;switch(arguments.length){case 1:g+=e*(1+h.noise1d(d*i))/2;break;case 2:g+=e*(1+h.noise2d(d*i,d*k))/2;break;case 3:g+=e*(1+h.noise3d(d*i,d*k,d*l))/2;break;}d*=2}return g};j.noiseDetail=function(e,d){ah.octaves=e;if(d!==b){ah.fallout=d}};j.noiseSeed=function(d){ah.seed=d;ah.generator=b};G.prototype.size=function(i,h,l){if(D){j.stroke(0)}if(H){j.fill(255)}var e={fillStyle:k.fillStyle,strokeStyle:k.strokeStyle,lineCap:k.lineCap,lineJoin:k.lineJoin};if(p.style.length>0){p.style.removeProperty('width');p.style.removeProperty('height')}p.width=j.width=i||100;p.height=j.height=h||100;for(var g in e){if(e.hasOwnProperty(g)){k[g]=e[g]}}j.textFont(I);j.background();bR=a.max(1000,i*h*0.05);j.externals.context=k;for(var d=0;d<720;d++){a$[d]=j.sin(d*(a.PI/180)*0.5);aZ[d]=j.cos(d*(a.PI/180)*0.5)}};w.prototype.size=function(e,d,g){if(k===b){k=p.getContext('2d');aO=new ap();aJ=new ap();B=new ar();L=new ar()}G.prototype.size.apply(this,arguments)};y.prototype.size=function(){var g=!1;return function size(i,h,l){if(g){throw 'Multiple calls to size() for 3D renders are not allowed.'}g=!0;function getGLContext(j){var g=['experimental-webgl','webgl','webkit-3d'],d;for(var e=0,k=g.length;e<k;e++){d=j.getContext(g[e],{antialias:!1,preserveDrawingBuffer:!0});if(d){break}}return d}try{p.width=j.width=i||100;p.height=j.height=h||100;k=getGLContext(p);ce=k.createTexture();cc=k.createTexture()}catch(cK){d.debug(cK)}if(!k){throw 'WebGL context is not supported on this browser.'}k.viewport(0,0,p.width,p.height);k.enable(k.DEPTH_TEST);k.enable(k.BLEND);k.blendFunc(k.SRC_ALPHA,k.ONE_MINUS_SRC_ALPHA);A=bj(k,cn,ck);P=bj(k,ci,ch);j.strokeWeight(1);o=bj(k,co,cl);k.useProgram(o);uniformi('usingTexture3d',o,'usingTexture',T);j.lightFalloff(1,0,0);j.shininess(1);j.ambient(255,255,255);j.specular(0,0,0);j.emissive(0,0,0);bA=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,bA);k.bufferData(k.ARRAY_BUFFER,ca,k.STATIC_DRAW);bq=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,bq);k.bufferData(k.ARRAY_BUFFER,cC,k.STATIC_DRAW);bm=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,bm);k.bufferData(k.ARRAY_BUFFER,bO,k.STATIC_DRAW);bc=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,bc);k.bufferData(k.ARRAY_BUFFER,bC,k.STATIC_DRAW);bp=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,bp);k.bufferData(k.ARRAY_BUFFER,cA,k.STATIC_DRAW);aX=k.createBuffer();bx=k.createBuffer();b6=k.createBuffer();bo=k.createBuffer();bL=k.createBuffer();b4=k.createBuffer();ba=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,ba);k.bufferData(k.ARRAY_BUFFER,new e([0,0,0]),k.STATIC_DRAW);by=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,by);k.bufferData(k.ARRAY_BUFFER,new e([1,1,0,-1,1,0,-1,-1,0,1,-1,0]),k.STATIC_DRAW);br=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,br);k.bufferData(k.ARRAY_BUFFER,new e([0,0,1,0,1,1,0,1]),k.STATIC_DRAW);bv=k.createBuffer();k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,bv);k.bufferData(k.ELEMENT_ARRAY_BUFFER,new u([0,1,2,2,3,0]),k.STATIC_DRAW);aI=new z();aj=new z();B=new z();L=new z();ae=new z();j.camera();j.perspective();aO=new ap();aJ=new ap();aV=new z();a0=new z();aN=new z();aL=new z();bk=new z();bl=new z();bl.set(-1,3,-3,1,3,-6,3,0,-3,3,0,0,1,0,0,0);G.prototype.size.apply(this,arguments)}}();w.prototype.ambientLight=G.prototype.a3DOnlyFunction;y.prototype.ambientLight=function(m,l,j,n,p,q){if(C===8){throw 'can only create '+8+' lights'}var g=new i(n,p,q);var d=new z();d.scale(1,-1,1);d.apply(B.array());d.mult(g,g);var e=color$4(m,l,j,0);var h=[(e>>16&255)/255,(e>>8&255)/255,(e&255)/255];k.useProgram(o);uniformf('uLights.color.3d.'+C,o,'uLights'+C+'.color',h);uniformf('uLights.position.3d.'+C,o,'uLights'+C+'.position',g.array());uniformi('uLights.type.3d.'+C,o,'uLights'+C+'.type',0);uniformi('uLightCount3d',o,'uLightCount',++C)};w.prototype.directionalLight=G.prototype.a3DOnlyFunction;y.prototype.directionalLight=function(p,n,m,g,h,i){if(C===8){throw 'can only create '+8+' lights'}k.useProgram(o);var d=new z();d.scale(1,-1,1);d.apply(B.array());d=d.array();var l=[d[0]*g+d[4]*h+d[8]*i,d[1]*g+d[5]*h+d[9]*i,d[2]*g+d[6]*h+d[10]*i];var e=color$4(p,n,m,0);var j=[(e>>16&255)/255,(e>>8&255)/255,(e&255)/255];uniformf('uLights.color.3d.'+C,o,'uLights'+C+'.color',j);uniformf('uLights.position.3d.'+C,o,'uLights'+C+'.position',l);uniformi('uLights.type.3d.'+C,o,'uLights'+C+'.type',1);uniformi('uLightCount3d',o,'uLightCount',++C)};w.prototype.lightFalloff=G.prototype.a3DOnlyFunction;y.prototype.lightFalloff=function(e,g,d){k.useProgram(o);uniformf('uFalloff3d',o,'uFalloff',[e,g,d])};w.prototype.lightSpecular=G.prototype.a3DOnlyFunction;y.prototype.lightSpecular=function(i,h,g){var d=color$4(i,h,g,0);var e=[(d>>16&255)/255,(d>>8&255)/255,(d&255)/255];k.useProgram(o);uniformf('uSpecular3d',o,'uSpecular',e)};j.lights=function(){j.ambientLight(128,128,128);j.directionalLight(128,128,128,0,0,-1);j.lightFalloff(1,0,0);j.lightSpecular(0,0,0)};w.prototype.pointLight=G.prototype.a3DOnlyFunction;y.prototype.pointLight=function(m,l,j,n,p,q){if(C===8){throw 'can only create '+8+' lights'}var g=new i(n,p,q);var d=new z();d.scale(1,-1,1);d.apply(B.array());d.mult(g,g);var e=color$4(m,l,j,0);var h=[(e>>16&255)/255,(e>>8&255)/255,(e&255)/255];k.useProgram(o);uniformf('uLights.color.3d.'+C,o,'uLights'+C+'.color',h);uniformf('uLights.position.3d.'+C,o,'uLights'+C+'.position',g.array());uniformi('uLights.type.3d.'+C,o,'uLights'+C+'.type',2);uniformi('uLightCount3d',o,'uLightCount',++C)};w.prototype.noLights=G.prototype.a3DOnlyFunction;y.prototype.noLights=function(){C=0;k.useProgram(o);uniformi('uLightCount3d',o,'uLightCount',C)};w.prototype.spotLight=G.prototype.a3DOnlyFunction;y.prototype.spotLight=function(t,s,r,u,v,w,h,j,l,p,m){if(C===8){throw 'can only create '+8+' lights'}k.useProgram(o);var g=new i(u,v,w);var d=new z();d.scale(1,-1,1);d.apply(B.array());d.mult(g,g);d=d.array();var q=[d[0]*h+d[4]*j+d[8]*l,d[1]*h+d[5]*j+d[9]*l,d[2]*h+d[6]*j+d[10]*l];var e=color$4(t,s,r,0);var n=[(e>>16&255)/255,(e>>8&255)/255,(e&255)/255];uniformf('uLights.color.3d.'+C,o,'uLights'+C+'.color',n);uniformf('uLights.position.3d.'+C,o,'uLights'+C+'.position',g.array());uniformf('uLights.direction.3d.'+C,o,'uLights'+C+'.direction',q);uniformf('uLights.concentration.3d.'+C,o,'uLights'+C+'.concentration',m);uniformf('uLights.angle.3d.'+C,o,'uLights'+C+'.angle',p);uniformi('uLights.type.3d.'+C,o,'uLights'+C+'.type',3);uniformi('uLightCount3d',o,'uLightCount',++C)};w.prototype.beginCamera=function(){throw 'beginCamera() is not available in 2D mode'};y.prototype.beginCamera=function(){if(a2){throw 'You cannot call beginCamera() again before calling endCamera()'}a2=!0;B=aj;L=aI};w.prototype.endCamera=function(){throw 'endCamera() is not available in 2D mode'};y.prototype.endCamera=function(){if(!a2){throw 'You cannot call endCamera() before calling beginCamera()'}B.set(aI);L.set(aj);a2=!1};j.camera=function(g,k,l,m,n,o,p,q,r){if(g===b){bE=j.width/2;aE=j.height/2;aF=aE/a.tan(bd/2);g=bE;k=aE;l=aF;m=bE;n=aE;o=0;p=0;q=1;r=0}var e=new i(g-m,k-n,l-o);var d=new i(p,q,r);e.normalize();var h=i.cross(d,e);d=i.cross(e,h);h.normalize();d.normalize();var s=h.x,t=h.y,u=h.z;var v=d.x,w=d.y,x=d.z;var y=e.x,z=e.y,A=e.z;aI.set(s,t,u,0,v,w,x,0,y,z,A,0,0,0,0,1);aI.translate(-g,-k,-l);aj.reset();aj.invApply(s,t,u,0,v,w,x,0,y,z,A,0,0,0,0,1);aj.translate(g,k,l);B.set(aI);L.set(aj)};j.perspective=function(m,e,g,l){if(arguments.length===0){aE=p.height/2;aF=aE/a.tan(bd/2);b5=aF/10;b8=aF*10;b1=j.width/j.height;m=bd;e=b1;g=b5;l=b8}var d,h,i,k;d=g*a.tan(m/2);h=-d;i=d*e;k=h*e;j.frustum(k,i,h,d,g,l)};w.prototype.frustum=function(){throw 'Processing.js: frustum() is not supported in 2D mode'};y.prototype.frustum=function(j,i,h,l,d,g){b3=!0;ae=new z();ae.set(2*d/(i-j),0,(i+j)/(i-j),0,0,2*d/(l-h),(l+h)/(l-h),0,0,0,-(g+d)/(g-d),-(2*g*d)/(g-d),0,0,-1,0);var e=new z();e.set(ae);e.transpose();k.useProgram(A);uniformMatrix('projection2d',A,'uProjection',!1,e.array());k.useProgram(o);uniformMatrix('projection3d',o,'uProjection',!1,e.array());k.useProgram(P);uniformMatrix('uProjectionUS',P,'uProjection',!1,e.array())};j.ortho=function(h,g,e,m,i,l){if(arguments.length===0){h=0;g=j.width;e=0;m=j.height;i=-10;l=10}var r=2/(g-h);var s=2/(m-e);var t=-2/(l-i);var n=-(g+h)/(g-h);var p=-(m+e)/(m-e);var q=-(l+i)/(l-i);ae=new z();ae.set(r,0,0,n,0,s,0,p,0,0,t,q,0,0,0,1);var d=new z();d.set(ae);d.transpose();k.useProgram(A);uniformMatrix('projection2d',A,'uProjection',!1,d.array());k.useProgram(o);uniformMatrix('projection3d',o,'uProjection',!1,d.array());k.useProgram(P);uniformMatrix('uProjectionUS',P,'uProjection',!1,d.array());b3=!1};j.printProjection=function(){ae.print()};j.printCamera=function(){aI.print()};w.prototype.box=G.prototype.a3DOnlyFunction;y.prototype.box=function(m,i,h){if(!i||!h){i=h=m}var g=new z();g.scale(m,i,h);var d=new z();d.scale(1,-1,1);d.apply(B.array());d.transpose();if(H){k.useProgram(o);uniformMatrix('model3d',o,'uModel',!1,g.array());uniformMatrix('view3d',o,'uView',!1,d.array());k.enable(k.POLYGON_OFFSET_FILL);k.polygonOffset(1,1);uniformf('color3d',o,'uColor',Z);if(C>0){var j=new z();j.set(d);var l=new z();l.set(g);j.mult(l);var e=new z();e.set(j);e.invert();e.transpose();uniformMatrix('uNormalTransform3d',o,'uNormalTransform',!1,e.array());vertexAttribPointer('aNormal3d',o,'aNormal',3,bq)}else {disableVertexAttribPointer('aNormal3d',o,'aNormal')}vertexAttribPointer('aVertex3d',o,'aVertex',3,bA);disableVertexAttribPointer('aColor3d',o,'aColor');disableVertexAttribPointer('aTexture3d',o,'aTexture');k.drawArrays(k.TRIANGLES,0,ca.length/3);k.disable(k.POLYGON_OFFSET_FILL)}if(O>0&&D){k.useProgram(A);uniformMatrix('uModel2d',A,'uModel',!1,g.array());uniformMatrix('uView2d',A,'uView',!1,d.array());uniformf('uColor2d',A,'uColor',V);uniformi('uIsDrawingText2d',A,'uIsDrawingText',!1);vertexAttribPointer('vertex2d',A,'aVertex',3,bm);disableVertexAttribPointer('aTextureCoord2d',A,'aTextureCoord');k.drawArrays(k.LINES,0,bO.length/3)}};var cw=function(){var d;E=[];for(d=0;d<aD;d++){E.push(0);E.push(-1);E.push(0);E.push(ak[d]);E.push(al[d]);E.push(am[d])}E.push(0);E.push(-1);E.push(0);E.push(ak[0]);E.push(al[0]);E.push(am[0]);var i,j,g;var h=0;for(d=2;d<a7;d++){i=j=h;h+=aD;g=h;for(var l=0;l<aD;l++){E.push(ak[i]);E.push(al[i]);E.push(am[i++]);E.push(ak[g]);E.push(al[g]);E.push(am[g++])}i=j;g=h;E.push(ak[i]);E.push(al[i]);E.push(am[i]);E.push(ak[g]);E.push(al[g]);E.push(am[g])}for(d=0;d<aD;d++){g=h+d;E.push(ak[g]);E.push(al[g]);E.push(am[g]);E.push(0);E.push(1);E.push(0)}E.push(ak[h]);E.push(al[h]);E.push(am[h]);E.push(0);E.push(1);E.push(0);k.bindBuffer(k.ARRAY_BUFFER,aX);k.bufferData(k.ARRAY_BUFFER,new e(E),k.STATIC_DRAW)};j.sphereDetail=function(d,h){var g;if(arguments.length===1){d=h=arguments[0]}if(d<3){d=3}if(h<2){h=2}if(d===aD&&h===a7){return}var o=720/d;var p=new e(d);var q=new e(d);for(g=0;g<d;g++){p[g]=aZ[g*o%720|0];q[g]=a$[g*o%720|0]}var j=d*(h-1)+2;var k=0;ak=new e(j);al=new e(j);am=new e(j);var m=720*0.5/h;var l=m;for(g=1;g<h;g++){var n=a$[l%720|0];var r=-aZ[l%720|0];for(var i=0;i<d;i++){ak[k]=p[i]*n;al[k]=r;am[k++]=q[i]*n}l+=m}aD=d;a7=h;cw()};w.prototype.sphere=G.prototype.a3DOnlyFunction;y.prototype.sphere=function(){var h=arguments[0];if(aD<3||a7<2){j.sphereDetail(30)}var g=new z();g.scale(h,h,h);var d=new z();d.scale(1,-1,1);d.apply(B.array());d.transpose();if(H){if(C>0){var i=new z();i.set(d);var l=new z();l.set(g);i.mult(l);var e=new z();e.set(i);e.invert();e.transpose();uniformMatrix('uNormalTransform3d',o,'uNormalTransform',!1,e.array());vertexAttribPointer('aNormal3d',o,'aNormal',3,aX)}else {disableVertexAttribPointer('aNormal3d',o,'aNormal')}k.useProgram(o);disableVertexAttribPointer('aTexture3d',o,'aTexture');uniformMatrix('uModel3d',o,'uModel',!1,g.array());uniformMatrix('uView3d',o,'uView',!1,d.array());vertexAttribPointer('aVertex3d',o,'aVertex',3,aX);disableVertexAttribPointer('aColor3d',o,'aColor');k.enable(k.POLYGON_OFFSET_FILL);k.polygonOffset(1,1);uniformf('uColor3d',o,'uColor',Z);k.drawArrays(k.TRIANGLE_STRIP,0,E.length/3);k.disable(k.POLYGON_OFFSET_FILL)}if(O>0&&D){k.useProgram(A);uniformMatrix('uModel2d',A,'uModel',!1,g.array());uniformMatrix('uView2d',A,'uView',!1,d.array());vertexAttribPointer('aVertex2d',A,'aVertex',3,aX);disableVertexAttribPointer('aTextureCoord2d',A,'aTextureCoord');uniformf('uColor2d',A,'uColor',V);uniformi('uIsDrawingText',A,'uIsDrawingText',!1);k.drawArrays(k.LINE_STRIP,0,E.length/3)}};j.modelX=function(g,h,i){var d=B.array();var e=aj.array();var k=d[0]*g+d[1]*h+d[2]*i+d[3];var l=d[4]*g+d[5]*h+d[6]*i+d[7];var m=d[8]*g+d[9]*h+d[10]*i+d[11];var j=d[12]*g+d[13]*h+d[14]*i+d[15];var o=e[0]*k+e[1]*l+e[2]*m+e[3]*j;var n=e[12]*k+e[13]*l+e[14]*m+e[15]*j;return n!==0?o/n:o};j.modelY=function(g,h,i){var d=B.array();var e=aj.array();var k=d[0]*g+d[1]*h+d[2]*i+d[3];var l=d[4]*g+d[5]*h+d[6]*i+d[7];var m=d[8]*g+d[9]*h+d[10]*i+d[11];var j=d[12]*g+d[13]*h+d[14]*i+d[15];var o=e[4]*k+e[5]*l+e[6]*m+e[7]*j;var n=e[12]*k+e[13]*l+e[14]*m+e[15]*j;return n!==0?o/n:o};j.modelZ=function(g,h,i){var d=B.array();var e=aj.array();var k=d[0]*g+d[1]*h+d[2]*i+d[3];var l=d[4]*g+d[5]*h+d[6]*i+d[7];var m=d[8]*g+d[9]*h+d[10]*i+d[11];var j=d[12]*g+d[13]*h+d[14]*i+d[15];var o=e[8]*k+e[9]*l+e[10]*m+e[11]*j;var n=e[12]*k+e[13]*l+e[14]*m+e[15]*j;return n!==0?o/n:o};w.prototype.ambient=G.prototype.a3DOnlyFunction;y.prototype.ambient=function(e,g,h){k.useProgram(o);uniformi('uUsingMat3d',o,'uUsingMat',!0);var d=j.color(e,g,h);uniformf('uMaterialAmbient3d',o,'uMaterialAmbient',j.color.toGLArray(d).slice(0,3))};w.prototype.emissive=G.prototype.a3DOnlyFunction;y.prototype.emissive=function(e,g,h){k.useProgram(o);uniformi('uUsingMat3d',o,'uUsingMat',!0);var d=j.color(e,g,h);uniformf('uMaterialEmissive3d',o,'uMaterialEmissive',j.color.toGLArray(d).slice(0,3))};w.prototype.shininess=G.prototype.a3DOnlyFunction;y.prototype.shininess=function(d){k.useProgram(o);uniformi('uUsingMat3d',o,'uUsingMat',!0);uniformf('uShininess3d',o,'uShininess',d)};w.prototype.specular=G.prototype.a3DOnlyFunction;y.prototype.specular=function(e,g,h){k.useProgram(o);uniformi('uUsingMat3d',o,'uUsingMat',!0);var d=j.color(e,g,h);uniformf('uMaterialSpecular3d',o,'uMaterialSpecular',j.color.toGLArray(d).slice(0,3))};j.screenX=function(g,h,i){var d=B.array();if(d.length===16){var l=d[0]*g+d[1]*h+d[2]*i+d[3];var m=d[4]*g+d[5]*h+d[6]*i+d[7];var n=d[8]*g+d[9]*h+d[10]*i+d[11];var k=d[12]*g+d[13]*h+d[14]*i+d[15];var e=ae.array();var p=e[0]*l+e[1]*m+e[2]*n+e[3]*k;var o=e[12]*l+e[13]*m+e[14]*n+e[15]*k;if(o!==0){p/=o}return j.width*(1+p)/2}return B.multX(g,h)};j.screenY=function screenY(g,h,i){var d=B.array();if(d.length===16){var l=d[0]*g+d[1]*h+d[2]*i+d[3];var m=d[4]*g+d[5]*h+d[6]*i+d[7];var n=d[8]*g+d[9]*h+d[10]*i+d[11];var k=d[12]*g+d[13]*h+d[14]*i+d[15];var e=ae.array();var p=e[4]*l+e[5]*m+e[6]*n+e[7]*k;var o=e[12]*l+e[13]*m+e[14]*n+e[15]*k;if(o!==0){p/=o}return j.height*(1+p)/2}return B.multY(g,h)};j.screenZ=function screenZ(g,h,i){var d=B.array();if(d.length!==16){return 0}var e=ae.array();var k=d[0]*g+d[1]*h+d[2]*i+d[3];var l=d[4]*g+d[5]*h+d[6]*i+d[7];var m=d[8]*g+d[9]*h+d[10]*i+d[11];var j=d[12]*g+d[13]*h+d[14]*i+d[15];var o=e[8]*k+e[9]*l+e[10]*m+e[11]*j;var n=e[12]*k+e[13]*l+e[14]*m+e[15]*j;if(n!==0){o/=n}return (o+1)/2};G.prototype.fill=function(){var d=j.color(arguments[0],arguments[1],arguments[2],arguments[3]);if(d===au&&H){return}H=!0;au=d};w.prototype.fill=function(){G.prototype.fill.apply(this,arguments);aw=!0};y.prototype.fill=function(){G.prototype.fill.apply(this,arguments);Z=j.color.toGLArray(au)};function executeContextFill(){if(H){if(aw){k.fillStyle=j.color.toString(au);aw=!1}k.fill()}}j.noFill=function(){H=!1};G.prototype.stroke=function(){var d=j.color(arguments[0],arguments[1],arguments[2],arguments[3]);if(d===at&&D){return}D=!0;at=d};w.prototype.stroke=function(){G.prototype.stroke.apply(this,arguments);a6=!0};y.prototype.stroke=function(){G.prototype.stroke.apply(this,arguments);V=j.color.toGLArray(at)};function executeContextStroke(){if(D){if(a6){k.strokeStyle=j.color.toString(at);a6=!1}k.stroke()}}j.noStroke=function(){D=!1};G.prototype.strokeWeight=function(d){O=d};w.prototype.strokeWeight=function(d){G.prototype.strokeWeight.apply(this,arguments);k.lineWidth=d};y.prototype.strokeWeight=function(d){G.prototype.strokeWeight.apply(this,arguments);k.useProgram(A);uniformf('pointSize2d',A,'uPointSize',d);k.useProgram(P);uniformf('pointSizeUnlitShape',P,'uPointSize',d);k.lineWidth(d)};j.strokeCap=function(d){M.$ensureContext().lineCap=d};j.strokeJoin=function(d){M.$ensureContext().lineJoin=d};w.prototype.smooth=function(){av=!0;var d=p.style;d.setProperty('image-rendering','optimizeQuality','important');d.setProperty('-ms-interpolation-mode','bicubic','important');if(k.hasOwnProperty('mozImageSmoothingEnabled')){k.mozImageSmoothingEnabled=!0}};y.prototype.smooth=function(){av=!0};w.prototype.noSmooth=function(){av=!1;var d=p.style;d.setProperty('image-rendering','optimizeSpeed','important');d.setProperty('image-rendering','-moz-crisp-edges','important');d.setProperty('image-rendering','-webkit-optimize-contrast','important');d.setProperty('image-rendering','optimize-contrast','important');d.setProperty('-ms-interpolation-mode','nearest-neighbor','important');if(k.hasOwnProperty('mozImageSmoothingEnabled')){k.mozImageSmoothingEnabled=!1}};y.prototype.noSmooth=function(){av=!1};w.prototype.point=function(d,e){if(!D){return}d=a.round(d);e=a.round(e);k.fillStyle=j.color.toString(at);aw=!0;if(O>1){k.beginPath();k.arc(d,e,O/2,0,6.283185307179586,!1);k.fill()}else {k.fillRect(d,e,1,1)}};y.prototype.point=function(g,h,i){var e=new z();e.translate(g,h,i||0);e.transpose();var d=new z();d.scale(1,-1,1);d.apply(B.array());d.transpose();k.useProgram(A);uniformMatrix('uModel2d',A,'uModel',!1,e.array());uniformMatrix('uView2d',A,'uView',!1,d.array());if(O>0&&D){uniformf('uColor2d',A,'uColor',V);uniformi('uIsDrawingText2d',A,'uIsDrawingText',!1);uniformi('uSmooth2d',A,'uSmooth',av);vertexAttribPointer('aVertex2d',A,'aVertex',3,ba);disableVertexAttribPointer('aTextureCoord2d',A,'aTextureCoord');k.drawArrays(k.POINTS,0,1)}};j.beginShape=function(d){J=d;cv=[];n=[]};w.prototype.vertex=function(g,h,e){var d=[];if(ay){ay=!1}d['isVert']=!0;d[0]=g;d[1]=h;d[2]=0;d[3]=0;d[4]=0;d[5]=au;d[6]=at;n.push(d);if(e){n[n.length-1]['moveTo']=e}};y.prototype.vertex=function(i,j,h,e,g){var d=[];if(ay){ay=!1}d['isVert']=!0;if(g===b&&T){g=e;e=h;h=0}if(e!==b&&g!==b){if(bW===2){e/=aR.width;g/=aR.height}e=e>1?1:e;e=e<0?0:e;g=g>1?1:g;g=g<0?0:g}d[0]=i;d[1]=j;d[2]=h||0;d[3]=e||0;d[4]=g||0;d[5]=Z[0];d[6]=Z[1];d[7]=Z[2];d[8]=Z[3];d[9]=V[0];d[10]=V[1];d[11]=V[2];d[12]=V[3];d[13]=bG;d[14]=bH;d[15]=bI;n.push(d)};var cb=function(g,h){var d=new z();d.scale(1,-1,1);d.apply(B.array());d.transpose();k.useProgram(P);uniformMatrix('uViewUS',P,'uView',!1,d.array());uniformi('uSmoothUS',P,'uSmooth',av);vertexAttribPointer('aVertexUS',P,'aVertex',3,ba);k.bufferData(k.ARRAY_BUFFER,new e(g),k.STREAM_DRAW);vertexAttribPointer('aColorUS',P,'aColor',4,bo);k.bufferData(k.ARRAY_BUFFER,new e(h),k.STREAM_DRAW);k.drawArrays(k.POINTS,0,g.length/3)};var aa=function(h,i,j){var d;if(i==='LINES'){d=k.LINES}else {if(i==='LINE_LOOP'){d=k.LINE_LOOP}else {d=k.LINE_STRIP}}var g=new z();g.scale(1,-1,1);g.apply(B.array());g.transpose();k.useProgram(P);uniformMatrix('uViewUS',P,'uView',!1,g.array());vertexAttribPointer('aVertexUS',P,'aVertex',3,bx);k.bufferData(k.ARRAY_BUFFER,new e(h),k.STREAM_DRAW);vertexAttribPointer('aColorUS',P,'aColor',4,bL);k.bufferData(k.ARRAY_BUFFER,new e(j),k.STREAM_DRAW);k.drawArrays(d,0,h.length/3)};var as=function(i,j,h,l){var d;if(j==='TRIANGLES'){d=k.TRIANGLES}else {if(j==='TRIANGLE_FAN'){d=k.TRIANGLE_FAN}else {d=k.TRIANGLE_STRIP}}var g=new z();g.scale(1,-1,1);g.apply(B.array());g.transpose();k.useProgram(o);uniformMatrix('model3d',o,'uModel',!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);uniformMatrix('view3d',o,'uView',!1,g.array());k.enable(k.POLYGON_OFFSET_FILL);k.polygonOffset(1,1);uniformf('color3d',o,'uColor',[-1,0,0,0]);vertexAttribPointer('vertex3d',o,'aVertex',3,b6);k.bufferData(k.ARRAY_BUFFER,new e(i),k.STREAM_DRAW);if(T&&az!==null){bB(h)}vertexAttribPointer('aColor3d',o,'aColor',4,bo);k.bufferData(k.ARRAY_BUFFER,new e(h),k.STREAM_DRAW);disableVertexAttribPointer('aNormal3d',o,'aNormal');if(T){uniformi('uUsingTexture3d',o,'uUsingTexture',T);vertexAttribPointer('aTexture3d',o,'aTexture',2,b4);k.bufferData(k.ARRAY_BUFFER,new e(l),k.STREAM_DRAW)}k.drawArrays(d,0,i.length/3);k.disable(k.POLYGON_OFFSET_FILL)};function fillStrokeClose(){executeContextFill();executeContextStroke();k.closePath()}w.prototype.endShape=function(s){if(n.length===0){return}var o=s===2;if(o){n.push(n[0])}var t=[];var r=[];var q=[];var p=[];var m=[];var e;ay=!0;var d,h,u;var g=n.length;for(d=0;d<g;d++){e=n[d];for(h=0;h<3;h++){r.push(e[h])}}for(d=0;d<g;d++){e=n[d];for(h=5;h<9;h++){q.push(e[h])}}for(d=0;d<g;d++){e=n[d];for(h=9;h<13;h++){p.push(e[h])}}for(d=0;d<g;d++){e=n[d];m.push(e[3]);m.push(e[4])}if(aT&&(J===20||J===b)){if(g>3){var i=[],l=1-bt;k.beginPath();k.moveTo(n[1][0],n[1][1]);for(d=1;d+2<g;d++){e=n[d];i[0]=[e[0],e[1]];i[1]=[e[0]+(l*n[d+1][0]-l*n[d-1][0])/6,e[1]+(l*n[d+1][1]-l*n[d-1][1])/6];i[2]=[n[d+1][0]+(l*n[d][0]-l*n[d+2][0])/6,n[d+1][1]+(l*n[d][1]-l*n[d+2][1])/6];i[3]=[n[d+1][0],n[d+1][1]];k.bezierCurveTo(i[1][0],i[1][1],i[2][0],i[2][1],i[3][0],i[3][1])}fillStrokeClose()}}else {if(aS&&(J===20||J===b)){k.beginPath();for(d=0;d<g;d++){e=n[d];if(n[d]['isVert']){if(n[d]['moveTo']){k.moveTo(e[0],e[1])}else {k.lineTo(e[0],e[1])}}else {k.bezierCurveTo(n[d][0],n[d][1],n[d][2],n[d][3],n[d][4],n[d][5])}}fillStrokeClose()}else {if(J===2){for(d=0;d<g;d++){e=n[d];if(D){j.stroke(e[6])}j.point(e[0],e[1])}}else {if(J===4){for(d=0;d+1<g;d+=2){e=n[d];if(D){j.stroke(n[d+1][6])}j.line(e[0],e[1],n[d+1][0],n[d+1][1])}}else {if(J===9){for(d=0;d+2<g;d+=3){e=n[d];k.beginPath();k.moveTo(e[0],e[1]);k.lineTo(n[d+1][0],n[d+1][1]);k.lineTo(n[d+2][0],n[d+2][1]);k.lineTo(e[0],e[1]);if(H){j.fill(n[d+2][5]);executeContextFill()}if(D){j.stroke(n[d+2][6]);executeContextStroke()}k.closePath()}}else {if(J===10){for(d=0;d+1<g;d++){e=n[d];k.beginPath();k.moveTo(n[d+1][0],n[d+1][1]);k.lineTo(e[0],e[1]);if(D){j.stroke(n[d+1][6])}if(H){j.fill(n[d+1][5])}if(d+2<g){k.lineTo(n[d+2][0],n[d+2][1]);if(D){j.stroke(n[d+2][6])}if(H){j.fill(n[d+2][5])}}fillStrokeClose()}}else {if(J===11){if(g>2){k.beginPath();k.moveTo(n[0][0],n[0][1]);k.lineTo(n[1][0],n[1][1]);k.lineTo(n[2][0],n[2][1]);if(H){j.fill(n[2][5]);executeContextFill()}if(D){j.stroke(n[2][6]);executeContextStroke()}k.closePath();for(d=3;d<g;d++){e=n[d];k.beginPath();k.moveTo(n[0][0],n[0][1]);k.lineTo(n[d-1][0],n[d-1][1]);k.lineTo(e[0],e[1]);if(H){j.fill(e[5]);executeContextFill()}if(D){j.stroke(e[6]);executeContextStroke()}k.closePath()}}}else {if(J===16){for(d=0;d+3<g;d+=4){e=n[d];k.beginPath();k.moveTo(e[0],e[1]);for(h=1;h<4;h++){k.lineTo(n[d+h][0],n[d+h][1])}k.lineTo(e[0],e[1]);if(H){j.fill(n[d+3][5]);executeContextFill()}if(D){j.stroke(n[d+3][6]);executeContextStroke()}k.closePath()}}else {if(J===17){if(g>3){for(d=0;d+1<g;d+=2){e=n[d];k.beginPath();if(d+3<g){k.moveTo(n[d+2][0],n[d+2][1]);k.lineTo(e[0],e[1]);k.lineTo(n[d+1][0],n[d+1][1]);k.lineTo(n[d+3][0],n[d+3][1]);if(H){j.fill(n[d+3][5])}if(D){j.stroke(n[d+3][6])}}else {k.moveTo(e[0],e[1]);k.lineTo(n[d+1][0],n[d+1][1])}fillStrokeClose()}}}else {k.beginPath();k.moveTo(n[0][0],n[0][1]);for(d=1;d<g;d++){e=n[d];if(e['isVert']){if(e['moveTo']){k.moveTo(e[0],e[1])}else {k.lineTo(e[0],e[1])}}}fillStrokeClose()}}}}}}}}}aT=!1;aS=!1;S=[];Q=0;if(o){n.pop()}};y.prototype.endShape=function(t){if(n.length===0){return}var r=t===2;var g=[];var l=[];var q=[];var i=[];var m=[];var j;ay=!0;var e,d,h;var p=n.length;for(e=0;e<p;e++){j=n[e];for(d=0;d<3;d++){l.push(j[d])}}for(e=0;e<p;e++){j=n[e];for(d=5;d<9;d++){q.push(j[d])}}for(e=0;e<p;e++){j=n[e];for(d=9;d<13;d++){i.push(j[d])}}for(e=0;e<p;e++){j=n[e];m.push(j[3]);m.push(j[4])}if(r){l.push(n[0][0]);l.push(n[0][1]);l.push(n[0][2]);for(e=5;e<9;e++){q.push(n[0][e])}for(e=9;e<13;e++){i.push(n[0][e])}m.push(n[0][3]);m.push(n[0][4])}if(aT&&(J===20||J===b)){g=l;if(D){aa(g,null,i)}if(H){as(l,null,q)}}else {if(aS&&(J===20||J===b)){g=l;g.splice(g.length-3);i.splice(i.length-4);if(D){aa(g,null,i)}if(H){as(l,'TRIANGLES',q)}}else {if(J===2){for(e=0;e<p;e++){j=n[e];for(d=0;d<3;d++){g.push(j[d])}}cb(g,i)}else {if(J===4){for(e=0;e<p;e++){j=n[e];for(d=0;d<3;d++){g.push(j[d])}}for(e=0;e<p;e++){j=n[e];for(d=5;d<9;d++){q.push(j[d])}}aa(g,'LINES',i)}else {if(J===9){if(p>2){for(e=0;e+2<p;e+=3){l=[];m=[];g=[];q=[];i=[];for(d=0;d<3;d++){for(h=0;h<3;h++){g.push(n[e+d][h]);l.push(n[e+d][h])}}for(d=0;d<3;d++){for(h=3;h<5;h++){m.push(n[e+d][h])}}for(d=0;d<3;d++){for(h=5;h<9;h++){q.push(n[e+d][h]);i.push(n[e+d][h+4])}}if(D){aa(g,'LINE_LOOP',i)}if(H||T){as(l,'TRIANGLES',q,m)}}}}else {if(J===10){if(p>2){for(e=0;e+2<p;e++){g=[];l=[];i=[];q=[];m=[];for(d=0;d<3;d++){for(h=0;h<3;h++){g.push(n[e+d][h]);l.push(n[e+d][h])}}for(d=0;d<3;d++){for(h=3;h<5;h++){m.push(n[e+d][h])}}for(d=0;d<3;d++){for(h=5;h<9;h++){i.push(n[e+d][h+4]);q.push(n[e+d][h])}}if(H||T){as(l,'TRIANGLE_STRIP',q,m)}if(D){aa(g,'LINE_LOOP',i)}}}}else {if(J===11){if(p>2){for(e=0;e<3;e++){j=n[e];for(d=0;d<3;d++){g.push(j[d])}}for(e=0;e<3;e++){j=n[e];for(d=9;d<13;d++){i.push(j[d])}}if(D){aa(g,'LINE_LOOP',i)}for(e=2;e+1<p;e++){g=[];i=[];g.push(n[0][0]);g.push(n[0][1]);g.push(n[0][2]);i.push(n[0][9]);i.push(n[0][10]);i.push(n[0][11]);i.push(n[0][12]);for(d=0;d<2;d++){for(h=0;h<3;h++){g.push(n[e+d][h])}}for(d=0;d<2;d++){for(h=9;h<13;h++){i.push(n[e+d][h])}}if(D){aa(g,'LINE_STRIP',i)}}if(H||T){as(l,'TRIANGLE_FAN',q,m)}}}else {if(J===16){for(e=0;e+3<p;e+=4){g=[];for(d=0;d<4;d++){j=n[e+d];for(h=0;h<3;h++){g.push(j[h])}}if(D){aa(g,'LINE_LOOP',i)}if(H){l=[];q=[];m=[];for(d=0;d<3;d++){l.push(n[e][d])}for(d=5;d<9;d++){q.push(n[e][d])}for(d=0;d<3;d++){l.push(n[e+1][d])}for(d=5;d<9;d++){q.push(n[e+1][d])}for(d=0;d<3;d++){l.push(n[e+3][d])}for(d=5;d<9;d++){q.push(n[e+3][d])}for(d=0;d<3;d++){l.push(n[e+2][d])}for(d=5;d<9;d++){q.push(n[e+2][d])}if(T){m.push(n[e+0][3]);m.push(n[e+0][4]);m.push(n[e+1][3]);m.push(n[e+1][4]);m.push(n[e+3][3]);m.push(n[e+3][4]);m.push(n[e+2][3]);m.push(n[e+2][4])}as(l,'TRIANGLE_STRIP',q,m)}}}else {if(J===17){var s=[];if(p>3){for(e=0;e<2;e++){j=n[e];for(d=0;d<3;d++){g.push(j[d])}}for(e=0;e<2;e++){j=n[e];for(d=9;d<13;d++){i.push(j[d])}}aa(g,'LINE_STRIP',i);if(p>4&&p%2>0){s=l.splice(l.length-3);n.pop()}for(e=0;e+3<p;e+=2){g=[];i=[];for(d=0;d<3;d++){g.push(n[e+1][d])}for(d=0;d<3;d++){g.push(n[e+3][d])}for(d=0;d<3;d++){g.push(n[e+2][d])}for(d=0;d<3;d++){g.push(n[e+0][d])}for(d=9;d<13;d++){i.push(n[e+1][d])}for(d=9;d<13;d++){i.push(n[e+3][d])}for(d=9;d<13;d++){i.push(n[e+2][d])}for(d=9;d<13;d++){i.push(n[e+0][d])}if(D){aa(g,'LINE_STRIP',i)}}if(H||T){as(l,'TRIANGLE_LIST',q,m)}}}else {if(p===1){for(d=0;d<3;d++){g.push(n[0][d])}for(d=9;d<13;d++){i.push(n[0][d])}cb(g,i)}else {for(e=0;e<p;e++){j=n[e];for(d=0;d<3;d++){g.push(j[d])}for(d=5;d<9;d++){i.push(j[d])}}if(D&&r){aa(g,'LINE_LOOP',i)}else {if(D&&!r){aa(g,'LINE_STRIP',i)}}if(H||T){as(l,'TRIANGLE_FAN',q,m)}}}}}}}}}T=!1;k.useProgram(o);uniformi('usingTexture3d',o,'uUsingTexture',T)}}aT=!1;aS=!1;S=[];Q=0};var b0=function(h,i){var d=1/h;var g=d*d;var e=g*d;i.set(0,0,0,1,e,g,d,0,6*e,2*g,0,0,6*e,0,0,0)};var b9=function(){if(!aN){aV=new z();aN=new z();b2=!0}var d=bt;aV.set((d-1)/2,(d+3)/2,(-3-d)/2,(1-d)/2,1-d,(-5-d)/2,d+2,(d-1)/2,(d-1)/2,0,(1-d)/2,0,0,1,0,0);b0(bD,aN);if(!bk){a0=new z()}a0.set(aV);a0.preApply(bk);aN.apply(aV)};w.prototype.bezierVertex=function(){aS=!0;var e=[];if(ay){throw 'vertex() must be used at least once before calling bezierVertex()'}for(var d=0;d<arguments.length;d++){e[d]=arguments[d]}n.push(e);n[n.length-1]['isVert']=!1};y.prototype.bezierVertex=function(){aS=!0;var v=[];if(ay){throw 'vertex() must be used at least once before calling bezierVertex()'}if(arguments.length===9){if(aL===b){aL=new z()}var i=n.length-1;b0(bz,aL);aL.apply(bl);var d=aL.array();var e=n[i][0],g=n[i][1],h=n[i][2];var k=d[4]*e+d[5]*arguments[0]+d[6]*arguments[3]+d[7]*arguments[6];var l=d[8]*e+d[9]*arguments[0]+d[10]*arguments[3]+d[11]*arguments[6];var s=d[12]*e+d[13]*arguments[0]+d[14]*arguments[3]+d[15]*arguments[6];var m=d[4]*g+d[5]*arguments[1]+d[6]*arguments[4]+d[7]*arguments[7];var o=d[8]*g+d[9]*arguments[1]+d[10]*arguments[4]+d[11]*arguments[7];var t=d[12]*g+d[13]*arguments[1]+d[14]*arguments[4]+d[15]*arguments[7];var p=d[4]*h+d[5]*arguments[2]+d[6]*arguments[5]+d[7]*arguments[8];var q=d[8]*h+d[9]*arguments[2]+d[10]*arguments[5]+d[11]*arguments[8];var u=d[12]*h+d[13]*arguments[2]+d[14]*arguments[5]+d[15]*arguments[8];for(var r=0;r<bz;r++){e+=k;k+=l;l+=s;g+=m;m+=o;o+=t;h+=p;p+=q;q+=u;j.vertex(e,g,h)}j.vertex(arguments[6],arguments[7],arguments[8])}};j.texture=function(e){var d=M.$ensureContext();if(e.__texture){d.bindTexture(d.TEXTURE_2D,e.__texture)}else {if(e.localName==='canvas'){d.bindTexture(d.TEXTURE_2D,ce);d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,e);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR);d.generateMipmap(d.TEXTURE_2D);aR.width=e.width;aR.height=e.height}else {var i=d.createTexture(),g=c.createElement('canvas'),j=g.getContext('2d'),h;if(e.width&e.width-1===0){g.width=e.width}else {h=1;while(h<e.width){h*=2}g.width=h}if(e.height&e.height-1===0){g.height=e.height}else {h=1;while(h<e.height){h*=2}g.height=h}j.drawImage(e.sourceImg,0,0,e.width,e.height,0,0,g.width,g.height);d.bindTexture(d.TEXTURE_2D,i);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR_MIPMAP_LINEAR);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE);d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,g);d.generateMipmap(d.TEXTURE_2D);e.__texture=i;aR.width=e.width;aR.height=e.height}}T=!0;d.useProgram(o);uniformi('usingTexture3d',o,'uUsingTexture',T)};j.textureMode=function(d){bW=d};var cm=function(k,o,s,e,g,h,l,p,t,m,q,u){var i=e;var n=g;var r=h;var d=aN.array();var v=d[4]*k+d[5]*e+d[6]*l+d[7]*m;var w=d[8]*k+d[9]*e+d[10]*l+d[11]*m;var C=d[12]*k+d[13]*e+d[14]*l+d[15]*m;var x=d[4]*o+d[5]*g+d[6]*p+d[7]*q;var y=d[8]*o+d[9]*g+d[10]*p+d[11]*q;var D=d[12]*o+d[13]*g+d[14]*p+d[15]*q;var z=d[4]*s+d[5]*h+d[6]*t+d[7]*u;var A=d[8]*s+d[9]*h+d[10]*t+d[11]*u;var E=d[12]*s+d[13]*h+d[14]*t+d[15]*u;j.vertex(i,n,r);for(var B=0;B<bD;B++){i+=v;v+=w;w+=C;n+=x;x+=y;y+=D;r+=z;z+=A;A+=E;j.vertex(i,n,r)}};w.prototype.curveVertex=function(d,e){aT=!0;j.vertex(d,e)};y.prototype.curveVertex=function(e,g,h){aT=!0;if(!b2){b9()}var d=[];d[0]=e;d[1]=g;d[2]=h;S.push(d);Q++;if(Q>3){cm(S[Q-4][0],S[Q-4][1],S[Q-4][2],S[Q-3][0],S[Q-3][1],S[Q-3][2],S[Q-2][0],S[Q-2][1],S[Q-2][2],S[Q-1][0],S[Q-1][1],S[Q-1][2])}};w.prototype.curve=function(d,i,e,k,g,l,h,m){j.beginShape();j.curveVertex(d,i);j.curveVertex(e,k);j.curveVertex(g,l);j.curveVertex(h,m);j.endShape()};y.prototype.curve=function(d,h,l,e,i,m,g,k,q,o,p,n){if(n!==b){j.beginShape();j.curveVertex(d,h,l);j.curveVertex(e,i,m);j.curveVertex(g,k,q);j.curveVertex(o,p,n);j.endShape();return}j.beginShape();j.curveVertex(d,h);j.curveVertex(l,e);j.curveVertex(i,m);j.curveVertex(g,k);j.endShape()};j.curveTightness=function(d){bt=d};j.curveDetail=function(d){bD=d;b9()};j.rectMode=function(d){ac=d};j.imageMode=function(d){switch(d){case 0:aM=bQ;break;case 1:aM=cp;break;case 3:aM=cs;break;default:throw 'Invalid imageMode';}};j.ellipseMode=function(d){U=d};j.arc=function(k,l,d,g,h,m){if(d<=0||m<h){return}if(U===1){d=d-k;g=g-l}else {if(U===2){k=k-d;l=l-g;d=d*2;g=g*2}else {if(U===3){k=k-d/2;l=l-g/2}}}while(h<0){h+=6.283185307179586;m+=6.283185307179586}if(m-h>6.283185307179586){h=0;m=6.283185307179586}var p=d/2,q=g/2,n=k+p,o=l+q,r=0|0.5+h*j.RAD_TO_DEG*2,s=0|0.5+m*j.RAD_TO_DEG*2,e,i;if(H){var t=D;D=!1;j.beginShape();j.vertex(n,o);for(e=r;e<=s;e++){i=e%720;j.vertex(n+aZ[i]*p,o+a$[i]*q)}j.endShape(2);D=t}if(D){var u=H;H=!1;j.beginShape();for(e=r;e<=s;e++){i=e%720;j.vertex(n+aZ[i]*p,o+a$[i]*q)}j.endShape();H=u}};w.prototype.line=function(d,g,e,h){if(!D){return}d=a.round(d);e=a.round(e);g=a.round(g);h=a.round(h);if(d===e&&g===h){j.point(d,g);return}var l=b,n=b,i=!0,o=B.array(),p=[1,0,0,0,1,0];for(var m=0;m<6&&i;m++){i=o[m]===p[m]}if(i){if(d===e){if(g>h){l=g;g=h;h=l}h++;if(O%2===1){k.translate(0.5,0)}}else {if(g===h){if(d>e){l=d;d=e;e=l}e++;if(O%2===1){k.translate(0,0.5)}}}if(O===1){n=k.lineCap;k.lineCap='butt'}}k.beginPath();k.moveTo(d||0,g||0);k.lineTo(e||0,h||0);executeContextStroke();if(i){if(d===e&&O%2===1){k.translate(-0.5,0)}else {if(g===h&&O%2===1){k.translate(0,-0.5)}}if(O===1){k.lineCap=n}}};y.prototype.line=function(m,n,d,h,i,l){if(i===b||l===b){l=0;i=h;h=d;d=0}if(m===h&&n===i&&d===l){j.point(m,n,d);return}var o=[m,n,d,h,i,l];var g=new z();g.scale(1,-1,1);g.apply(B.array());g.transpose();if(O>0&&D){k.useProgram(A);uniformMatrix('uModel2d',A,'uModel',!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);uniformMatrix('uView2d',A,'uView',!1,g.array());uniformf('uColor2d',A,'uColor',V);uniformi('uIsDrawingText',A,'uIsDrawingText',!1);vertexAttribPointer('aVertex2d',A,'aVertex',3,bx);disableVertexAttribPointer('aTextureCoord2d',A,'aTextureCoord');k.bufferData(k.ARRAY_BUFFER,new e(o),k.STREAM_DRAW);k.drawArrays(k.LINES,0,2)}};w.prototype.bezier=function(){if(arguments.length!==8){throw 'You must use 8 parameters for bezier() in 2D mode'}j.beginShape();j.vertex(arguments[0],arguments[1]);j.bezierVertex(arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);j.endShape()};y.prototype.bezier=function(){if(arguments.length!==12){throw 'You must use 12 parameters for bezier() in 3D mode'}j.beginShape();j.vertex(arguments[0],arguments[1],arguments[2]);j.bezierVertex(arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);j.endShape()};j.bezierDetail=function(d){bz=d};j.bezierPoint=function(e,g,h,i,d){return (1-d)*(1-d)*(1-d)*e+3*(1-d)*(1-d)*d*g+3*(1-d)*d*d*h+d*d*d*i};j.bezierTangent=function(d,e,h,i,g){return 3*g*g*(-d+3*e-3*h+i)+6*g*(d-2*e+h)+3*(-d+e)};j.curvePoint=function(e,g,h,i,d){return 0.5*(2*g+(-e+h)*d+(2*e-5*g+4*h-i)*d*d+(-e+3*g-3*h+i)*d*d*d)};j.curveTangent=function(d,h,e,i,g){return 0.5*(-d+e+2*(2*d-5*h+4*e-i)*g+3*(-d+3*h-3*e+i)*g*g)};j.triangle=function(d,h,e,i,g,k){j.beginShape(9);j.vertex(d,h,0);j.vertex(e,i,0);j.vertex(g,k,0);j.endShape()};j.quad=function(d,i,e,k,g,l,h,m){j.beginShape(16);j.vertex(d,i,0);j.vertex(e,k,0);j.vertex(g,l,0);j.vertex(h,m,0);j.endShape()};var ct=function(d,e,l,j,g,o,n,m){if(m===b){o=g;n=g;m=g}var i=l/2,h=j/2;if(g>i||g>h){g=a.min(i,h)}if(o>i||o>h){o=a.min(i,h)}if(n>i||n>h){n=a.min(i,h)}if(m>i||m>h){m=a.min(i,h)}if(!H||D){k.translate(0.5,0.5)}k.beginPath();k.moveTo(d+g,e);k.lineTo(d+l-o,e);k.quadraticCurveTo(d+l,e,d+l,e+o);k.lineTo(d+l,e+j-n);k.quadraticCurveTo(d+l,e+j,d+l-n,e+j);k.lineTo(d+m,e+j);k.quadraticCurveTo(d,e+j,d,e+j-m);k.lineTo(d,e+g);k.quadraticCurveTo(d,e,d+g,e);if(!H||D){k.translate(-0.5,-0.5)}executeContextFill();executeContextStroke()};w.prototype.rect=function(g,h,e,d,i,m,l,j){if(!e&&!d){return}if(ac===1){e-=g;d-=h}else {if(ac===2){e*=2;d*=2;g-=e/2;h-=d/2}else {if(ac===3){g-=e/2;h-=d/2}}}g=a.round(g);h=a.round(h);e=a.round(e);d=a.round(d);if(i!==b){ct(g,h,e,d,i,m,l,j);return}if(D&&O%2===1){k.translate(0.5,0.5)}k.beginPath();k.rect(g,h,e,d);executeContextFill();executeContextStroke();if(D&&O%2===1){k.translate(-0.5,-0.5)}};y.prototype.rect=function(j,l,h,g,p,s,r,q){if(p!==b){throw 'rect() with rounded corners is not supported in 3D mode'}if(ac===1){h-=j;g-=l}else {if(ac===2){h*=2;g*=2;j-=h/2;l-=g/2}else {if(ac===3){j-=h/2;l-=g/2}}}var d=new z();d.translate(j,l,0);d.scale(h,g,1);d.transpose();var e=new z();e.scale(1,-1,1);e.apply(B.array());e.transpose();if(O>0&&D){k.useProgram(A);uniformMatrix('uModel2d',A,'uModel',!1,d.array());uniformMatrix('uView2d',A,'uView',!1,e.array());uniformf('uColor2d',A,'uColor',V);uniformi('uIsDrawingText2d',A,'uIsDrawingText',!1);vertexAttribPointer('aVertex2d',A,'aVertex',3,bc);disableVertexAttribPointer('aTextureCoord2d',A,'aTextureCoord');k.drawArrays(k.LINE_LOOP,0,bC.length/3)}if(H){k.useProgram(o);uniformMatrix('uModel3d',o,'uModel',!1,d.array());uniformMatrix('uView3d',o,'uView',!1,e.array());k.enable(k.POLYGON_OFFSET_FILL);k.polygonOffset(1,1);uniformf('color3d',o,'uColor',Z);if(C>0){var m=new z();m.set(e);var n=new z();n.set(d);m.mult(n);var i=new z();i.set(m);i.invert();i.transpose();uniformMatrix('uNormalTransform3d',o,'uNormalTransform',!1,i.array());vertexAttribPointer('aNormal3d',o,'aNormal',3,bp)}else {disableVertexAttribPointer('normal3d',o,'aNormal')}vertexAttribPointer('vertex3d',o,'aVertex',3,bc);k.drawArrays(k.TRIANGLE_FAN,0,bC.length/3);k.disable(k.POLYGON_OFFSET_FILL)}};w.prototype.ellipse=function(d,e,g,h){d=d||0;e=e||0;if(g<=0&&h<=0){return}if(U===2){g*=2;h*=2}else {if(U===1){g=g-d;h=h-e;d+=g/2;e+=h/2}else {if(U===0){d+=g/2;e+=h/2}}}if(g===h){k.beginPath();k.arc(d,e,g/2,0,6.283185307179586,!1);executeContextFill();executeContextStroke()}else {var i=g/2,l=h/2,o=0.5522847498307933,m=o*i,n=o*l;j.beginShape();j.vertex(d+i,e);j.bezierVertex(d+i,e-n,d+m,e-l,d,e-l);j.bezierVertex(d-m,e-l,d-i,e-n,d-i,e);j.bezierVertex(d-i,e+n,d-m,e+l,d,e+l);j.bezierVertex(d+m,e+l,d+i,e+n,d+i,e);j.endShape()}};y.prototype.ellipse=function(d,e,m,l){d=d||0;e=e||0;if(m<=0&&l<=0){return}if(U===2){m*=2;l*=2}else {if(U===1){m=m-d;l=l-e;d+=m/2;e+=l/2}else {if(U===0){d+=m/2;e+=l/2}}}var k=m/2,o=l/2,v=0.5522847498307933,p=v*k,q=v*o;j.beginShape();j.vertex(d+k,e);j.bezierVertex(d+k,e-q,0,d+p,e-o,0,d,e-o,0);j.bezierVertex(d-p,e-o,0,d-k,e-q,0,d-k,e,0);j.bezierVertex(d-k,e+q,0,d-p,e+o,0,d,e+o,0);j.bezierVertex(d+p,e+o,0,d+k,e+q,0,d+k,e,0);j.endShape();if(H){var r=0,s=0,h,i;for(h=0;h<n.length;h++){r+=n[h][0];s+=n[h][1]}r/=n.length;s/=n.length;var g=[],u=[],t=[];g[0]=r;g[1]=s;g[2]=0;g[3]=0;g[4]=0;g[5]=Z[0];g[6]=Z[1];g[7]=Z[2];g[8]=Z[3];g[9]=V[0];g[10]=V[1];g[11]=V[2];g[12]=V[3];g[13]=bG;g[14]=bH;g[15]=bI;n.unshift(g);for(h=0;h<n.length;h++){for(i=0;i<3;i++){u.push(n[h][i])}for(i=5;i<9;i++){t.push(n[h][i])}}as(u,'TRIANGLE_FAN',t)}};j.normal=function(d,e,g){if(arguments.length!==3||!(typeof d==='number'&&typeof e==='number'&&typeof g==='number')){throw 'normal() requires three numeric arguments.'}bG=d;bH=e;bI=g;if(J!==0){if(bb===0){bb=1}else {if(bb===1){bb=2}}}};j.save=function(e,d){if(d!==b){return f.open(d.toDataURL(),'_blank')}return f.open(j.externals.canvas.toDataURL(),'_blank')};var cx=0;j.saveFrame=function(d){if(d===b){d='screen-####.png'}var e=d.replace(/#+/,function(g){var e=''+cx++;while(e.length<g.length){e='0'+e}return e});j.save(e)};var cq=c.createElement('canvas').getContext('2d');var bP=[b,b,b];function getCanvasData(e,l,k){var d=bP.shift();if(d===b){d={};d.canvas=c.createElement('canvas');d.context=d.canvas.getContext('2d')}bP.push(d);var j=d.canvas,g=d.context,i=l||e.width,h=k||e.height;j.width=i;j.height=h;if(!e){g.clearRect(0,0,i,h)}else {if('data' in e){g.putImageData(e,0,0)}else {g.clearRect(0,0,i,h);g.drawImage(e,0,0,i,h)}}return d}function buildPixelsObject(d){return {getLength:function(e){return function(){if(e.isRemote){throw 'Image is loaded remotely. Cannot get length.'}else {return e.imageData.data.length?e.imageData.data.length/4:0}}}(d),getPixel:function(e){return function(i){var g=i*4,h=e.imageData.data;if(e.isRemote){throw 'Image is loaded remotely. Cannot get pixels.'}return (h[g+3]&255)<<24|(h[g]&255)<<16|(h[g+1]&255)<<8|h[g+2]&255}}(d),setPixel:function(e){return function(j,i){var g=j*4,h=e.imageData.data;if(e.isRemote){throw 'Image is loaded remotely. Cannot set pixel.'}h[g+0]=i>>16&255;h[g+1]=i>>8&255;h[g+2]=i&255;h[g+3]=i>>24&255;e.__isDirty=!0}}(d),toArray:function(e){return function(){var i=[],h=e.imageData.data,k=e.width*e.height;if(e.isRemote){throw 'Image is loaded remotely. Cannot get pixels.'}for(var j=0,g=0;j<k;j++,g+=4){i.push((h[g+3]&255)<<24|(h[g]&255)<<16|(h[g+1]&255)<<8|h[g+2]&255)}return i}}(d),set:function(e){return function(k){var g,h,i;if(this.isRemote){throw 'Image is loaded remotely. Cannot set pixels.'}h=e.imageData.data;for(var j=0,l=k.length;j<l;j++){i=k[j];g=j*4;h[g+0]=i>>16&255;h[g+1]=i>>8&255;h[g+2]=i&255;h[g+3]=i>>24&255}e.__isDirty=!0}}(d)}}var af=function(e,i,d){this.__isDirty=!1;if(e instanceof HTMLImageElement){this.fromHTMLImageData(e)}else {if(i||d){this.width=e||1;this.height=i||1;var g=this.sourceImg=c.createElement('canvas');g.width=this.width;g.height=this.height;var l=this.imageData=g.getContext('2d').createImageData(this.width,this.height);this.format=d===2||d===4?d:1;if(this.format===1){for(var h=3,j=this.imageData.data,k=j.length;h<k;h+=4){j[h]=255}}this.__isDirty=!0;this.updatePixels()}else {this.width=0;this.height=0;this.imageData=cq.createImageData(1,1);this.format=2}}this.pixels=buildPixelsObject(this)};af.prototype={__isPImage:!0,updatePixels:function(){var d=this.sourceImg;if(d&&d instanceof HTMLCanvasElement&&this.__isDirty){d.getContext('2d').putImageData(this.imageData,0,0)}this.__isDirty=!1},fromHTMLImageData:function(d){var e=getCanvasData(d);try{var g=e.context.getImageData(0,0,d.width,d.height);this.fromImageData(g)}catch(cK){if(d.width&&d.height){this.isRemote=!0;this.width=d.width;this.height=d.height}}this.sourceImg=d},'get':function(d,e,h,g){if(!arguments.length){return j.get(this)}if(arguments.length===2){return j.get(d,e,this)}if(arguments.length===4){return j.get(d,e,h,g,this)}},'set':function(e,g,d){j.set(e,g,d,this);this.__isDirty=!0},blend:function(h,m,n,i,g,k,l,e,d,o){if(arguments.length===9){j.blend(this,h,m,n,i,g,k,l,e,d,this)}else {if(arguments.length===10){j.blend(h,m,n,i,g,k,l,e,d,o,this)}}delete this.sourceImg},copy:function(g,l,m,h,d,i,k,e,n){if(arguments.length===8){j.blend(this,g,l,m,h,d,i,k,e,0,this)}else {if(arguments.length===9){j.blend(g,l,m,h,d,i,k,e,n,0,this)}}delete this.sourceImg},filter:function(d,e){if(arguments.length===2){j.filter(d,e,this)}else {if(arguments.length===1){j.filter(d,null,this)}}delete this.sourceImg},save:function(d){j.save(d,this)},resize:function(e,d){if(this.isRemote){throw 'Image is loaded remotely. Cannot resize.'}if(this.width!==0||this.height!==0){if(e===0&&d!==0){e=a.floor(this.width/this.height*d)}else {if(d===0&&e!==0){d=a.floor(this.height/this.width*e)}}var h=getCanvasData(this.imageData).canvas;var g=getCanvasData(h,e,d).context.getImageData(0,0,e,d);this.fromImageData(g)}},mask:function(d){var h=this.toImageData(),e,g;if(d instanceof af||d.__isPImage){if(d.width===this.width&&d.height===this.height){d=d.toImageData();for(e=2,g=this.width*this.height*4;e<g;e+=4){h.data[e+1]=d.data[e]}}else {throw 'mask must have the same dimensions as PImage.'}}else {if(d instanceof Array){if(this.width*this.height===d.length){for(e=0,g=d.length;e<g;++e){h.data[e*4+3]=d[e]}}else {throw 'mask array must be the same length as PImage pixels array.'}}}this.fromImageData(h)},loadPixels:h,toImageData:function(){if(this.isRemote){return this.sourceImg}if(!this.__isDirty){return this.imageData}var d=getCanvasData(this.sourceImg);return d.context.getImageData(0,0,this.width,this.height)},toDataURL:function(){if(this.isRemote){throw 'Image is loaded remotely. Cannot create dataURI.'}var d=getCanvasData(this.imageData);return d.canvas.toDataURL()},fromImageData:function(d){var i=d.width,h=d.height,e=c.createElement('canvas'),g=e.getContext('2d');this.width=e.width=i;this.height=e.height=h;g.putImageData(d,0,0);this.format=2;this.imageData=d;this.sourceImg=e}};j.PImage=af;j.createImage=function(g,e,d){return new af(g,e,d)};j.loadImage=function(e,h,i){if(h){e=e+'.'+h}var d;if(K.imageCache.images[e]){d=new af(K.imageCache.images[e]);d.loaded=!0;return d}d=new af();var g=c.createElement('img');d.sourceImg=g;g.onload=function(l,k,j){var m=l;var g=k;var d=j;return function(){g.fromHTMLImageData(m);g.loaded=!0;if(d){d()}}}(g,d,i);g.src=e;return d};j.requestImage=j.loadImage;function get$2(g,h){var d;if(g>=j.width||g<0||h<0||h>=j.height){return 0}if(aU){var e=((0|g)+j.width*(0|h))*4;d=j.imageData.data;return (d[e+3]&255)<<24|(d[e]&255)<<16|(d[e+1]&255)<<8|d[e+2]&255}d=j.toImageData(0|g,0|h,1,1).data;return (d[3]&255)<<24|(d[0]&255)<<16|(d[1]&255)<<8|d[2]&255}function get$3(h,i,g){if(g.isRemote){throw 'Image is loaded remotely. Cannot get x,y.'}var d=i*g.width*4+h*4,e=g.imageData.data;return (e[d+3]&255)<<24|(e[d]&255)<<16|(e[d+1]&255)<<8|e[d+2]&255}function get$4(h,i,g,e){var d=new af(g,e,2);d.fromImageData(j.toImageData(h,i,g,e));return d}function get$5(n,o,m,q,i){if(i.isRemote){throw 'Image is loaded remotely. Cannot get x,y,w,h.'}var l=new af(m,q,2),h=l.imageData.data,p=i.width,t=i.height,g=i.imageData.data;var u=a.max(0,-o),k=a.max(0,-n),v=a.min(q,t-o),s=a.min(m,p-n);for(var j=u;j<v;++j){var d=((o+j)*p+(n+k))*4;var e=(j*m+k)*4;for(var r=k;r<s;++r){h[e++]=g[d++];h[e++]=g[d++];h[e++]=g[d++];h[e++]=g[d++]}}l.__isDirty=!0;return l}j.get=function(d,e,g,h,i){if(i!==undefined){return get$5(d,e,g,h,i)}if(h!==undefined){return get$4(d,e,g,h)}if(g!==undefined){return get$3(d,e,g)}if(e!==undefined){return get$2(d,e)}if(d!==undefined){return get$5(0,0,d.width,d.height,d)}return get$4(0,0,j.width,j.height)};j.createGraphics=function(i,h,g){var e=new d();e.size(i,h,g);e.background(0,0);return e};function resetContext(){if(aU){k=bS;aU=!1;j.updatePixels()}}function SetPixelContextWrapper(){function wrapFunction(e,d){function wrapper(){resetContext();k[d].apply(k,arguments)}e[d]=wrapper}function wrapProperty(e,d){function getter(){resetContext();return k[d]}function setter(g){resetContext();k[d]=g}j.defineProperty(e,d,{get:getter,set:setter})}for(var d in k){if(typeof k[d]==='function'){wrapFunction(this,d)}else {wrapProperty(this,d)}}}function replaceContext(){if(aU){return}j.loadPixels();if(bu===null){bS=k;bu=new SetPixelContextWrapper()}aU=!0;k=bu;bT=0}function set$3(d,e,g){if(d<j.width&&d>=0&&e>=0&&e<j.height){replaceContext();j.pixels.setPixel((0|d)+j.width*(0|e),g);if(++bT>bR){resetContext()}}}function set$4(k,l,i,h){if(h.isRemote){throw 'Image is loaded remotely. Cannot set x,y.'}var g=j.color.toArray(i);var d=l*h.width*4+k*4;var e=h.imageData.data;e[d]=g[0];e[d+1]=g[1];e[d+2]=g[2];e[d+3]=g[3]}j.set=function(e,g,d,h){var k,i;if(arguments.length===3){if(typeof d==='number'){set$3(e,g,d)}else {if(d instanceof af||d.__isPImage){j.image(d,e,g)}}}else {if(arguments.length===4){set$4(e,g,d,h)}}};j.imageData={};j.pixels={getLength:function(){return j.imageData.data.length?j.imageData.data.length/4:0},getPixel:function(g){var d=g*4,e=j.imageData.data;return e[d+3]<<24&4.27819008E9|e[d+0]<<16&16711680|e[d+1]<<8&65280|e[d+2]&255},setPixel:function(h,g){var d=h*4,e=j.imageData.data;e[d+0]=(g&16711680)>>>16;e[d+1]=(g&65280)>>>8;e[d+2]=g&255;e[d+3]=(g&4.27819008E9)>>>24},toArray:function(){var g=[],i=j.imageData.width*j.imageData.height,e=j.imageData.data;for(var h=0,d=0;h<i;h++,d+=4){g.push(e[d+3]<<24&4.27819008E9|e[d+0]<<16&16711680|e[d+1]<<8&65280|e[d+2]&255)}return g},set:function(e){for(var d=0,g=e.length;d<g;d++){this.setPixel(d,e[d])}}};j.loadPixels=function(){j.imageData=M.$ensureContext().getImageData(0,0,j.width,j.height)};j.updatePixels=function(){if(j.imageData){M.$ensureContext().putImageData(j.imageData,0,0)}};j.hint=function(e){var d=M.$ensureContext();if(e===4){d.disable(d.DEPTH_TEST);d.depthMask(!1);d.clear(d.DEPTH_BUFFER_BIT)}else {if(e===-4){d.enable(d.DEPTH_TEST);d.depthMask(!0)}else {if(e===-1||e===2){av=!0}else {if(e===1){av=!1}}}}};var bM=function(e,g,h,i){var d;if(e instanceof af||e.__isPImage){d=e;if(!d.loaded){throw 'Error using image in background(): PImage not loaded.'}if(d.width!==j.width||d.height!==j.height){throw 'Background image must be the same dimensions as the canvas.'}}else {d=j.color(e,g,h,i)}aC=d};w.prototype.background=function(d,e,g,h){if(d!==b){bM(d,e,g,h)}if(aC instanceof af||aC.__isPImage){saveContext();k.setTransform(1,0,0,1,0,0);j.image(aC,0,0);restoreContext()}else {saveContext();k.setTransform(1,0,0,1,0,0);if(j.alpha(aC)!==N){k.clearRect(0,0,j.width,j.height)}k.fillStyle=j.color.toString(aC);k.fillRect(0,0,j.width,j.height);aw=!0;restoreContext()}};y.prototype.background=function(e,g,h,i){if(arguments.length>0){bM(e,g,h,i)}var d=j.color.toGLArray(aC);k.clearColor(d[0],d[1],d[2],d[3]);k.clear(k.COLOR_BUFFER_BIT|k.DEPTH_BUFFER_BIT)};w.prototype.image=function(d,h,i,m,l){h=a.round(h);i=a.round(i);if(d.width>0){var p=m||d.width;var o=l||d.height;var e=aM(h||0,i||0,m||d.width,l||d.height,arguments.length<4);var n=!!d.sourceImg&&az===null;if(n){var g=d.sourceImg;if(d.__isDirty){d.updatePixels()}k.drawImage(g,0,0,g.width,g.height,e.x,e.y,e.w,e.h)}else {var j=d.toImageData();if(az!==null){az(j);d.__isDirty=!0}k.drawImage(getCanvasData(j).canvas,0,0,d.width,d.height,e.x,e.y,e.w,e.h)}}};y.prototype.image=function(i,g,h,e,d){if(i.width>0){g=a.round(g);h=a.round(h);e=e||i.width;d=d||i.height;j.beginShape(j.QUADS);j.texture(i);j.vertex(g,h,0,0,0);j.vertex(g,h+d,0,0,d);j.vertex(g+e,h+d,0,e,d);j.vertex(g+e,h,0,e,0);j.endShape()}};j.tint=function(k,l,m,n){var d=j.color(k,l,m,n);var i=j.red(d)/W;var h=j.green(d)/ad;var g=j.blue(d)/X;var e=j.alpha(d)/N;az=function(o){var j=o.data,p=4*o.width*o.height;for(var d=0;d<p;){j[d++]*=i;j[d++]*=h;j[d++]*=g;j[d++]*=e}};bB=function(d){for(var j=0;j<d.length;){d[j++]=i;d[j++]=h;d[j++]=g;d[j++]=e}}};j.noTint=function(){az=null;bB=null};j.copy=function(d,m,n,l,k,h,i,g,e){if(e===b){e=g;g=i;i=h;h=k;k=l;l=n;n=m;m=d;d=j}j.blend(d,m,n,l,k,h,i,g,e,0)};j.blend=function(h,d,e,u,t,i,k,s,r,l,o){if(h.isRemote){throw 'Image is loaded remotely. Cannot blend image.'}if(l===b){l=r;r=s;s=k;k=i;i=t;t=u;u=e;e=d;d=h;h=j}var m=d+u,n=e+t,p=i+s,q=k+r,g=o||j;if(o===b||l===b){j.loadPixels()}h.loadPixels();if(h===j&&j.intersect(d,e,m,n,i,k,p,q)){j.blit_resize(j.get(d,e,m-d,n-e),0,0,m-d-1,n-e-1,g.imageData.data,g.width,g.height,i,k,p,q,l)}else {j.blit_resize(h,d,e,m,n,g.imageData.data,g.width,g.height,i,k,p,q,l)}if(o===b){j.updatePixels()}};var cr=function(m){var d=j.floor(m*3.5),g,l;d=d<1?1:d<248?d:248;if(j.shared.blurRadius!==d){j.shared.blurRadius=d;j.shared.blurKernelSize=1+(j.shared.blurRadius<<1);j.shared.blurKernel=new e(j.shared.blurKernelSize);var h=j.shared.blurKernel;var i=j.shared.blurKernelSize;var n=j.shared.blurRadius;for(g=0;g<i;g++){h[g]=0}var k=(d-1)*(d-1);for(g=1;g<d;g++){h[d+g]=h[l]=k}h[d]=d*d}};var cB=function(I,y){var g,u,t,s,r,J,h;var d,m,p,A,q;var z=y.pixels.getLength();var H=new e(z);var G=new e(z);var F=new e(z);var E=new e(z);var v=0;var i,w,o,k;cr(I);var x=y.height;var l=y.width;var B=j.shared.blurKernelSize;var D=j.shared.blurRadius;var C=j.shared.blurKernel;var n=y.imageData.data;for(w=0;w<x;w++){for(i=0;i<l;i++){s=t=u=r=g=0;d=i-D;if(d<0){q=-d;d=0}else {if(d>=l){break}q=0}for(o=q;o<B;o++){if(d>=l){break}k=(d+v)*4;h=C[o];r+=h*n[k+3];u+=h*n[k];t+=h*n[k+1];s+=h*n[k+2];g+=h;d++}m=v+i;E[m]=r/g;H[m]=u/g;G[m]=t/g;F[m]=s/g}v+=l}v=0;p=-D;A=p*l;for(w=0;w<x;w++){for(i=0;i<l;i++){s=t=u=r=g=0;if(p<0){q=m=-p;d=i}else {if(p>=x){break}q=0;m=p;d=i+A}for(o=q;o<B;o++){if(m>=x){break}h=C[o];r+=h*E[d];u+=h*H[d];t+=h*G[d];s+=h*F[d];g+=h;m++;d+=l}k=(i+v)*4;n[k]=u/g;n[k+1]=t/g;n[k+2]=s/g;n[k+3]=r/g}v+=l;A+=l;p++}};var cf=function(A,g){var d=0;var w=g.pixels.getLength();var z=new x(w);var y,r,n,h,e;var m,p,q,o,i,k,l,j,s,u,v,t;if(!A){while(d<w){y=d;r=d+g.width;while(d<r){n=h=g.pixels.getPixel(d);p=d-1;m=d+1;q=d-g.width;o=d+g.width;if(p<y){p=d}if(m>=r){m=d}if(q<0){q=0}if(o>=w){o=d}l=g.pixels.getPixel(q);k=g.pixels.getPixel(p);j=g.pixels.getPixel(o);i=g.pixels.getPixel(m);e=77*(n>>16&255)+151*(n>>8&255)+28*(n&255);u=77*(k>>16&255)+151*(k>>8&255)+28*(k&255);s=77*(i>>16&255)+151*(i>>8&255)+28*(i&255);v=77*(l>>16&255)+151*(l>>8&255)+28*(l&255);t=77*(j>>16&255)+151*(j>>8&255)+28*(j&255);if(u>e){h=k;e=u}if(s>e){h=i;e=s}if(v>e){h=l;e=v}if(t>e){h=j;e=t}z[d++]=h}}}else {while(d<w){y=d;r=d+g.width;while(d<r){n=h=g.pixels.getPixel(d);p=d-1;m=d+1;q=d-g.width;o=d+g.width;if(p<y){p=d}if(m>=r){m=d}if(q<0){q=0}if(o>=w){o=d}l=g.pixels.getPixel(q);k=g.pixels.getPixel(p);j=g.pixels.getPixel(o);i=g.pixels.getPixel(m);e=77*(n>>16&255)+151*(n>>8&255)+28*(n&255);u=77*(k>>16&255)+151*(k>>8&255)+28*(k&255);s=77*(i>>16&255)+151*(i>>8&255)+28*(i&255);v=77*(l>>16&255)+151*(l>>8&255)+28*(l&255);t=77*(j>>16&255)+151*(j>>8&255)+28*(j&255);if(u<e){h=k;e=u}if(s<e){h=i;e=s}if(v<e){h=l;e=v}if(t<e){h=j;e=t}z[d++]=h}}}g.pixels.set(z)};j.filter=function(t,g,q){var e,h,l,d;if(arguments.length===3){q.loadPixels();e=q}else {j.loadPixels();e=j}if(g===b){g=null}if(e.isRemote){throw 'Image is loaded remotely. Cannot filter image.'}var i=e.pixels.getLength();switch(t){case 11:var r=g||1;cB(r,e);break;case 12:if(e.format===4){for(d=0;d<i;d++){h=255-e.pixels.getPixel(d);e.pixels.setPixel(d,4.27819008E9|h<<16|h<<8|h)}e.format=1}else {for(d=0;d<i;d++){h=e.pixels.getPixel(d);l=77*(h>>16&255)+151*(h>>8&255)+28*(h&255)>>8;e.pixels.setPixel(d,h&4.27819008E9|l<<16|l<<8|l)}};break;case 13:for(d=0;d<i;d++){e.pixels.setPixel(d,e.pixels.getPixel(d)^16777215)};break;case 15:if(g===null){throw 'Use filter(POSTERIZE, int levels) instead of filter(POSTERIZE)'};var k=j.floor(g);if(k<2||k>255){throw 'Levels must be between 2 and 255 for filter(POSTERIZE, levels)'};var m=k-1;for(d=0;d<i;d++){var p=e.pixels.getPixel(d)>>16&255;var o=e.pixels.getPixel(d)>>8&255;var n=e.pixels.getPixel(d)&255;p=(p*k>>8)*255/m;o=(o*k>>8)*255/m;n=(n*k>>8)*255/m;e.pixels.setPixel(d,4.27819008E9&e.pixels.getPixel(d)|p<<16|o<<8|n)};break;case 14:for(d=0;d<i;d++){e.pixels.setPixel(d,e.pixels.getPixel(d)|4.27819008E9)};e.format=1;break;case 16:if(g===null){g=0.5};if(g<0||g>1){throw 'Level must be between 0 and 1 for filter(THRESHOLD, level)'};var s=j.floor(g*255);for(d=0;d<i;d++){var u=j.max((e.pixels.getPixel(d)&16711680)>>16,j.max((e.pixels.getPixel(d)&65280)>>8,e.pixels.getPixel(d)&255));e.pixels.setPixel(d,e.pixels.getPixel(d)&4.27819008E9|(u<s?0:16777215))};break;case 17:cf(!0,e);break;case 18:cf(!1,e);break;}e.updatePixels()};j.shared={fracU:0,ifU:0,fracV:0,ifV:0,u1:0,u2:0,v1:0,v2:0,sX:0,sY:0,iw:0,iw1:0,ih1:0,ul:0,ll:0,ur:0,lr:0,cUL:0,cLL:0,cUR:0,cLR:0,srcXOffset:0,srcYOffset:0,r:0,g:0,b:0,a:0,srcBuffer:null,blurRadius:0,blurKernelSize:0,blurKernel:null};j.intersect=function(i,j,q,r,g,h,o,p){var l=q-i+1;var k=r-j+1;var e=o-g+1;var d=p-h+1;if(g<i){e+=g-i;if(e>l){e=l}}else {var n=l+i-g;if(e>n){e=n}}if(h<j){d+=h-j;if(d>k){d=k}}else {var m=k+j-h;if(d>m){d=m}}return !(e<=0||d<=0)};var R={};R[1]=j.modes.blend;R[2]=j.modes.add;R[4]=j.modes.subtract;R[8]=j.modes.lightest;R[16]=j.modes.darkest;R[0]=j.modes.replace;R[32]=j.modes.difference;R[64]=j.modes.exclusion;R[128]=j.modes.multiply;R[256]=j.modes.screen;R[512]=j.modes.overlay;R[1024]=j.modes.hard_light;R[2048]=j.modes.soft_light;R[4096]=j.modes.dodge;R[8192]=j.modes.burn;j.blit_resize=function(l,y,z,D,E,q,B,I,n,o,S,T,U){var C,F;if(y<0){y=0}if(z<0){z=0}if(D>=l.width){D=l.width-1}if(E>=l.height){E=l.height-1}var K=D-y;var J=E-z;var s=S-n;var r=T-o;if(s<=0||r<=0||K<=0||J<=0||n>=B||o>=I||y>=l.width||z>=l.height){return}var M=a.floor(K/s*32768);var N=a.floor(J/r*32768);var d=j.shared;d.srcXOffset=a.floor(n<0?-n*M:y*32768);d.srcYOffset=a.floor(o<0?-o*N:z*32768);if(n<0){s+=n;n=0}if(o<0){r+=o;o=0}s=a.min(s,B-n);r=a.min(r,I-o);var G=o*B+n;var H;d.srcBuffer=l.imageData.data;d.iw=l.width;d.iw1=l.width-1;d.ih1=l.height-1;var W=j.filter_bilinear,V=j.filter_new_scanline,Q=R[U],t,p,w,x,u,v,g=4.27819008E9,i=16711680,h=65280,k=255,A=32767,m=15,P=1,O=9,e=d.srcBuffer,L=a.min;for(F=0;F<r;F++){d.sX=d.srcXOffset;d.fracV=d.srcYOffset&A;d.ifV=A-d.fracV;d.v1=(d.srcYOffset>>m)*d.iw;d.v2=L((d.srcYOffset>>m)+1,d.ih1)*d.iw;for(C=0;C<s;C++){p=(G+C)*4;H=q[p+3]<<24&g|q[p]<<16&i|q[p+1]<<8&h|q[p+2]&k;d.fracU=d.sX&A;d.ifU=A-d.fracU;d.ul=d.ifU*d.ifV>>m;d.ll=d.ifU*d.fracV>>m;d.ur=d.fracU*d.ifV>>m;d.lr=d.fracU*d.fracV>>m;d.u1=d.sX>>m;d.u2=L(d.u1+1,d.iw1);w=(d.v1+d.u1)*4;x=(d.v1+d.u2)*4;u=(d.v2+d.u1)*4;v=(d.v2+d.u2)*4;d.cUL=e[w+3]<<24&g|e[w]<<16&i|e[w+1]<<8&h|e[w+2]&k;d.cUR=e[x+3]<<24&g|e[x]<<16&i|e[x+1]<<8&h|e[x+2]&k;d.cLL=e[u+3]<<24&g|e[u]<<16&i|e[u+1]<<8&h|e[u+2]&k;d.cLR=e[v+3]<<24&g|e[v]<<16&i|e[v+1]<<8&h|e[v+2]&k;d.r=d.ul*((d.cUL&i)>>16)+d.ll*((d.cLL&i)>>16)+d.ur*((d.cUR&i)>>16)+d.lr*((d.cLR&i)>>16)<<P&i;d.g=d.ul*(d.cUL&h)+d.ll*(d.cLL&h)+d.ur*(d.cUR&h)+d.lr*(d.cLR&h)>>>m&h;d.b=d.ul*(d.cUL&k)+d.ll*(d.cLL&k)+d.ur*(d.cUR&k)+d.lr*(d.cLR&k)>>>m;d.a=d.ul*((d.cUL&g)>>>24)+d.ll*((d.cLL&g)>>>24)+d.ur*((d.cUR&g)>>>24)+d.lr*((d.cLR&g)>>>24)<<O&g;t=Q(H,d.a|d.r|d.g|d.b);q[p]=(t&i)>>>16;q[p+1]=(t&h)>>>8;q[p+2]=t&k;q[p+3]=(t&g)>>>24;d.sX+=M}G+=B;d.srcYOffset+=N}};j.loadFont=function(e,h){if(e===b){throw 'font name required in loadFont.'}if(e.indexOf('.svg')===-1){if(h===b){h=I.size}return PFont.get(e,h)}var g=j.loadGlyphs(e);return {name:e,css:'12px sans-serif',glyph:!0,units_per_em:g.units_per_em,horiz_adv_x:1/g.units_per_em*g.horiz_adv_x,ascent:g.ascent,descent:g.descent,width:function(k){var i=0;var l=k.length;for(var g=0;g<l;g++){try{i+=parseFloat(j.glyphLook(j.glyphTable[e],k[g]).horiz_adv_x)}catch(cK){d.debug(cK)}}return i/j.glyphTable[e].units_per_em}}};j.createFont=function(d,e){return j.loadFont(d,e)};j.textFont=function(d,e){if(e!==b){if(!d.glyph){d=PFont.get(d.name,e)}ai=e}I=d;aQ=I.name;ao=I.ascent;ag=I.descent;$=I.leading;var g=M.$ensureContext();g.font=I.css};j.textSize=function(d){I=PFont.get(aQ,d);ai=d;ao=I.ascent;ag=I.descent;$=I.leading;var e=M.$ensureContext();e.font=I.css};j.textAscent=function(){return ao};j.textDescent=function(){return ag};j.textLeading=function(d){$=d};j.textAlign=function(d,e){aA=d;an=e||0};function toP5String(d){if(d instanceof String){return d}if(typeof d==='number'){if(d===(0|d)){return d.toString()}return j.nf(d,0,3)}if(d===null||d===b){return ''}return d.toString()}w.prototype.textWidth=function(i){var g=toP5String(i).split(/\r?\n/g),e=0;var d,h=g.length;k.font=I.css;for(d=0;d<h;++d){e=a.max(e,I.measureTextWidth(g[d]))}return e|0};y.prototype.textWidth=function(j){var h=toP5String(j).split(/\r?\n/g),e=0;var d,i=h.length;if(_===b){_=c.createElement('canvas')}var g=_.getContext('2d');g.font=I.css;for(d=0;d<i;++d){e=a.max(e,g.measureText(h[d]).width)}return e|0};j.glyphLook=function(e,g){try{switch(g){case '1':return e.one;case '2':return e.two;case '3':return e.three;case '4':return e.four;case '5':return e.five;case '6':return e.six;case '7':return e.seven;case '8':return e.eight;case '9':return e.nine;case '0':return e.zero;case ' ':return e.space;case '$':return e.dollar;case '!':return e.exclam;case '"':return e.quotedbl;case '#':return e.numbersign;case '%':return e.percent;case '&':return e.ampersand;case "'":return e.quotesingle;case '(':return e.parenleft;case ')':return e.parenright;case '*':return e.asterisk;case '+':return e.plus;case ',':return e.comma;case '-':return e.hyphen;case '.':return e.period;case '/':return e.slash;case '_':return e.underscore;case ':':return e.colon;case ';':return e.semicolon;case '<':return e.less;case '=':return e.equal;case '>':return e.greater;case '?':return e.question;case '@':return e.at;case '[':return e.bracketleft;case '\\':return e.backslash;case ']':return e.bracketright;case '^':return e.asciicircum;case '`':return e.grave;case '{':return e.braceleft;case '|':return e.bar;case '}':return e.braceright;case '~':return e.asciitilde;default:return e[g];}}catch(cK){d.debug(cK)}};w.prototype.text$line=function(h,o,p,s,g){var e=0,i=0;if(!I.glyph){if(h&&'fillText' in k){if(aw){k.fillStyle=j.color.toString(au);aw=!1}if(g===39||g===3){e=I.measureTextWidth(h);if(g===39){i=-e}else {i=-e/2}}k.fillText(h,o+i,p)}}else {var l=j.glyphTable[aQ];saveContext();k.translate(o,p+ai);if(g===39||g===3){e=l.width(h);if(g===39){i=-e}else {i=-e/2}}var q=l.units_per_em,n=1/q*ai;k.scale(n,n);for(var m=0,r=h.length;m<r;m++){try{j.glyphLook(l,h[m]).draw()}catch(cK){d.debug(cK)}}restoreContext()}};y.prototype.text$line=function(l,o,p,q,j){if(_===b){_=c.createElement('canvas')}var m=k;k=_.getContext('2d');k.font=I.css;var h=I.measureTextWidth(l);_.width=h;_.height=ai;k=_.getContext('2d');k.font=I.css;k.textBaseline='top';w.prototype.text$line(l,0,0,0,37);var n=_.width/_.height;k=m;k.bindTexture(k.TEXTURE_2D,cc);k.texImage2D(k.TEXTURE_2D,0,k.RGBA,k.RGBA,k.UNSIGNED_BYTE,_);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.LINEAR);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.LINEAR);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE);var i=0;if(j===39){i=-h}else {if(j===3){i=-h/2}}var e=new z();var d=ai*0.5;e.translate(o+i-d/2,p-d,q);e.scale(-n*d,-d,d);e.translate(-1,-1,-1);e.transpose();var g=new z();g.scale(1,-1,1);g.apply(B.array());g.transpose();k.useProgram(A);vertexAttribPointer('aVertex2d',A,'aVertex',3,by);vertexAttribPointer('aTextureCoord2d',A,'aTextureCoord',2,br);uniformi('uSampler2d',A,'uSampler',[0]);uniformi('uIsDrawingText2d',A,'uIsDrawingText',!0);uniformMatrix('uModel2d',A,'uModel',!1,e.array());uniformMatrix('uView2d',A,'uView',!1,g.array());uniformf('uColor2d',A,'uColor',Z);k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,bv);k.drawElements(k.TRIANGLES,6,k.UNSIGNED_SHORT,0)};function text$4(h,k,l,m){var g,d;if(h.indexOf('\n')<0){g=[h];d=1}else {g=h.split(/\r?\n/g);d=g.length}var e=0;if(an===101){e=ao+ag}else {if(an===3){e=ao/2-(d-1)*$/2}else {if(an===102){e=-(ag+(d-1)*$)}}}for(var i=0;i<d;++i){var j=g[i];M.text$line(j,k,l+e,m,aA);e+=$}}function text$6(h,x,y,o,m,z){if(h.length===0||o===0||m===0){return}if(ai>m){return}var j=-1;var e=0;var g=0;var i=[];for(var d=0,u=h.length;d<u;d++){var n=h[d];var w=n===' ';var s=I.measureTextWidth(n);if(n!=='\n'&&g+s<=o){if(w){j=d}g+=s}else {if(j+1===e){if(d>0){j=d}else {return}}if(n==='\n'){i.push({text:h.substring(e,d),width:g});e=d+1}else {i.push({text:h.substring(e,j+1),width:g});e=j+1}g=0;d=e-1}}if(e<u){i.push({text:h.substring(e),width:g})}var q=1,l=ao;if(aA===3){q=o/2}else {if(aA===39){q=o}}var t=i.length,v=a.min(t,a.floor(m/$));if(an===101){l=ao+ag}else {if(an===3){l=m/2-$*(v/2-1)}else {if(an===102){l=ag+$}}}var k,r,p;for(k=0;k<t;k++){p=k*$;if(l+p>m-ag){break}r=i[k];M.text$line(r.text,x+q,y+l+p,z,aA)}}j.text=function(){if(bg===5){return}if(arguments.length===3){text$4(toP5String(arguments[0]),arguments[1],arguments[2],0)}else {if(arguments.length===4){text$4(toP5String(arguments[0]),arguments[1],arguments[2],arguments[3])}else {if(arguments.length===5){text$6(toP5String(arguments[0]),arguments[1],arguments[2],arguments[3],arguments[4],0)}else {if(arguments.length===6){text$6(toP5String(arguments[0]),arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])}}}}};j.textMode=function(d){bg=d};j.loadGlyphs=function(i){var g,h,k,l,m,n,r,q,p,u,o,x='[0-9\\-]+',e;var t=function(k,j){var g=0,d=[],e,h=new RegExp(k,'g');e=d[g]=h.exec(j);while(e){g++;e=d[g]=h.exec(j)}return d};var v=function(j){var v=t('[A-Za-z][0-9\\- ]+|Z',j);var w=function(){saveContext();return M.$ensureContext()};var y=function(){executeContextFill();executeContextStroke();restoreContext()};e='return {draw:function(){var curContext=beforePathDraw();curContext.beginPath();';g=0;h=0;k=0;l=0;m=0;n=0;j=0;q=0;p='';u=v.length-1;for(var s=0;s<u;s++){var r=v[s][0],d=t(x,r);switch(r[0]){case 'M':g=parseFloat(d[0][0]);h=parseFloat(d[1][0]);e+='curContext.moveTo('+g+','+-h+');';break;case 'L':g=parseFloat(d[0][0]);h=parseFloat(d[1][0]);e+='curContext.lineTo('+g+','+-h+');';break;case 'H':g=parseFloat(d[0][0]);e+='curContext.lineTo('+g+','+-h+');';break;case 'V':h=parseFloat(d[0][0]);e+='curContext.lineTo('+g+','+-h+');';break;case 'T':m=parseFloat(d[0][0]);n=parseFloat(d[1][0]);if(p==='Q'||p==='T'){j=a.sqrt(a.pow(g-k,2)+a.pow(l-h,2));q=a.PI+a.atan2(k-g,l-h);k=g+a.sin(q)*j;l=h+a.cos(q)*j}else {k=g;l=h};e+='curContext.quadraticCurveTo('+k+','+-l+','+m+','+-n+');';g=m;h=n;break;case 'Q':k=parseFloat(d[0][0]);l=parseFloat(d[1][0]);m=parseFloat(d[2][0]);n=parseFloat(d[3][0]);e+='curContext.quadraticCurveTo('+k+','+-l+','+m+','+-n+');';g=m;h=n;break;case 'Z':e+='curContext.closePath();';break;}p=r[0]}e+='afterPathDraw();';e+='curContext.translate('+o+',0);';e+='}}';return (new Function('beforePathDraw','afterPathDraw',e))(w,y)};var s=function(k){var n=k.getElementsByTagName('font');j.glyphTable[i].horiz_adv_x=n[0].getAttribute('horiz-adv-x');var h=k.getElementsByTagName('font-face')[0];j.glyphTable[i].units_per_em=parseFloat(h.getAttribute('units-per-em'));j.glyphTable[i].ascent=parseFloat(h.getAttribute('ascent'));j.glyphTable[i].descent=parseFloat(h.getAttribute('descent'));var g=k.getElementsByTagName('glyph'),p=g.length;for(var d=0;d<p;d++){var m=g[d].getAttribute('unicode');var l=g[d].getAttribute('glyph-name');o=g[d].getAttribute('horiz-adv-x');if(o===null){o=j.glyphTable[i].horiz_adv_x}r=g[d].getAttribute('d');if(r!==b){e=v(r);j.glyphTable[i][l]={name:l,unicode:m,horiz_adv_x:o,draw:e.draw}}}};var w=function(){var e;try{e=c.implementation.createDocument('','',null)}catch(cK){d.debug(cK.message);return}try{e.async=!1;e.load(i);s(e.getElementsByTagName('svg')[0])}catch(cL){d.debug(cL);try{var g=new f.XMLHttpRequest();g.open('GET',i,!1);g.send(null);s(g.responseXML.documentElement)}catch(cM){d.debug(cL)}}};j.glyphTable[i]={};w(i);return j.glyphTable[i]};j.param=function(e){var h='data-processing-'+e;if(p.hasAttribute(h)){return p.getAttribute(h)}for(var g=0,i=p.childNodes.length;g<i;++g){var d=p.childNodes.item(g);if(d.nodeType!==1||d.tagName.toLowerCase()!=='param'){continue}if(d.getAttribute('name')===e){return d.getAttribute('value')}}if(K.params.hasOwnProperty(e)){return K.params[e]}return null};function wireDimensionalFunctions(e){if(e==='3D'){M=new y()}else {if(e==='2D'){M=new w()}else {M=new q()}}for(var d in q.prototype){if(q.prototype.hasOwnProperty(d)&&d.indexOf('$')<0){j[d]=M[d]}}M.$init()}function createDrawingPreFunction(d){return function(){wireDimensionalFunctions('2D');return M[d].apply(this,arguments)}}q.prototype.translate=createDrawingPreFunction('translate');q.prototype.transform=createDrawingPreFunction('transform');q.prototype.scale=createDrawingPreFunction('scale');q.prototype.pushMatrix=createDrawingPreFunction('pushMatrix');q.prototype.popMatrix=createDrawingPreFunction('popMatrix');q.prototype.resetMatrix=createDrawingPreFunction('resetMatrix');q.prototype.applyMatrix=createDrawingPreFunction('applyMatrix');q.prototype.rotate=createDrawingPreFunction('rotate');q.prototype.rotateZ=createDrawingPreFunction('rotateZ');q.prototype.shearX=createDrawingPreFunction('shearX');q.prototype.shearY=createDrawingPreFunction('shearY');q.prototype.redraw=createDrawingPreFunction('redraw');q.prototype.toImageData=createDrawingPreFunction('toImageData');q.prototype.ambientLight=createDrawingPreFunction('ambientLight');q.prototype.directionalLight=createDrawingPreFunction('directionalLight');q.prototype.lightFalloff=createDrawingPreFunction('lightFalloff');q.prototype.lightSpecular=createDrawingPreFunction('lightSpecular');q.prototype.pointLight=createDrawingPreFunction('pointLight');q.prototype.noLights=createDrawingPreFunction('noLights');q.prototype.spotLight=createDrawingPreFunction('spotLight');q.prototype.beginCamera=createDrawingPreFunction('beginCamera');q.prototype.endCamera=createDrawingPreFunction('endCamera');q.prototype.frustum=createDrawingPreFunction('frustum');q.prototype.box=createDrawingPreFunction('box');q.prototype.sphere=createDrawingPreFunction('sphere');q.prototype.ambient=createDrawingPreFunction('ambient');q.prototype.emissive=createDrawingPreFunction('emissive');q.prototype.shininess=createDrawingPreFunction('shininess');q.prototype.specular=createDrawingPreFunction('specular');q.prototype.fill=createDrawingPreFunction('fill');q.prototype.stroke=createDrawingPreFunction('stroke');q.prototype.strokeWeight=createDrawingPreFunction('strokeWeight');q.prototype.smooth=createDrawingPreFunction('smooth');q.prototype.noSmooth=createDrawingPreFunction('noSmooth');q.prototype.point=createDrawingPreFunction('point');q.prototype.vertex=createDrawingPreFunction('vertex');q.prototype.endShape=createDrawingPreFunction('endShape');q.prototype.bezierVertex=createDrawingPreFunction('bezierVertex');q.prototype.curveVertex=createDrawingPreFunction('curveVertex');q.prototype.curve=createDrawingPreFunction('curve');q.prototype.line=createDrawingPreFunction('line');q.prototype.bezier=createDrawingPreFunction('bezier');q.prototype.rect=createDrawingPreFunction('rect');q.prototype.ellipse=createDrawingPreFunction('ellipse');q.prototype.background=createDrawingPreFunction('background');q.prototype.image=createDrawingPreFunction('image');q.prototype.textWidth=createDrawingPreFunction('textWidth');q.prototype.text$line=createDrawingPreFunction('text$line');q.prototype.$ensureContext=createDrawingPreFunction('$ensureContext');q.prototype.$newPMatrix=createDrawingPreFunction('$newPMatrix');q.prototype.size=function(g,e,d){wireDimensionalFunctions(d===2?'3D':'2D');j.size(g,e,d)};q.prototype.$init=h;w.prototype.$init=function(){j.size(j.width,j.height);k.lineCap='round';j.noSmooth();j.disableContextMenu()};y.prototype.$init=function(){j.use3DContext=!0;j.disableContextMenu()};G.prototype.$ensureContext=function(){return k};function calculateOffset(h,i){var d=h,e=0,g=0;j.pmouseX=j.mouseX;j.pmouseY=j.mouseY;if(d.offsetParent){do{e+=d.offsetLeft;g+=d.offsetTop}while(!!(d=d.offsetParent))}d=h;do{e-=d.scrollLeft||0;g-=d.scrollTop||0}while(!!(d=d.parentNode));e+=bN;g+=bV;e+=bU;g+=bX;e+=f.pageXOffset;g+=f.pageYOffset;return {'X':e,'Y':g}}function updateMousePosition(g,d){var e=calculateOffset(g,d);j.mouseX=d.pageX-e.X;j.mouseY=d.pageY-e.Y}function addTouchEventOffset(e){var g=calculateOffset(e.changedTouches[0].target,e.changedTouches[0]),d;for(d=0;d<e.touches.length;d++){var j=e.touches[d];j.offsetX=j.pageX-g.X;j.offsetY=j.pageY-g.Y}for(d=0;d<e.targetTouches.length;d++){var i=e.targetTouches[d];i.offsetX=i.pageX-g.X;i.offsetY=i.pageY-g.Y}for(d=0;d<e.changedTouches.length;d++){var h=e.changedTouches[d];h.offsetX=h.pageX-g.X;h.offsetY=h.pageY-g.Y}return e}attachEventHandler(p,'touchstart',function(h){p.setAttribute('style','-webkit-user-select: none');p.setAttribute('onclick','void(0)');p.setAttribute('style','-webkit-tap-highlight-color:rgba(0,0,0,0)');for(var e=0,g=aP.length;e<g;e++){var d=aP[e].type;if(d==='mouseout'||d==='mousemove'||d==='mousedown'||d==='mouseup'||d==='DOMMouseScroll'||d==='mousewheel'||d==='touchstart'){detachEventHandler(aP[e])}}if(j.touchStart!==b||j.touchMove!==b||j.touchEnd!==b||j.touchCancel!==b){attachEventHandler(p,'touchstart',function(d){if(j.touchStart!==b){d=addTouchEventOffset(d);j.touchStart(d)}});attachEventHandler(p,'touchmove',function(d){if(j.touchMove!==b){d.preventDefault();d=addTouchEventOffset(d);j.touchMove(d)}});attachEventHandler(p,'touchend',function(d){if(j.touchEnd!==b){d=addTouchEventOffset(d);j.touchEnd(d)}});attachEventHandler(p,'touchcancel',function(d){if(j.touchCancel!==b){d=addTouchEventOffset(d);j.touchCancel(d)}})}else {attachEventHandler(p,'touchstart',function(d){updateMousePosition(p,d.touches[0]);j.__mousePressed=!0;j.mouseDragging=!1;j.mouseButton=37;if(typeof j.mousePressed==='function'){j.mousePressed()}});attachEventHandler(p,'touchmove',function(d){d.preventDefault();updateMousePosition(p,d.touches[0]);if(typeof j.mouseMoved==='function'&&!j.__mousePressed){j.mouseMoved()}if(typeof j.mouseDragged==='function'&&j.__mousePressed){j.mouseDragged();j.mouseDragging=!0}});attachEventHandler(p,'touchend',function(d){j.__mousePressed=!1;if(typeof j.mouseClicked==='function'&&!j.mouseDragging){j.mouseClicked()}if(typeof j.mouseReleased==='function'){j.mouseReleased()}})}p.dispatchEvent(h)});(function(){var d=!0,e=function(d){d.preventDefault();d.stopPropagation()};j.disableContextMenu=function(){if(!d){return}attachEventHandler(p,'contextmenu',e);d=!1};j.enableContextMenu=function(){if(d){return}detachEventHandler({elem:p,type:'contextmenu',fn:e});d=!0}})();attachEventHandler(p,'mousemove',function(d){updateMousePosition(p,d);if(typeof j.mouseMoved==='function'&&!j.__mousePressed){j.mouseMoved()}if(typeof j.mouseDragged==='function'&&j.__mousePressed){j.mouseDragged();j.mouseDragging=!0}});attachEventHandler(p,'mouseout',function(d){if(typeof j.mouseOut==='function'){j.mouseOut()}});attachEventHandler(p,'mouseover',function(d){updateMousePosition(p,d);if(typeof j.mouseOver==='function'){j.mouseOver()}});p.onmousedown=function(){p.focus();return !1};attachEventHandler(p,'mousedown',function(d){j.__mousePressed=!0;j.mouseDragging=!1;switch(d.which){case 1:j.mouseButton=37;break;case 2:j.mouseButton=3;break;case 3:j.mouseButton=39;break;}if(typeof j.mousePressed==='function'){j.mousePressed()}});attachEventHandler(p,'mouseup',function(d){j.__mousePressed=!1;if(typeof j.mouseClicked==='function'&&!j.mouseDragging){j.mouseClicked()}if(typeof j.mouseReleased==='function'){j.mouseReleased()}});var bJ=function(e){var d=0;if(e.wheelDelta){d=e.wheelDelta/120;if(f.opera){d=-d}}else {if(e.detail){d=-e.detail/3}}j.mouseScroll=d;if(d&&typeof j.mouseScrolled==='function'){j.mouseScrolled()}};attachEventHandler(c,'DOMMouseScroll',bJ);attachEventHandler(c,'mousewheel',bJ);if(!p.getAttribute('tabindex')){p.setAttribute('tabindex',0)}function getKeyCode(e){var d=e.which||e.keyCode;switch(d){case 13:return 10;case 91:case 93:case 224:return 157;case 57392:return 17;case 46:return 127;case 45:return 155;}return d}function getKeyChar(d){var e=d.which||d.keyCode;var g=d.shiftKey||d.ctrlKey||d.altKey||d.metaKey;switch(e){case 13:e=g?13:10;break;case 8:e=g?127:8;break;}return new Y(e)}function suppressKeyEvent(d){if(typeof d.preventDefault==='function'){d.preventDefault()}else {if(typeof d.stopPropagation==='function'){d.stopPropagation()}}return !1}function updateKeyPressed(){var d;for(d in aB){if(aB.hasOwnProperty(d)){j.__keyPressed=!0;return}}j.__keyPressed=!1}function resetKeyPressed(){j.__keyPressed=!1;aB=[];aK=null}function simulateKeyTyped(d,e){aB[d]=e;aK=null;j.key=e;j.keyCode=d;j.keyPressed();j.keyCode=0;j.keyTyped();updateKeyPressed()}function handleKeydown(g){var d=getKeyCode(g);if(d===127){simulateKeyTyped(d,new Y(127));return}if(cy.indexOf(d)<0){aK=d;return}var e=new Y(65535);j.key=e;j.keyCode=d;aB[d]=e;j.keyPressed();aK=null;updateKeyPressed();return suppressKeyEvent(g)}function handleKeypress(d){if(aK===null){return}var e=aK,g=getKeyChar(d);simulateKeyTyped(e,g);return suppressKeyEvent(d)}function handleKeyup(g){var d=getKeyCode(g),e=aB[d];if(e===b){return}j.key=e;j.keyCode=d;j.keyReleased();delete aB[d];updateKeyPressed()}if(!b$){if(aH instanceof d.Sketch){K=aH}else {if(typeof aH==='function'){K=new d.Sketch(aH)}else {if(!aH){K=new d.Sketch(function(){})}else {K=d.compile(aH)}}}j.externals.sketch=K;wireDimensionalFunctions();p.onfocus=function(){j.focused=!0};p.onblur=function(){j.focused=!1;if(!K.options.globalKeyEvents){resetKeyPressed()}};if(K.options.pauseOnBlur){attachEventHandler(f,'focus',function(){if(aG){j.loop()}});attachEventHandler(f,'blur',function(){if(aG&&a9){j.noLoop();aG=!0}resetKeyPressed()})}var bw=K.options.globalKeyEvents?f:p;attachEventHandler(bw,'keydown',handleKeydown);attachEventHandler(bw,'keypress',handleKeypress);attachEventHandler(bw,'keyup',handleKeyup);for(var a_ in d.lib){if(d.lib.hasOwnProperty(a_)){if(d.lib[a_].hasOwnProperty('attach')){d.lib[a_].attach(j)}else {if(d.lib[a_] instanceof Function){d.lib[a_].call(this)}}}}var b_=100;var bZ=function(d){if(!(K.imageCache.pending||PFont.preloading.pending(b_))){if(f.opera){var h,i,e=K.imageCache.operaCache;for(h in e){if(e.hasOwnProperty(h)){i=e[h];if(i!==null){c.body.removeChild(i)}delete e[h]}}}K.attach(d,g);K.onLoad(d);if(d.setup){d.setup();d.resetMatrix();K.onSetup()}resetContext();if(d.draw){if(!aG){d.redraw()}else {d.loop()}}}else {f.setTimeout(function(){bZ(d)},b_)}};v(this);bZ(j)}else {K=new d.Sketch();wireDimensionalFunctions();j.size=function(g,e,d){if(d&&d===2){wireDimensionalFunctions('3D')}else {wireDimensionalFunctions('2D')}j.size(g,e,d)}}};d.debug=A;d.prototype=g;function getGlobalMembers(){var k=['abs','acos','alpha','ambient','ambientLight','append','applyMatrix','arc','arrayCopy','asin','atan','atan2','background','beginCamera','beginDraw','beginShape','bezier','bezierDetail','bezierPoint','bezierTangent','bezierVertex','binary','blend','blendColor','blit_resize','blue','box','breakShape','brightness','camera','ceil','Character','color','colorMode','concat','constrain','copy','cos','createFont','createGraphics','createImage','cursor','curve','curveDetail','curvePoint','curveTangent','curveTightness','curveVertex','day','degrees','directionalLight','disableContextMenu','dist','draw','ellipse','ellipseMode','emissive','enableContextMenu','endCamera','endDraw','endShape','exit','exp','expand','externals','fill','filter','floor','focused','frameCount','frameRate','frustum','get','glyphLook','glyphTable','green','height','hex','hint','hour','hue','image','imageMode','intersect','join','key','keyCode','keyPressed','keyReleased','keyTyped','lerp','lerpColor','lightFalloff','lights','lightSpecular','line','link','loadBytes','loadFont','loadGlyphs','loadImage','loadPixels','loadShape','loadXML','loadStrings','log','loop','mag','map','match','matchAll','max','millis','min','minute','mix','modelX','modelY','modelZ','modes','month','mouseButton','mouseClicked','mouseDragged','mouseMoved','mouseOut','mouseOver','mousePressed','mouseReleased','mouseScroll','mouseScrolled','mouseX','mouseY','name','nf','nfc','nfp','nfs','noCursor','noFill','noise','noiseDetail','noiseSeed','noLights','noLoop','norm','normal','noSmooth','noStroke','noTint','ortho','param','parseBoolean','parseByte','parseChar','parseFloat','parseInt','peg','perspective','PImage','pixels','PMatrix2D','PMatrix3D','PMatrixStack','pmouseX','pmouseY','point','pointLight','popMatrix','popStyle','pow','print','printCamera','println','printMatrix','printProjection','PShape','PShapeSVG','pushMatrix','pushStyle','quad','radians','random','Random','randomSeed','rect','rectMode','red','redraw','requestImage','resetMatrix','reverse','rotate','rotateX','rotateY','rotateZ','round','saturation','save','saveFrame','saveStrings','scale','screenX','screenY','screenZ','second','set','setup','shape','shapeMode','shared','shearX','shearY','shininess','shorten','sin','size','smooth','sort','specular','sphere','sphereDetail','splice','split','splitTokens','spotLight','sq','sqrt','status','str','stroke','strokeCap','strokeJoin','strokeWeight','subset','tan','text','textAlign','textAscent','textDescent','textFont','textLeading','textMode','textSize','texture','textureMode','textWidth','tint','toImageData','touchCancel','touchEnd','touchMove','touchStart','translate','transform','triangle','trim','unbinary','unhex','updatePixels','use3DContext','vertex','width','XMLElement','XML','year','__contains','__equals','__equalsIgnoreCase','__frameRate','__hashCode','__int_cast','__instanceof','__keyPressed','__mousePressed','__printStackTrace','__replace','__replaceAll','__replaceFirst','__toCharArray','__split','__codePointAt','__startsWith','__endsWith','__matches'];var h={};var e,g;for(e=0,g=k.length;e<g;++e){h[k[e]]=null}for(var i in d.lib){if(d.lib.hasOwnProperty(i)){if(d.lib[i].exports){var j=d.lib[i].exports;for(e=0,g=j.length;e<g;++e){h[j[e]]=null}}}}return h}function parseProcessing(G){var B=getGlobalMembers();function splitToAtoms(l){var g=[];var h=l.split(/([\{\[\(\)\]\}])/);var e=h[0];var j=[];for(var i=1;i<h.length;i+=2){var d=h[i];if(d==='['||d==='{'||d==='('){j.push(e);e=d}else {if(d===']'||d==='}'||d===')'){var m=d==='}'?'A':d===')'?'B':'C';var k=g.length;g.push(e+d);e=j.pop()+'"'+m+(k+1)+'"'}}e+=h[i+1]}g.unshift(e);return g}function injectStrings(e,d){return e.replace(/'(\d+)'/g,function(i,h){var g=d[h];if(g.charAt(0)==='/'){return g}return /^'((?:[^'\\\n])|(?:\\.[0-9A-Fa-f]*))'$/.test(g)?'(new $p.Character('+g+'))':g})}function trimSpaces(e){var g=/^\s*/.exec(e),d;if(g[0].length===e.length){d={left:g[0],middle:'',right:''}}else {var h=/\s*$/.exec(e);d={left:g[0],middle:e.substring(g[0].length,h.index),right:h[0]}}d.untrim=function(d){return this.left+d+this.right};return d}function trim(d){return d.replace(/^\s+/,'').replace(/\s+$/,'')}function appendToLookupTable(g,e){for(var d=0,h=e.length;d<h;++d){g[e[d]]=null}return g}function isLookupTableEmpty(d){for(var e in d){if(d.hasOwnProperty(e)){return !1}}return !0}function getAtomIndex(d){return d.substring(2,d.length-1)}var A=G.replace(/\r\n?|\n\r/g,'\n');var q=[];var m=A.replace(/("(?:[^"\\\n]|\\.)*")|('(?:[^'\\\n]|\\.)*')|(([\[\(=|&!\^:?]\s*)(\/(?![*\/])(?:[^\/\\\n]|\\.)*\/[gim]*)\b)|(\/\/[^\n]*\n)|(\/\*(?:(?!\*\/)(?:.|\n))*\*\/)/g,function(l,j,h,e,i,k,m,g){var d;if(j||h){d=q.length;q.push(l);return "'"+d+"'"}if(e){d=q.length;q.push(k);return i+"'"+d+"'"}return g!==''?' ':'\n'});m=m.replace(/__x([0-9A-F]{4})/g,function(e,d){return '__x005F_x'+d});m=m.replace(/\$/g,'__x0024');var t;var v=m;var D=function(g,d,h,e){if(!!d||!!e){return g}t=!0;return ''};do{t=!1;v=v.replace(/([<]?)<\s*((?:\?|[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\[\])*(?:\s+(?:extends|super)\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)?(?:\s*,\s*(?:\?|[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\[\])*(?:\s+(?:extends|super)\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)?)*)\s*>([=]?)/g,D)}while(t);var d=splitToAtoms(v);var e;var h={},j,C=0;function addAtom(g,h){var e=d.length;d.push(g);return '"'+h+e+'"'}function generateClassId(){return 'class'+ ++C}function appendClass(d,e,g){d.classId=e;d.scopeId=g;h[e]=d}var r,s,k,u,z,i;var n=/\b((?:(?:public|private|final|protected|static|abstract)\s+)*)(class|interface)\s+([A-Za-z_$][\w$]*\b)(\s+extends\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\b)*)?(\s+implements\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\b)*)?\s*("A\d+")/g;var o=/\b((?:(?:public|private|final|protected|static|abstract|synchronized)\s+)*)((?!(?:else|new|return|throw|function|public|private|protected)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*([A-Za-z_$][\w$]*\b)\s*("B\d+")(\s*throws\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)*)?\s*("A\d+"|;)/g;var F=/^((?:(?:public|private|final|protected|static)\s+)*)((?!(?:else|new|return|throw)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*([A-Za-z_$][\w$]*\b)\s*(?:"C\d+"\s*)*([=,]|$)/;var E=/\b((?:(?:public|private|final|protected|static|abstract)\s+)*)((?!(?:new|return|throw)\b)[A-Za-z_$][\w$]*\b)\s*("B\d+")(\s*throws\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)*)?\s*("A\d+")/g;var x=/^((?:(?:public|private|final|protected|static)\s+)*)((?!(?:new|return|throw)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*/;var y=/\bfunction(?:\s+([A-Za-z_$][\w$]*))?\s*("B\d+")\s*("A\d+")/g;function extractClassesAndMethods(e){var d=e;d=d.replace(n,function(d){return addAtom(d,'E')});d=d.replace(o,function(d){return addAtom(d,'D')});d=d.replace(y,function(d){return addAtom(d,'H')});return d}function extractConstructors(g,d){var e=g.replace(E,function(e,k,h,j,i,l){if(h!==d){return e}return addAtom(e,'G')});return e}function AstParam(d){this.name=d}AstParam.prototype.toString=function(){return this.name};function AstParams(e,d){this.params=e;this.methodArgsParam=d}AstParams.prototype.getNames=function(){var e=[];for(var d=0,g=this.params.length;d<g;++d){e.push(this.params[d].name)}return e};AstParams.prototype.prependMethodArgs=function(d){if(!this.methodArgsParam){return d}return '{\nvar '+this.methodArgsParam.name+' = Array.prototype.slice.call(arguments, '+this.params.length+');\n'+d.substring(1)};AstParams.prototype.toString=function(){if(this.params.length===0){return '()'}var d='(';for(var e=0,g=this.params.length;e<g;++e){d+=this.params[e]+', '}return d.substring(0,d.length-2)+')'};function transformParams(i){var h=trim(i.substring(1,i.length-1));var j=[],g=null;if(h!==''){var e=h.split(',');for(var d=0;d<e.length;++d){var k=/\b([A-Za-z_$][\w$]*\b)(\s*"[ABC][\d]*")*\s*$/.exec(e[d]);if(d===e.length-1&&e[d].indexOf('...')>=0){g=new AstParam(k[1]);break}j.push(new AstParam(k[1]))}}return new AstParams(j,g)}function preExpressionTransform(h){var e=h;e=e.replace(/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\s*"C\d+")+\s*("A\d+")/g,function(g,e,d){return d});e=e.replace(/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\s*"B\d+")\s*("A\d+")/g,function(d,g,e){return addAtom(d,'F')});e=e.replace(y,function(d){return addAtom(d,'H')});e=e.replace(/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)\s*("C\d+"(?:\s*"C\d+")*)/g,function(l,k,j){var e=j.replace(/"C(\d+)"/g,function(g,e){return d[e]}).replace(/\[\s*\]/g,'[null]').replace(/\s*\]\s*\[\s*/g,', ');var g='{'+e.substring(1,e.length-1)+'}';var i="('"+k+"', "+addAtom(g,'A')+')';return '$p.createJavaArray'+addAtom(i,'B')});e=e.replace(/(\.\s*length)\s*"B\d+"/g,'$1');e=e.replace(/#([0-9A-Fa-f]{6})\b/g,function(e,d){return '0xFF'+d});e=e.replace(/"B(\d+)"(\s*(?:[\w$']|"B))/g,function(j,k,i){var e=d[k];if(!/^\(\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\s*(?:"C\d+"\s*)*\)$/.test(e)){return j}if(/^\(\s*int\s*\)$/.test(e)){return '(int)'+i}var g=e.split(/"C(\d+)"/g);if(g.length>1){if(!/^\[\s*\]$/.test(d[g[1]])){return j}}return ''+i});e=e.replace(/\(int\)([^,\]\)\}\?:\*\+\-\/\^\|%&~<>=]+)/g,function(g,e){var d=trimSpaces(e);return d.untrim('__int_cast('+d.middle+')')});e=e.replace(/\bsuper(\s*"B\d+")/g,'$$superCstr$1').replace(/\bsuper(\s*\.)/g,'$$super$1');e=e.replace(/\b0+((\d*)(?:\.[\d*])?(?:[eE][\-\+]?\d+)?[fF]?)\b/,function(g,d,e){if(d===e){return g}return e===''?'0'+d:d});e=e.replace(/\b(\.?\d+\.?)[fF]\b/g,'$1');e=e.replace(/([^\s])%([^=\s])/g,'$1 % $2');e=e.replace(/\b(frameRate|keyPressed|mousePressed)\b(?!\s*"B)/g,'__$1');e=e.replace(/\b(boolean|byte|char|float|int)\s*"B/g,function(e,d){return 'parse'+d.substring(0,1).toUpperCase()+d.substring(1)+'"B'});e=e.replace(/\bpixels\b\s*(("C(\d+)")|\.length)?(\s*=(?!=)([^,\]\)\}]+))?/g,function(m,j,l,k,g,i){if(l){var e=d[k];if(g){return 'pixels.setPixel'+addAtom('('+e.substring(1,e.length-1)+','+i+')','B')}return 'pixels.getPixel'+addAtom('('+e.substring(1,e.length-1)+')','B')}if(j){return 'pixels.getLength'+addAtom('()','B')}if(g){return 'pixels.set'+addAtom('('+i+')','B')}return 'pixels.toArray'+addAtom('()','B')});var g;function replacePrototypeMethods(m,e,l,k){var j=d[k];g=!0;var i=trimSpaces(j.substring(1,j.length-1));return '__'+l+(i.middle===''?addAtom('('+e.replace(/\.\s*$/,'')+')','B'):addAtom('('+e.replace(/\.\s*$/,'')+','+i.middle+')','B'))}do{g=!1;e=e.replace(/((?:'\d+'|\b[A-Za-z_$][\w$]*\s*(?:"[BC]\d+")*)\s*\.\s*(?:[A-Za-z_$][\w$]*\s*(?:"[BC]\d+"\s*)*\.\s*)*)(replace|replaceAll|replaceFirst|contains|equals|equalsIgnoreCase|hashCode|toCharArray|printStackTrace|split|startsWith|endsWith|codePointAt|matches)\s*"B(\d+)"/g,replacePrototypeMethods)}while(g);function replaceInstanceof(i,d,e){g=!0;return '__instanceof'+addAtom('('+d+', '+e+')','B')}do{g=!1;e=e.replace(/((?:'\d+'|\b[A-Za-z_$][\w$]*\s*(?:"[BC]\d+")*)\s*(?:\.\s*[A-Za-z_$][\w$]*\s*(?:"[BC]\d+"\s*)*)*)instanceof\s+([A-Za-z_$][\w$]*\s*(?:\.\s*[A-Za-z_$][\w$]*)*)/g,replaceInstanceof)}while(g);e=e.replace(/\bthis(\s*"B\d+")/g,'$$constr$1');return e}function AstInlineClass(e,d){this.baseInterfaceName=e;this.body=d;d.owner=this}AstInlineClass.prototype.toString=function(){return 'new ('+this.body+')'};function transformInlineClass(l){var g=(new RegExp(/\bnew\s*([A-Za-z_$][\w$]*\s*(?:\.\s*[A-Za-z_$][\w$]*)*)\s*"B\d+"\s*"A(\d+)"/)).exec(l);var k=j,e=generateClassId();j=e;var h=g[1]+'$'+e;var i=new AstInlineClass(h,r(d[g[2]],h,'','implements '+g[1]));appendClass(i,e,k);j=k;return i}function AstFunction(g,d,e){this.name=g;this.params=d;this.body=e}AstFunction.prototype.toString=function(){var g=e;var h=appendToLookupTable({'this':null},this.params.getNames());e=function(d){return h.hasOwnProperty(d.name)?d.name:g(d)};var d='function';if(this.name){d+=' '+this.name}var i=this.params.prependMethodArgs(this.body.toString());d+=this.params+' '+i;e=g;return d};function transformFunction(g){var e=(new RegExp(/\b([A-Za-z_$][\w$]*)\s*"B(\d+)"\s*"A(\d+)"/)).exec(g);return new AstFunction(e[1]!=='function'?e[1]:null,transformParams(d[e[2]]),k(d[e[3]]))}function AstInlineObject(d){this.members=d}AstInlineObject.prototype.toString=function(){var h=e;e=function(d){return d.name==='this'?'this':h(d)};var g='';for(var d=0,i=this.members.length;d<i;++d){if(this.members[d].label){g+=this.members[d].label+': '}g+=this.members[d].value.toString()+', '}e=h;return g.substring(0,g.length-2)};function transformInlineObject(h){var d=h.split(',');for(var e=0;e<d.length;++e){var g=d[e].indexOf(':');if(g<0){d[e]={value:i(d[e])}}else {d[e]={label:trim(d[e].substring(0,g)),value:i(trim(d[e].substring(g+1)))}}}return new AstInlineObject(d)}function expandExpression(e){if(e.charAt(0)==='('||e.charAt(0)==='['){return e.charAt(0)+expandExpression(e.substring(1,e.length-1))+e.charAt(e.length-1)}if(e.charAt(0)==='{'){if(/^\{\s*(?:[A-Za-z_$][\w$]*|'\d+')\s*:/.test(e)){return '{'+addAtom(e.substring(1,e.length-1),'I')+'}'}return '['+expandExpression(e.substring(1,e.length-1))+']'}var h=trimSpaces(e);var g=preExpressionTransform(h.middle);g=g.replace(/"[ABC](\d+)"/g,function(h,g){return expandExpression(d[g])});return h.untrim(g)}function replaceContextInVars(d){return d.replace(/(\.\s*)?((?:\b[A-Za-z_]|\$)[\w$]*)(\s*\.\s*([A-Za-z_$][\w$]*)(\s*\()?)?/g,function(m,h,i,g,j,k){if(h){return m}var l={name:i,member:j,callSign:!!k};return e(l)+(g===b?'':g)})}function AstExpression(e,d){this.expr=e;this.transforms=d}AstExpression.prototype.toString=function(){var d=this.transforms;var e=replaceContextInVars(this.expr);return e.replace(/"!(\d+)"/g,function(g,e){return d[e].toString()})};i=function(h){var e=[];var g=expandExpression(h);g=g.replace(/"H(\d+)"/g,function(i,g){e.push(transformFunction(d[g]));return '"!'+(e.length-1)+'"'});g=g.replace(/"F(\d+)"/g,function(i,g){e.push(transformInlineClass(d[g]));return '"!'+(e.length-1)+'"'});g=g.replace(/"I(\d+)"/g,function(i,g){e.push(transformInlineObject(d[g]));return '"!'+(e.length-1)+'"'});return new AstExpression(g,e)};function AstVarDefinition(g,e,d){this.name=g;this.value=e;this.isDefault=d}AstVarDefinition.prototype.toString=function(){return this.name+' = '+this.value};function transformVarDefinition(d,k){var g=d.indexOf('=');var j,h,e;if(g<0){j=d;h=k;e=!0}else {j=d.substring(0,g);h=i(d.substring(g+1));e=!1}return new AstVarDefinition(trim(j.replace(/(\s*"C\d+")+/g,'')),h,e)}function getDefaultValueForType(d){if(d==='int'||d==='float'){return '0'}if(d==='boolean'){return 'false'}if(d==='color'){return '0x00000000'}return 'null'}function AstVar(d,e){this.definitions=d;this.varType=e}AstVar.prototype.getNames=function(){var e=[];for(var d=0,g=this.definitions.length;d<g;++d){e.push(this.definitions[d].name)}return e};AstVar.prototype.toString=function(){return 'var '+this.definitions.join(',')};function AstStatement(d){this.expression=d}AstStatement.prototype.toString=function(){return this.expression.toString()};function transformStatement(e){if(F.test(e)){var h=x.exec(e);var d=e.substring(h[0].length).split(',');var j=getDefaultValueForType(h[2]);for(var g=0;g<d.length;++g){d[g]=transformVarDefinition(d[g],j)}return new AstVar(d,h[2])}return new AstStatement(i(e))}function AstForExpression(d,e,g){this.initStatement=d;this.condition=e;this.step=g}AstForExpression.prototype.toString=function(){return '('+this.initStatement+'; '+this.condition+'; '+this.step+')'};function AstForInExpression(d,e){this.initStatement=d;this.container=e}AstForInExpression.prototype.toString=function(){var d=this.initStatement.toString();if(d.indexOf('=')>=0){d=d.substring(0,d.indexOf('='))}return '('+d+' in '+this.container+')'};function AstForEachExpression(d,e){this.initStatement=d;this.container=e}AstForEachExpression.iteratorId=0;AstForEachExpression.prototype.toString=function(){var i=this.initStatement.toString();var d='$it'+AstForEachExpression.iteratorId++;var e=i.replace(/^\s*var\s*/,'').split('=')[0];var g='var '+d+' = new $p.ObjectIterator('+this.container+'), '+e+' = void(0)';var h=d+'.hasNext() && (('+e+' = '+d+'.next()) || true)';return '('+g+'; '+h+';)'};function transformForExpression(e){var d;if(/\bin\b/.test(e)){d=e.substring(1,e.length-1).split(/\bin\b/g);return new AstForInExpression(transformStatement(trim(d[0])),i(d[1]))}if(e.indexOf(':')>=0&&e.indexOf(';')<0){d=e.substring(1,e.length-1).split(':');return new AstForEachExpression(transformStatement(trim(d[0])),i(d[1]))}d=e.substring(1,e.length-1).split(';');return new AstForExpression(transformStatement(trim(d[0])),i(d[1]),i(d[2]))}function sortByWeight(d){d.sort(function(e,g){return g.weight-e.weight})}function AstInnerInterface(g,d,e){this.name=g;this.body=d;this.isStatic=e;d.owner=this}AstInnerInterface.prototype.toString=function(){return ''+this.body};function AstInnerClass(g,d,e){this.name=g;this.body=d;this.isStatic=e;d.owner=this}AstInnerClass.prototype.toString=function(){return ''+this.body};function transformInnerClass(m){var e=n.exec(m);n.lastIndex=0;var k=e[1].indexOf('static')>=0;var l=d[getAtomIndex(e[6])],g;var i=j,h=generateClassId();j=h;if(e[2]==='interface'){g=new AstInnerInterface(e[3],s(l,e[3],e[4]),k)}else {g=new AstInnerClass(e[3],r(l,e[3],e[4],e[5]),k)}appendClass(g,h,i);j=i;return g}function AstClassMethod(h,e,g,d){this.name=h;this.params=e;this.body=g;this.isStatic=d}AstClassMethod.prototype.toString=function(){var g=appendToLookupTable({},this.params.getNames());var d=e;e=function(e){return g.hasOwnProperty(e.name)?e.name:d(e)};var i=this.params.prependMethodArgs(this.body.toString());var h='function '+this.methodId+this.params+' '+i+'\n';e=d;return h};function transformClassMethod(h){var e=o.exec(h);o.lastIndex=0;var g=e[1].indexOf('static')>=0;var i=e[6]!==';'?d[getAtomIndex(e[6])]:'{}';return new AstClassMethod(e[3],transformParams(d[getAtomIndex(e[4])]),k(i),g)}function AstClassField(d,e,g){this.definitions=d;this.fieldType=e;this.isStatic=g}AstClassField.prototype.getNames=function(){var e=[];for(var d=0,g=this.definitions.length;d<g;++d){e.push(this.definitions[d].name)}return e};AstClassField.prototype.toString=function(){var g=e({name:'[this]'});if(this.isStatic){var m=this.owner.name;var i=[];for(var h=0,n=this.definitions.length;h<n;++h){var j=this.definitions[h];var k=j.name,d=m+'.'+k;var l='if('+d+' === void(0)) {\n'+' '+d+' = '+j.value+'; }\n'+'$p.defineProperty('+g+', '+"'"+k+"', { get: function(){return "+d+';}, '+'set: function(val){'+d+' = val;} });\n';i.push(l)}return i.join('')}return g+'.'+this.definitions.join('; '+g+'.')};function transformClassField(h){var d=x.exec(h);var j=d[1].indexOf('static')>=0;var e=h.substring(d[0].length).split(/,\s*/g);var i=getDefaultValueForType(d[2]);for(var g=0;g<e.length;++g){e[g]=transformVarDefinition(e[g],i)}return new AstClassField(e,d[2],j)}function AstConstructor(d,e){this.params=d;this.body=e}AstConstructor.prototype.toString=function(){var h=appendToLookupTable({},this.params.getNames());var g=e;e=function(d){return h.hasOwnProperty(d.name)?d.name:g(d)};var i='function $constr_'+this.params.params.length+this.params.toString();var d=this.params.prependMethodArgs(this.body.toString());if(!/\$(superCstr|constr)\b/.test(d)){d='{\n$superCstr();\n'+d.substring(1)}e=g;return i+d+'\n'};function transformConstructor(h){var e=(new RegExp(/"B(\d+)"\s*"A(\d+)"/)).exec(h);var g=transformParams(d[e[1]]);return new AstConstructor(g,k(d[e[2]]))}function AstInterfaceBody(l,h,j,e,i,k){var d,g;this.name=l;this.interfacesNames=h;this.methodsNames=j;this.fields=e;this.innerClasses=i;this.misc=k;for(d=0,g=e.length;d<g;++d){e[d].owner=this}}AstInterfaceBody.prototype.getMembers=function(i,h,j){if(this.owner.base){this.owner.base.body.getMembers(i,h,j)}var d,g,e,m;for(d=0,e=this.fields.length;d<e;++d){var k=this.fields[d].getNames();for(g=0,m=k.length;g<m;++g){i[k[g]]=this.fields[d]}}for(d=0,e=this.methodsNames.length;d<e;++d){var n=this.methodsNames[d];h[n]=!0}for(d=0,e=this.innerClasses.length;d<e;++d){var l=this.innerClasses[d];j[l.name]=l}};AstInterfaceBody.prototype.toString=function(){function getScopeLevel(d){var e=0;while(d){++e;d=d.scope}return e}var r=getScopeLevel(this.owner);var g=this.name;var i='';var j='';var p={},o={},q={};this.getMembers(p,o,q);var d,h,s,t;if(this.owner.interfaces){var m=[],k;for(d=0,h=this.interfacesNames.length;d<h;++d){if(!this.owner.interfaces[d]){continue}k=e({name:this.interfacesNames[d]});m.push(k);i+='$p.extendInterfaceMembers('+g+', '+k+');\n'}j+=g+'.$interfaces = ['+m.join(', ')+'];\n'}j+=g+'.$isInterface = true;\n';j+=g+".$methods = ['"+this.methodsNames.join("', '")+"'];\n";sortByWeight(this.innerClasses);for(d=0,h=this.innerClasses.length;d<h;++d){var l=this.innerClasses[d];if(l.isStatic){i+=g+'.'+l.name+' = '+l+';\n'}}for(d=0,h=this.fields.length;d<h;++d){var n=this.fields[d];if(n.isStatic){i+=g+'.'+n.definitions.join(';\n'+g+'.')+';\n'}}return '(function() {\n'+'function '+g+"() { throw 'Unable to create the interface'; }\n"+i+j+'return '+g+';\n'+'})()'};s=function(n,o,m){var g=n.substring(1,n.length-1);g=extractClassesAndMethods(g);g=extractConstructors(g,o);var i=[],j=[];g=g.replace(/"([DE])(\d+)"/g,function(g,e,d){if(e==='D'){i.push(d)}else {if(e==='E'){j.push(d)}}return ''});var k=g.split(/;(?:\s*;)*/g);var l;var e,h;if(m!==b){l=m.replace(/^\s*extends\s+(.+?)\s*$/g,'$1').split(/\s*,\s*/g)}for(e=0,h=i.length;e<h;++e){var p=transformClassMethod(d[i[e]]);i[e]=p.name}for(e=0,h=k.length-1;e<h;++e){var q=trimSpaces(k[e]);k[e]=transformClassField(q.middle)}var r=k.pop();for(e=0,h=j.length;e<h;++e){j[e]=transformInnerClass(d[j[e]])}return new AstInterfaceBody(o,l,i,k,j,{tail:r})};function AstClassBody(o,i,h,k,l,e,m,j,n){var d,g;this.name=o;this.baseClassName=i;this.interfacesNames=h;this.functions=k;this.methods=l;this.fields=e;this.cstrs=m;this.innerClasses=j;this.misc=n;for(d=0,g=e.length;d<g;++d){e[d].owner=this}}AstClassBody.prototype.getMembers=function(i,h,j){if(this.owner.base){this.owner.base.body.getMembers(i,h,j)}var d,g,e,n;for(d=0,e=this.fields.length;d<e;++d){var k=this.fields[d].getNames();for(g=0,n=k.length;g<n;++g){i[k[g]]=this.fields[d]}}for(d=0,e=this.methods.length;d<e;++d){var m=this.methods[d];h[m.name]=m}for(d=0,e=this.innerClasses.length;d<e;++d){var l=this.innerClasses[d];j[l.name]=l}};AstClassBody.prototype.toString=function(){function getScopeLevel(d){var e=0;while(d){++e;d=d.scope}return e}var I=getScopeLevel(this.owner);var h='$this_'+I;var i=this.name;var g='var '+h+' = this;\n';var l='';var y='';var v={},u={},B={};this.getMembers(v,u,B);var r=e;e=function(e){var d=e.name;if(d==='this'){return e.callSign||!e.member?h+'.$self':h}if(v.hasOwnProperty(d)){return v[d].isStatic?i+'.'+d:h+'.'+d}if(B.hasOwnProperty(d)){return h+'.'+d}if(u.hasOwnProperty(d)){return u[d].isStatic?i+'.'+d:h+'.$self.'+d}return r(e)};var q;if(this.baseClassName){q=r({name:this.baseClassName});g+='var $super = { $upcast: '+h+' };\n';g+='function $superCstr(){'+q+".apply($super,arguments);if(!('$self' in $super)) $p.extendClassChain($super)}\n";y+=i+'.$base = '+q+';\n'}else {g+='function $superCstr(){$p.extendClassChain('+h+')}\n'}if(this.owner.base){l+='$p.extendStaticMembers('+i+', '+q+');\n'}var d,k,s,F;if(this.owner.interfaces){var z=[],t;for(d=0,k=this.interfacesNames.length;d<k;++d){if(!this.owner.interfaces[d]){continue}t=r({name:this.interfacesNames[d]});z.push(t);l+='$p.extendInterfaceMembers('+i+', '+t+');\n'}y+=i+'.$interfaces = ['+z.join(', ')+'];\n'}if(this.functions.length>0){g+=this.functions.join('\n')+'\n'}sortByWeight(this.innerClasses);for(d=0,k=this.innerClasses.length;d<k;++d){var m=this.innerClasses[d];if(m.isStatic){l+=i+'.'+m.name+' = '+m+';\n';g+=h+'.'+m.name+' = '+i+'.'+m.name+';\n'}else {g+=h+'.'+m.name+' = '+m+';\n'}}for(d=0,k=this.fields.length;d<k;++d){var p=this.fields[d];if(p.isStatic){l+=i+'.'+p.definitions.join(';\n'+i+'.')+';\n';for(s=0,F=p.definitions.length;s<F;++s){var E=p.definitions[s].name,D=i+'.'+E;g+='$p.defineProperty('+h+", '"+E+"', {"+'get: function(){return '+D+'}, '+'set: function(val){'+D+' = val}});\n'}}else {g+=h+'.'+p.definitions.join(';\n'+h+'.')+';\n'}}var A={};for(d=0,k=this.methods.length;d<k;++d){var j=this.methods[d];var o=A[j.name];var n=j.name+'$'+j.params.params.length;var w=!!j.params.methodArgsParam;if(o){++o;n+='_'+o}else {o=1}j.methodId=n;A[j.name]=o;if(j.isStatic){l+=j;l+='$p.addMethod('+i+", '"+j.name+"', "+n+', '+w+');\n';g+='$p.addMethod('+h+", '"+j.name+"', "+n+', '+w+');\n'}else {g+=j;g+='$p.addMethod('+h+", '"+j.name+"', "+n+', '+w+');\n'}}g+=trim(this.misc.tail);if(this.cstrs.length>0){g+=this.cstrs.join('\n')+'\n'}g+='function $constr() {\n';var x=[];for(d=0,k=this.cstrs.length;d<k;++d){var C=this.cstrs[d].params.params.length;var H=!!this.cstrs[d].params.methodArgsParam;x.push('if(arguments.length '+(H?'>=':'===')+' '+C+') { '+'$constr_'+C+'.apply('+h+', arguments); }')}if(x.length>0){g+=x.join(' else ')+' else '}g+='$superCstr();\n}\n';g+='$constr.apply(null, arguments);\n';e=r;return '(function() {\n'+'function '+i+'() {\n'+g+'}\n'+l+y+'return '+i+';\n'+'})()'};r=function(q,r,p,o){var g=q.substring(1,q.length-1);g=extractClassesAndMethods(g);g=extractConstructors(g,r);var j=[],i=[],l=[],h=[];g=g.replace(/"([DEGH])(\d+)"/g,function(g,e,d){if(e==='D'){j.push(d)}else {if(e==='E'){i.push(d)}else {if(e==='H'){h.push(d)}else {l.push(d)}}}return ''});var k=g.replace(/^(?:\s*;)+/,'').split(/;(?:\s*;)*/g);var n,m;var e;if(p!==b){n=p.replace(/^\s*extends\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)\s*$/g,'$1')}if(o!==b){m=o.replace(/^\s*implements\s+(.+?)\s*$/g,'$1').split(/\s*,\s*/g)}for(e=0;e<h.length;++e){h[e]=transformFunction(d[h[e]])}for(e=0;e<j.length;++e){j[e]=transformClassMethod(d[j[e]])}for(e=0;e<k.length-1;++e){var s=trimSpaces(k[e]);k[e]=transformClassField(s.middle)}var t=k.pop();for(e=0;e<l.length;++e){l[e]=transformConstructor(d[l[e]])}for(e=0;e<i.length;++e){i[e]=transformInnerClass(d[i[e]])}return new AstClassBody(r,n,m,h,j,k,l,i,{tail:t})};function AstInterface(e,d){this.name=e;this.body=d;d.owner=this}AstInterface.prototype.toString=function(){return 'var '+this.name+' = '+this.body+';\n'+'$p.'+this.name+' = '+this.name+';\n'};function AstClass(e,d){this.name=e;this.body=d;d.owner=this}AstClass.prototype.toString=function(){return 'var '+this.name+' = '+this.body+';\n'+'$p.'+this.name+' = '+this.name+';\n'};function transformGlobalClass(l){var e=n.exec(l);n.lastIndex=0;var k=d[getAtomIndex(e[6])];var i=j,h=generateClassId();j=h;var g;if(e[2]==='interface'){g=new AstInterface(e[3],s(k,e[3],e[4]))}else {g=new AstClass(e[3],r(k,e[3],e[4],e[5]))}appendClass(g,h,i);j=i;return g}function AstMethod(g,d,e){this.name=g;this.params=d;this.body=e}AstMethod.prototype.toString=function(){var g=appendToLookupTable({},this.params.getNames());var d=e;e=function(e){return g.hasOwnProperty(e.name)?e.name:d(e)};var i=this.params.prependMethodArgs(this.body.toString());var h='function '+this.name+this.params+' '+i+'\n'+'$p.'+this.name+' = '+this.name+';';e=d;return h};function transformGlobalMethod(g){var e=o.exec(g);var h=o.lastIndex=0;return new AstMethod(e[3],transformParams(d[getAtomIndex(e[4])]),k(d[getAtomIndex(e[6])]))}function preStatementsTransform(e){var d=e;d=d.replace(/\b(catch\s*"B\d+"\s*"A\d+")(\s*catch\s*"B\d+"\s*"A\d+")+/g,'$1');return d}function AstForStatement(d,e){this.argument=d;this.misc=e}AstForStatement.prototype.toString=function(){return this.misc.prefix+this.argument.toString()};function AstCatchStatement(d,e){this.argument=d;this.misc=e}AstCatchStatement.prototype.toString=function(){return this.misc.prefix+this.argument.toString()};function AstPrefixStatement(g,d,e){this.name=g;this.argument=d;this.misc=e}AstPrefixStatement.prototype.toString=function(){var d=this.misc.prefix;if(this.argument!==b){d+=this.argument.toString()}return d};function AstSwitchCase(d){this.expr=d}AstSwitchCase.prototype.toString=function(){return 'case '+this.expr+':'};function AstLabel(d){this.label=d}AstLabel.prototype.toString=function(){return this.label};u=function(h,s,t){var j=new RegExp(/\b(catch|for|if|switch|while|with)\s*"B(\d+)"|\b(do|else|finally|return|throw|try|break|continue)\b|("[ADEH](\d+)")|\b(case)\s+([^:]+):|\b([A-Za-z_$][\w$]*\s*:)|(;)/g);var e=[];h=preStatementsTransform(h);var l=0,g,m;while((g=j.exec(h))!==null){if(g[1]!==b){var u=h.lastIndexOf('"B',j.lastIndex);var p=h.substring(l,u);if(g[1]==='for'){e.push(new AstForStatement(transformForExpression(d[g[2]]),{prefix:p}))}else {if(g[1]==='catch'){e.push(new AstCatchStatement(transformParams(d[g[2]]),{prefix:p}))}else {e.push(new AstPrefixStatement(g[1],i(d[g[2]]),{prefix:p}))}}}else {if(g[3]!==b){e.push(new AstPrefixStatement(g[3],b,{prefix:h.substring(l,j.lastIndex)}))}else {if(g[4]!==b){m=h.substring(l,j.lastIndex-g[4].length);if(trim(m).length!==0){continue}e.push(m);var r=g[4].charAt(1),o=g[5];if(r==='D'){e.push(s(d[o]))}else {if(r==='E'){e.push(t(d[o]))}else {if(r==='H'){e.push(transformFunction(d[o]))}else {e.push(k(d[o]))}}}}else {if(g[6]!==b){e.push(new AstSwitchCase(i(trim(g[7]))))}else {if(g[8]!==b){m=h.substring(l,j.lastIndex-g[8].length);if(trim(m).length!==0){continue}e.push(new AstLabel(h.substring(l,j.lastIndex)))}else {var q=trimSpaces(h.substring(l,j.lastIndex-1));e.push(q.left);e.push(transformStatement(q.middle));e.push(q.right+';')}}}}}l=j.lastIndex}var n=trimSpaces(h.substring(l));e.push(n.left);if(n.middle!==''){e.push(transformStatement(n.middle));e.push(';'+n.right)}return e};function getLocalNames(h){var e=[];for(var g=0,i=h.length;g<i;++g){var d=h[g];if(d instanceof AstVar){e=e.concat(d.getNames())}else {if(d instanceof AstForStatement&&d.argument.initStatement instanceof AstVar){e=e.concat(d.argument.initStatement.getNames())}else {if(d instanceof AstInnerInterface||d instanceof AstInnerClass||d instanceof AstInterface||d instanceof AstClass||d instanceof AstMethod||d instanceof AstFunction){e.push(d.name)}}}}return appendToLookupTable({},e)}function AstStatementsBlock(d){this.statements=d}AstStatementsBlock.prototype.toString=function(){var d=getLocalNames(this.statements);var g=e;if(!isLookupTableEmpty(d)){e=function(e){return d.hasOwnProperty(e.name)?e.name:g(e)}}var h='{\n'+this.statements.join('')+'\n}';e=g;return h};k=function(d){var e=trimSpaces(d.substring(1,d.length-1));return new AstStatementsBlock(u(e.middle))};function AstRoot(d){this.statements=d}AstRoot.prototype.toString=function(){var h=[],j=[],d;for(var i=0,n=this.statements.length;i<n;++i){d=this.statements[i];if(d instanceof AstClass||d instanceof AstInterface){h.push(d)}else {j.push(d)}}sortByWeight(h);var k=getLocalNames(this.statements);e=function(e){var d=e.name;if(k.hasOwnProperty(d)){return d}if(B.hasOwnProperty(d)||l.hasOwnProperty(d)||g.hasOwnProperty(d)){return '$p.'+d}return d};var m='// this code was autogenerated from PJS\n'+'(function($p) {\n'+h.join('')+'\n'+j.join('')+'\n})';e=null;return m};z=function(){var e=extractClassesAndMethods(d[0]);e=e.replace(/\bimport\s+[^;]+;/g,'');return new AstRoot(u(e,transformGlobalMethod,transformGlobalClass))};function generateMetadata(s){var o={};var e,d;for(e in h){if(h.hasOwnProperty(e)){d=h[e];var p=d.scopeId,q=d.name;if(p){var k=h[p];d.scope=k;if(k.inScope===b){k.inScope={}}k.inScope[q]=d}else {o[q]=d}}}function findInScopes(i,j){var g=j.split('.');var e=i.scope,d;while(e){if(e.hasOwnProperty(g[0])){d=e[g[0]];break}e=e.scope}if(d===b){d=o[g[0]]}for(var h=1,k=g.length;h<k&&d;++h){d=d.inScope[g[h]]}return d}for(e in h){if(h.hasOwnProperty(e)){d=h[e];var n=d.body.baseClassName;if(n){var i=findInScopes(d,n);if(i){d.base=i;if(!i.derived){i.derived=[]}i.derived.push(d)}}var j=d.body.interfacesNames,m=[],l,r;if(j&&j.length>0){for(l=0,r=j.length;l<r;++l){var g=findInScopes(d,j[l]);m.push(g);if(!g){continue}if(!g.derived){g.derived=[]}g.derived.push(d)}if(m.length>0){d.interfaces=m}}}}}function setWeight(n){var i=[],l={};var e,k,d;for(e in h){if(h.hasOwnProperty(e)){d=h[e];if(!d.inScope&&!d.derived){i.push(e);d.weight=0}else {var j=[];if(d.inScope){for(k in d.inScope){if(d.inScope.hasOwnProperty(k)){j.push(d.inScope[k])}}}if(d.derived){j=j.concat(d.derived)}l[e]=j}}}function removeDependentAndCheck(e,h){var d=l[e];if(!d){return !1}var g=d.indexOf(h);if(g<0){return !1}d.splice(g,1);if(d.length>0){return !1}delete l[e];return !0}while(i.length>0){e=i.shift();d=h[e];if(d.scopeId&&removeDependentAndCheck(d.scopeId,d)){i.push(d.scopeId);h[d.scopeId].weight=d.weight+1}if(d.base&&removeDependentAndCheck(d.base.classId,d)){i.push(d.base.classId);d.base.weight=d.weight+1}if(d.interfaces){var g,m;for(g=0,m=d.interfaces.length;g<m;++g){if(!d.interfaces[g]||!removeDependentAndCheck(d.interfaces[g].classId,d)){continue}i.push(d.interfaces[g].classId);d.interfaces[g].weight=d.weight+1}}}}var w=z();generateMetadata(w);setWeight(w);var p=w.toString();p=p.replace(/\s*\n(?:[\t ]*\n)+/g,'\n\n');p=p.replace(/__x([0-9A-F]{4})/g,function(e,d){return String.fromCharCode(parseInt(d,16))});return injectStrings(p,q)}function preprocessCode(r,h){var l=(new RegExp(/\/\*\s*@pjs\s+((?:[^\*]|\*+[^\*\/])*)\*\//g)).exec(r);if(l&&l.length===2){var k=[],p=l.splice(1,2)[0].replace(/\{([\s\S]*?)\}/g,function(){return function(e,d){k.push(d);return '{'+(k.length-1)+'}'}}()).replace('\n','').replace('\r','').split(';');var i=function(d){return d.replace(/^\s*["']?/,'').replace(/["']?\s*$/,'')};for(var m=0,u=p.length;m<u;m++){var j=p[m].split('=');if(j&&j.length===2){var d=i(j[0]),e=i(j[1]),g=[];if(d==='preload'){g=e.split(',');for(var n=0,v=g.length;n<v;n++){var t=i(g[n]);h.imageCache.add(t)}}else {if(d==='font'){g=e.split(',');for(var o=0,w=g.length;o<w;o++){var q=i(g[o]),s=/^\{(\d*?)\}$/.exec(q);PFont.preloading.add(s?JSON.parse('{'+k[s[1]]+'}'):q)}}else {if(d==='pauseOnBlur'){h.options.pauseOnBlur=e==='true'}else {if(d==='globalKeyEvents'){h.options.globalKeyEvents=e==='true'}else {if(d.substring(0,6)==='param-'){h.params[d.substring(6)]=e}else {h.options[d]=e}}}}}}}}return r}d.compile=function(h){var e=new d.Sketch();var i=preprocessCode(h,e);var g=parseProcessing(i);e.sourceCode=g;return e};var w=function(){var d={},h='undefined',i='function',e=!1,k=!0,j=512,g='log';if(typeof tinylog!==h&&typeof tinylog[g]===i){d[g]=tinylog[g]}else {if(typeof c!==h&&!c.fake){(function(){var n=c,m='div',q='style',r='title',x={zIndex:10000,position:'fixed',bottom:'0px',width:'100%',height:'15%',fontFamily:'sans-serif',color:'#ccc',backgroundColor:'black'},A={position:'relative',fontFamily:'monospace',overflow:'auto',height:'100%',paddingTop:'5px'},z={height:'5px',marginTop:'-5px',cursor:'n-resize',backgroundColor:'darkgrey'},w={position:'absolute',top:'5px',right:'20px',color:'#111',MozBorderRadius:'4px',webkitBorderRadius:'4px',borderRadius:'4px',cursor:'pointer',fontWeight:'normal',textAlign:'center',padding:'3px 5px',backgroundColor:'#333',fontSize:'12px'},B={minHeight:'16px'},y={fontSize:'12px',margin:'0 8px 0 8px',maxWidth:'100%',whiteSpace:'pre-wrap',overflow:'auto'},v=n.defaultView,o=n.documentElement,p=o[q],u=function(){var g=arguments.length,h,d,e;while(g--){d=arguments[g--];h=arguments[g][q];for(e in d){if(d.hasOwnProperty(e)){h[e]=d[e]}}}},l=function(d,h,g){if(d.addEventListener){d.addEventListener(h,g,e)}else {if(d.attachEvent){d.attachEvent('on'+h,g)}}return [d,h,g]},D=function(d,h,g){if(d.removeEventListener){d.removeEventListener(h,g,e)}else {if(d.detachEvent){d.detachEvent('on'+h,g)}}},t=function(e){var d=e.childNodes,g=d.length;while(g--){e.removeChild(d.item(0))}},h=function(e,d){return e.appendChild(d)},i=function(d){return n.createElement(d)},s=function(d){return n.createTextNode(d)},C=d[g]=function(S){var Q,R=p.paddingBottom,E=i(m),N=E[q],G=h(E,i(m)),F=h(E,i(m)),J=h(E,i(m)),H=e,I=e,K=e,P=0,M=function(){p.paddingBottom=E.clientHeight+'px'},L=function(d){var e=v.innerHeight,g=G.clientHeight;if(d<0){d=0}else {if(d+g>e){d=e-g}}N.height=d/e*100+'%';M()},O=[l(n,'mousemove',function(d){if(H){L(v.innerHeight-d.clientY);F.scrollTop=K}}),l(n,'mouseup',function(){if(H){H=K=e}}),l(G,'dblclick',function(d){d.preventDefault();if(I){L(I);I=e}else {I=E.clientHeight;N.height='0px'}}),l(G,'mousedown',function(d){d.preventDefault();H=k;K=F.scrollTop}),l(G,'contextmenu',function(){H=e}),l(J,'click',function(){Q()})];Q=function(){var e=O.length;while(e--){D.apply(d,O[e])}o.removeChild(E);p.paddingBottom=R;t(F);t(E);d[g]=C};u(E,x,F,A,G,z,J,w);J[r]='Close Log';h(J,s('✖'));G[r]='Double-click to toggle log minimization';o.insertBefore(E,o.firstChild);d[g]=function(g){if(P===j){F.removeChild(F.firstChild)}else {P++}var d=h(F,i(m)),e=h(d,i(m));d[r]=(new Date()).toLocaleTimeString();u(d,B,e,y);h(e,s(g));F.scrollTop=F.scrollHeight};d[g](S);M()}})()}else {if(typeof print===i){d[g]=print}}}return d}();d.logger=w;d.version='1.4.1';d.lib={};d.registerLibrary=function(h,e){d.lib[h]=e;if(e.hasOwnProperty('init')){e.init(g)}};d.instances=j;d.getInstanceById=function(d){return j[k[d]]};d.Sketch=function(d){this.attachFunction=d;this.options={pauseOnBlur:!1,globalKeyEvents:!1};this.onLoad=h;this.onSetup=h;this.onPause=h;this.onLoop=h;this.onFrameStart=h;this.onFrameEnd=h;this.onExit=h;this.params={};this.imageCache={pending:0,images:{},operaCache:{},add:function(g,h){if(this.images[g]){return}if(!q){this.images[g]=null}if(!h){h=new Image();h.onload=function(e){return function(){e.pending--}}(this);this.pending++;h.src=g}this.images[g]=h;if(f.opera){var e=c.createElement('div');e.appendChild(h);e.style.position='absolute';e.style.opacity=0;e.style.width='1px';e.style.height='1px';if(!this.operaCache[g]){c.body.appendChild(e);this.operaCache[g]=e}}}};this.sourceCode=undefined;this.attach=function(e){if(typeof this.attachFunction==='function'){this.attachFunction(e)}else {if(this.sourceCode){var g=(new Function('return ('+this.sourceCode+');'))();g(e);this.attachFunction=g}else {throw 'Unable to attach sketch to the processing instance'}}};this.toString=function(){var e;var g='((function(Sketch) {\n';g+='var sketch = new Sketch(\n'+this.sourceCode+');\n';for(e in this.options){if(this.options.hasOwnProperty(e)){var h=this.options[e];g+='sketch.options.'+e+' = '+(typeof h==='string'?'"'+h+'"':''+h)+';\n'}}for(e in this.imageCache){if(this.options.hasOwnProperty(e)){g+='sketch.imageCache.add("'+e+'");\n'}}g+='return sketch;\n})(Processing.Sketch))';return g}};var o=function(l,i){var k=[],g=[],h=i.length,j=0;function ajaxAsync(g,e){var d=new XMLHttpRequest();d.onreadystatechange=function(){if(d.readyState===4){var h;if(d.status!==200&&d.status!==0){h='Invalid XHR status '+d.status}else {if(d.responseText===''){if('withCredentials' in new XMLHttpRequest()&&(new XMLHttpRequest()).withCredentials===!1&&f.location.protocol==='file:'){h='XMLHttpRequest failure, possibly due to a same-origin policy violation. You can try loading this page in another browser, or load it from http://localhost using a local webserver. See the Processing.js README for a more detailed explanation of this problem and solutions.'}else {h='File is empty.'}}}e(d.responseText,h)}};d.open('GET',g,!0);if(d.overrideMimeType){d.overrideMimeType('application/json')}d.setRequestHeader('If-Modified-Since','Fri, 01 Jan 1960 00:00:00 GMT');d.send(null)}function loadBlock(n,e){function callback(o,m){k[n]=o;++j;if(m){g.push(e+' ==> '+m)}if(j===h){if(g.length===0){try{return new d(l,k.join('\n'))}catch(B){throw 'Processing.js: Unable to execute pjs sketch: '+B}}else {throw 'Processing.js: Unable to load pjs sketch files: '+g.join('\n')}}}if(e.charAt(0)==='#'){var m=c.getElementById(e.substring(1));if(m){callback(m.text||m.textContent)}else {callback('',"Unable to load pjs sketch: element with id '"+e.substring(1)+"' was not found")}return}ajaxAsync(e,callback)}for(var e=0;e<h;++e){loadBlock(e,i[e])}};var n=function(){c.removeEventListener('DOMContentLoaded',n,!1);j=[];var e=c.getElementsByTagName('canvas'),k;for(var m=0,x=e.length;m<x;m++){var l=e[m].getAttribute('data-processing-sources');if(l===null){l=e[m].getAttribute('data-src');if(l===null){l=e[m].getAttribute('datasrc')}}if(l){k=l.split(/\s+/g);for(var p=0;p<k.length;){if(k[p]){p++}else {k.splice(p,1)}}o(e[m],k)}}var h,v,t,w,s=c.getElementsByTagName('script'),q=[];for(h=s.length-1;h>=0;h--){q.push(s[h])}for(h=0,v=q.length;h<v;h++){var g=q[h];if(!g.getAttribute){continue}var r=g.getAttribute('type');if(r&&(r.toLowerCase()==='text/processing'||r.toLowerCase()==='application/processing')){var u=g.getAttribute('data-processing-target');e=b;if(u){e=c.getElementById(u)}else {var i=g.nextSibling;while(i&&i.nodeType!==1){i=i.nextSibling}if(i&&i.nodeName.toLowerCase()==='canvas'){e=i}}if(e){if(g.getAttribute('src')){k=g.getAttribute('src').split(/\s+/);o(e,k);continue}t=g.textContent||g.text;w=new d(e,t)}}}};d.reload=function(){if(j.length>0){for(var d=j.length-1;d>=0;d--){if(j[d]){j[d].exit()}}}n()};d.loadSketchFromSources=o;d.disableInit=function(){if(q){c.removeEventListener('DOMContentLoaded',n,!1)}};if(q){f['Processing']=d;c.addEventListener('DOMContentLoaded',n,!1)}else {this.Processing=d}})(window,window.document,Math);